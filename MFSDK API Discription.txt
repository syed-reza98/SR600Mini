Fujian MoreFun Electronic Technology Co.,Ltd.








MFSDK API


V1.6  












Fujian MoreFun Electronic Technology Co.,Ltd.
  
Contents
Document history version        1
1. Global        2
   1. Module description        2
   2. Module structure declaration        2
   3. Constant declarations        2
2. Version module        2
   1. Module description        2
   2. Module structure declaration        3
   3. Constant declarations        3  
   4. MfSdkVerGetDataVersion        3
   5. MfSdkVerMfOsVersion        3
   6. MfSdkVerGetAppVer        4
   7. MfSdkVerGetBootVer        4
   8. MfSdkVerGetDriverVer        4
   9. MfSdkVerGetSysVer        5
   10. MfSdkVerGetSpVer        5
   11. MfSdkVerSetAppVersion        5
   12. MfSdkVerGetSecHwVer        6
   13. MfSdkVerGetSecFwVer        6
   3. Util module        7
   1. Module description        7
   2. Module structure declaration        7
   3. Constant declarations        7
   4. MfSdkUtilGetModuleVer        7
   5. MfSdkUtilAsc2Bcd        8
   6. MfSdkUtilBcd2Asc        8
   7. MfSdkUtilHex2Asc        9
   8. MfSdkUtilInt2Bcd        10
   9. MfSdkUtilBcd2Int        10
   10. MfSdkUtilGenLrc        11
   11. MfSdkUtilDes        11
   12. MfSdkUtilBeep        12
   13. MfSdkUtilBuzzerSound        12
   14. MfSdkUtilGetRand        13
   15. MfSdkUtilSHA1        13
   16. MfSdkUtilGeneCodePic        14
   17. MfSdkUtilLed        14
   18. MfSdkUtilStr2Longlong        15
   19. MfSdkUtilMd5File        15
   20. MfSdkUtilUtf8str2Astr        16
   21. MfSdkUtilUnicodeToUtf8        16
   22. MfSdkUtilUtf8ToUnicode        17
   23.   MfSdkUtilTlvGetDataByTag        17
   24. MfSdkUtilCtrlBeep        18
   25. MfSdkUtilGenRsa        18
   26. MfSdkUtilGenRsaKey        18
   27. MfSdkUtilRsaSign        19
   28. MfSdkUtilRsaGetPublicKey        19
   29. MfSdkUtilGenRsaDelKey        20
   30. MfSdkUtilGenRsaDelAllKey        20
   31. MfSdkUtilRsaRand        21
   32. MfSdkUtilCompress        21
   33. MfSdkUtilCompressBound        22  
   34. MfSdkUtilSave2Zip        22
      4. RFID module        22
      1. Module description        22
      2. Module structure declaration        23
      3. Constant declarations        23
      4. MfSdkNfcInit        23
      5. MfSdkNfcApdu        24
      6. MfSdkNfcClose        25
      7. MfSdkNfcCtlsComm        25
      8. MfSdkNfcCtlsPowerDown        25
      9. MfSdkNfcCtlsPowerUpAndSeek        26
      10. MfSdkNfcDetect        26
      11. MfSdkNfcApduStream        27
      12. MfSdkNfcGetUid        27
      13. MfSdkNfcIsProbe        28
      14. MfSdkNfcM1Atqa        28
      15. MfSdkNfcM1Auth        28
      16. MfSdkNfcM1Close        29
      17. MfSdkNfcM1Decrement        29
      18. MfSdkNfcM1Increment        30
      19. MfSdkNfcM1Open        30
      20. MfSdkNfcM1Read        30
      21. MfSdkNfcM1Restore        31
      22. MfSdkNfcM1SetKey        31
      23. MfSdkNfcM1Transfer        32
      24. MfSdkNfcM1Uid        32
      25. MfSdkNfcM1Write        32
      26. MfSdkNfcOpen        33
      27. MfSdkNfcReset        33
      28. MfSdkNfcTagEmulateInitSetData        34
      29. MfSdkNfcTagEmulateInitSetUrl        34
      30. MfSdkNfcTagEmulateProcess        35
      31. MfSdkNfcTagEmulateDeinit        35
      32.   MfSdkNfcLed        35
      33. MfSdkNfcIsAroundFrontLcd        36
         5. Magstripe module        36
         1. Module description        36
         2. Module structure declaration        36
         3. Constant declarations        36
         4. MfSdkMagStripeDetect        37
         5. MfSdkMagtekClose        37
         6. MfSdkMagTekFlush        37
         7. MfSdkMagtekOpen        38
         6. ICC module        38  
            1. Module description        38
            2. Module structure declaration        38
            3. Constant declarations        38
            4. MfSdkIccClose        39
            5. MfSdkIccComm        40
            6. MfSdkIccGetCardATR        40
            7. MfSdkIccGetCardStatus        40
            8. MfSdkIccGetModuleVer        41
            9. MfSdkIccInsertDetect        41
            10. MfSdkIccApdu        42
            11. MfSdkIccOpen        42
            12. MfSdkIccPowerOff        42
            13. MfSdkIccPowerUp        43
            14. MfSdkIccPowerOn        43
            7. GUI module        44
            1. Module description        44
            2. Module structure declaration        44
            3. Constant declarations        44
            4. MfSdkGuiLedAmount        44
            5. MfSdkGuiLedCounter        45
            6. MfSdkGuiLedTime        45
            7. MfSdkGuiLedDigitShow        45
            8. MfSdkGuiBeginBatchPaint        46
            9. MfSdkGuiEndBatchPaint        46
            10. MfSdkGuiSetColor        47
            11. MfSdkGuiGetColor        47
            12. MfSdkGuiSetBgColor        47
            13. MfSdkGuiGetBgColor        48
            14. MfSdkGuiSetFullScreen        48
            15. MfSdkGuiPixel        48
            16. MfSdkGuiLineTo        49
            17. MfSdkGuiBarRc        49
            18. MfSdkGuiSetBarColor        50
            19.   MfSdkGuiGetBarColor        50
            20. MfSdkGuiSetFont        51
            21. MfSdkGuiGetFont        51
            22. MfSdkGuiSetTextColor        51
            23. MfSdkGuiGetTextColor        52
            24. MfSdkGuiSetTextBgColor        52
            25. MfSdkGuiGetTextBgColor        52
            26. MfSdkGuiClearDc        53
            27. MfSdkGuiSetTextZoom        53
            28. MfSdkGuiGetTextZoom        54
            29. MfSdkGuiSetPixel        54  
            30. MfSdkGuiGetPixel        54
            31. MfSdkGuiTextOut        55
            32. MfSdkGuiGetTextWidth        55
            33. MfSdkGuiGetTextHeight        56
            34. MfSdkGuiCline        56
            35. MfSdkGuiGetWidth        57
            36. MfSdkGuiGetHeight        57
            37. MfSdkGuiPageOpPaint        57
            38. MfSdkGuiImeSetMode        58
            39. MfSdkGuiImeStartInput        58
            40. MfSdkGuiMainMenuFuncAdd        59
            41. MfSdkGuiMainMenuFuncDel        59
            42. MfSdkGuiMainMenuShow        59
            43. MfSdkGuiPostMessage        60
            44. MfSdkGuiGetMessage        60
            45. MfSdkGuiProcDefaultMsg        61
            46. MfSdkGuiMessageBoxShow        61
            47. MfSdkGuiLoadBmpEx        62
            48. MfSdkGuiLoadBmp        62
            49. MfSdkGuiBmpFree        63
            50. MfSdkGuiOutBits        63
            51. MfSdkGuiOutBitsEx        64
            52. MfSdkGuiOutBitsZoom        65
            53. MfSdkGuiTextWidthEx        65
            54. MfSdkGuiTextOutEx        66
            55. MfSdkGuiSetTextStyle        66
            56. MfSdkGuiSelectPageEx        67
            57. MfSdkGuiSelectPageExT        67
            58. MfSdkGuiSelectPageCb        68
            59. MfSdkGuiTitleColorBackground        68
            60. MfSdkGuiTitleColorForeground        69
            61. MfSdkGuiTitleFont        69
            62. MfSdkGuiMenuHightlineColor        69
            63.   MfSdkGuiTextOutLineCenter        70
            64. MfSdkGuiTextOutLineRight        70
            65. MfSdkGuiTextOutLineLeft        71
            66. MfSdkGuiTextOutWinCenter        71
            67. MfSdkGuiClearRect        72
            68. MfSdkGuiMessageBoxShowEx        72
            69. MfSdkGuiSetTitle        73
            70. MfSdkGuiTextOutHighlight        73
            71. MfSdkGuiRectHighlight        73
            72. MfSdkGuiDefaultMsgFuncAdd        74
            73. MfSdkGuiMainMenuItemAdd        74  
            74. MfSdkGuiMainMenuItemDel        75
            75. MfSdkGuiKeyGetEvent        75
            76. MfSdkGuiWifiSetPage        75
            77. MfSdkGuiSetProcs        76
            78. MfSdkGuiSignExist        76
            79. MfSdkGuiSignProc        77
            80. MfSdkGuiSignPrint        77
            81. MfSdkGuiSignEncode        77
            82. MfSdkGuiSignEncodeFree        78
            83. MfSdkGuiSignClean        78
            84. MfSdkGuiSignSavetofile        79
            85. MfSdkGuiSetPowerfullColor        79
            86. MfSdkGuiStateFuncAdd        79
            87. MfSdkGuiCleartState        80
            88. MfSdkGuiOutStateBitsColor        80
            89. MfSdkGuiGetDefineColor        81
            90. MfSdkGuiSetCurlSocketIcon        81
            91. MfSdkGuiRefreshMod        81
               8. Printer module        82
               1. Module description        82
               2. Module structure declaration        82
               3. Constant declarations        82
               4. MfSdkPrtInit        83
               5. MfSdkPrtStr        83
               6. MfSdkPrtBitMap        84
               7. MfSdkPrtStart        84
               8. MfSdkPrtStrBold        85
               9. MfSdkPrtFeed        85
               10. MfSdkPrtMatrixCode        86
               11. MfSdkPrtSetFontEN        86
               12. MfSdkPrtSetFontCN        87
               13. MfSdkPrtSetDensity        87
               14. MfSdkPrtSetAlign        88
               15.   MfSdkPrtSetLineAlign        88
               16. MfSdkPrtStrLine        88
               17. MfSdkPrtSetLineSpace        89
               18. MfSdkPrtSetFontMode        89
               19. MfSdkPrtCheckNopaper        89
               20. MfSdkPrtSetArabicNumOrder        90
                  9. Pinpad module        90
                  1. Module description        90
                  2. Module structure declaration        90
                  3. Constant declarations        91
                  4. MfSdkPedSetKeySize        93  
                  5. MfSdkPedGetKeySize        93
                  6. MfSdkPedDukptLoadKey        94
                  7. MfSdkPedDukpt3desRun        94
                  8. MfSdkPedDukptGetKsn        95
                  9. MfSdkPedMkSkSavePlaintextKey        96
                  10. MfSdkPedMkSkSaveEncryptedKey        96
                  11. MfSdkPedMkSkGetKcv        97
                  12. MfSdkPedMkSk3desRun        98
                  13. MfSdkPedMacProc        98
                  14. MfSdkPedEncryptPinProc        99
                  15. MfSdkPedSetPinModeCfgInit        100
                  16. MfSdkPedSetPinModeCfg        100
                  17. MfSdkPedEncryptPinProcEx        101
                  18. MfSdkPedGetPinModeCfg        102
                  19. MfSdkPedGetPinModeStatus        102
                  20. MfSdkPedSaveRsaPriKey        103
                  21. MfSdkPedSaveRsaPukKey        103
                  22. MfSdkPedRsaBlock        104
                  23. MfSdkPedDeleteKey        104
                  24. MfSdkPedTr31GetData        105
                  25. MfSdkPedRkiDukptLoad        105
                  26. MfSdkPedRkiCheckAppKey        105
                  27. MfSdkPedSetPinpad        106
                  28. MfSdkPedGetPinpad        106
                  29. MfSdkPedSetPedUi        107
                  30. MfSdkPedCheckCardOnce        107
                  31. MfSdkPedIsWithPinpad        108
                  32. MfSdkPedExPinpadUpdate        108
                  33. MfSdkPedGetExPinpadVersion        109
                  34. MfSdkPedGetExPinpadInfo        109
                  35. MfSdkPedSetPedPinMod        110
                  36. MfSdkPedGetPin        110
                  37. MfSdkPedTR31LoadKBPK        111
                  38.   MfSdkPedDukptLoadEncryptedKeyByTR31        111
                  39. MfSdkPedDukptLoadEncryptedKeyByTR31A        112
                  40. MfSdkPedMkskSaveEncryptedKeyByTR31        112
                  41. MfSdkPedSetTransKey        113
                  42. MfSdkPedGetTransKeyKvc        114
                  43. MfSdkPedSaveEncryptedMKByTransKey        114
                  44. MfSdkPedDeleteTransKey        114
                  45. MfSdkPedRebootCmd        115
                  46. MfSdkPedGotoMainPage        115
                  47. MfSdkPedAesSavePlaintextKey        115
                  48. MfSdkPedTr31LoadAesKey        116  
                  49. MfSdkPedMkSkAesRun        116
                     10. Communication module        117
                     1. Module description        117
                     2. Module structure declaration        117
                     3. Constant declarations        117
                     4. MfSdkCommLinkState        121
                     5. MfSdkCommGetNetMode        121
                     6. MfSdkCommAtcCell        121
                     7. MfSdkCommAtcCellInfor        122
                     8. MfSdkCommAtcCpin        122
                     9. MfSdkCommAtcGetLocalIp        123
                     10. MfSdkCommAtcIccid        123
                     11. MfSdkCommAtcImei        124
                     12. MfSdkCommAtcImsi        124
                     13. MfSdkCommAtcLac        124
                     14. MfSdkCommAtcGetMcc        125
                     15. MfSdkCommAtcGetMnc        125
                     16. MfSdkCommAtcLacInfor        125
                     17. MfSdkCommAtcSignal        126
                     18. MfSdkCommGetAtcGeneration        126
                     19. MfSdkCommGetAtcPower        126
                     20. MfSdkCommAtcSendCmd        127
                     21. MfSdkCommGetNetSelect        127
                     22. MfSdkCommGetOperateId        128
                     23. MfSdkCommGetWifiPower        128
                     24. MfSdkCommGsmGetSignal        128
                     25. MfSdkCommHttpDownload        129
                     26. MfSdkCommMbedtlsInit        129
                     27. MfSdkCommNetLink        130
                     28. MfSdkCommNetLinkWithUserInfo        130
                     29. MfSdkCommNetUnlink        131
                     30. MfSdkCommSetApMode        131
                     31. MfSdkCommSetApnList        131
                     32.   MfSdkCommSetApnListMcc        132
                     33. MfSdkCommSetAtcPower        132
                     34. MfSdkCommSetInitApn        133
                     35. MfSdkCommSetNetMode        133
                     36. MfSdkCommSetNetSelect        134
                     37. MfSdkCommSetWifiName        134
                     38. MfSdkCommSocketClose        134
                     39. MfSdkCommSocketConnect        135
                     40. MfSdkCommSocketConnectPriority        135
                     41. MfSdkCommSocketCreate        136
                     42. MfSdkCommSocketFifoResize        136  
                     43. MfSdkCommSocketRecv        136
                     44. MfSdkCommSocketSend        137
                     45. MfSdkCommSslAuthMode        137
                     46. MfSdkCommSslClose        138
                     47. MfSdkCommSslConnect        139
                     48. MfSdkCommSslInit        139
                     49. MfSdkCommSslSetHostname        140
                     50. MfSdkCommSslMbedtls        140
                     51. MfSdkCommSslRecv        141
                     52. MfSdkCommSslSend        141
                     53. MfSdkCommSslSend2        142
                     54. MfSdkCommUartClear        142
                     55. MfSdkCommUartClose        143
                     56. MfSdkCommUartGetRxBufLength        143
                     57. MfSdkCommUartOpen        144
                     58. MfSdkCommUartRecv        144
                     59. MfSdkCommUartSend        145
                     60. MfSdkCommUartSetupComm        145
                     61. MfSdkCommWifiClearListApNum        146
                     62. MfSdkCommWifiGetApMac        146
                     63. MfSdkCommWifiGetChannel        146
                     64. MfSdkCommWifiGetLinkState        147
                     65. MfSdkCommWifiGetLocalip        147
                     66. MfSdkCommWifiGetLocalMac        147
                     67. MfSdkCommWifiGetRssi        148
                     68. MfSdkCommWifiGetSignal        148
                     69. MfSdkCommWifiGetSsid        149
                     70. MfSdkCommWifiLinkAp        149
                     71. MfSdkCommWifiListAp        149
                     72. MfSdkCommWifiListApQuit        150
                     73. MfSDkCommWifiListNetWork        150
                     74. MfSdkCommWifiRemoveNetWorkAp        151
                     75. MfSdkCommWifiSetPower        151
                     76.   MfSdkCommWifiSetScan        151
                     77. MfSdkCommWifiUnlinkAp        152
                     78. MfSdkCommSet4gMode        152
                     79. MfSdkCommWifiCheckState        152
                     80. MfSdkCommWifiStartConfig        153
                     81. MfSdkCommUartInit        153
                     82. MfSdkCommLanCableCheck        154
                     83. MfSdkCommLanSetDHCP        154
                     84. MfSdkCommLanIsDHCP        154
                     85. MfSdkCommLanCfg        155
                     86. MfSdkCommGetSwitchSimProcStatus        155  
                     87. MfSdkCommSetOperateIdTask        156
                     88. MfSdkCommWifiPageInitMode        156
                     89. MfSdkCommWifiPageInit        156
                     90. MfSdkCommAtcPageInit        157
                     91. MfSdkCommAtcPageInitMode        157
                     92. MfSdkCommLanEnable        158
                     93. MfSdkCommLanDisenable        158
                     94. MfSdkCommAtcGetIp        158
                     95. MfSdkCommLanGetEthernetPower        159
                     96. MfSdkCommLanSetEthernetPower        159
                     97. MfSdkCommLanChipExist        159
                     98. MfSdkCommWifiChipExist        160
                     99. MfSdkCommAtcSetNetMode        160
                     100. MfSdkCommAtcSendAtCmd        161
                     101. MfSdkCommLanGetIpAndMask        161
                     102. MfSdkCommLanGetGateway        161
                     103. MfSdkCommLanGetDns        162
                     104. MfSdkCommLanGetMac        162
                     105. MfSdkCommConfigReset        163
                     106. MfSdkCommWifiStopConfig        163
                     107. MfSdkCommWifiRestart        163
                     108. MfSdkCommSetPingAddr        164
                     109. MFSdkCommSocketGetModelType        164
                        11. EMV module        164
                        1. Module description        164
                        2. Module structure declaration        165
                        3. Constant declarations        166
                        4. MfSdkEmvKernelInit        169
                        5. MfSdkEmvTerminalConfigInit        170
                        6. MfSdkEmvCardLoop        170
                        7. MfSdkEmvCardProc        171
                        8. MfSdkEmvGetCard        171
                        9. MfSdkEmvGoOnChip        172
                        10.   MfSdkEmvSetAid        172
                        11. MfSdkEmvDeleteOneAid        173
                        12. MfSdkEmvClearAllAid        173
                        13. MfSdkEmvGetAidNum        174
                        14. MfSdkEmvSetCapk        174
                        15. MfSdkEmvDeleteAllCapk        174
                        16. MfSdkEmvGetCapkNum        175
                        17. MfSdkEmvGetCapkByIndex        175
                        18. MfSdkEmvGetDataByTag        176
                        19. MfSdkEmvGetKernelData        176
                        20. MfSdkEmvGetDataByTag        177  
                        21. MfSdkEmvPackTLVData        177
                        22. MfSdkEmvSetKernelData        178
                        23. MfSdkEmvSetDRL        178
                        24. MfSdkEmvClearDRLFile        179
                        25. MfSdkEmvMatchErrCode        179
                        26. MfSdkEmvOnlineRespPack        180
                        27. MfSdkEmvCardFree        180
                        28. MfSdkEmvAddCardBlackList        181
                        29. MfSdkEmvDelCardBlackList        181
                        30. MfSdkEmvGetVersion        181
                        31. MfSdkEmvGetEntryVersion        182
                        32. MfSdkEmvGetContactlessVersion        182
                        33. MfSdkEmvSetCallBackFunction        183
                        34. MfSdkEmvReadCardPage        183
                        35. MfSdkEmvSetSelectAppCallback        184
                        36. MfSdkEmvOfflinePinCallback        184
                        37. MfSdkEmvOnlinePinCallback        184
                        38. MfSdkEmvSetReadPageCallback        185
                        39. MfSdkEmvSetRuPay2ndTapCallback        185
                        40. MfSdkEmvSetDpas2ndTapCallback        186
                        41. MfSdkEmvGetPageWin        186
                        42. MfSdkEmvSetPreprocessOtherDataCallback        186
                        43. MfSdkEmvGetPageWinTip        187
                        44. MfSdkEmvGetProcInfo        187
                        45. MfSdkEmvCallbackEventSetAmtBeforeGpo        187
                        46. MfSdkEmvCallbackEventGetAmtBeforeGpo        188
                        47. MfSdkEmvCallbackEventClear        188
                        48. MfSdkEmvCallbackEventClear        188
                        49. MfSdkEmvGetEmvL2KernelName        189
                        50. MfSdkEmvGetAidsInit        189
                        51. MfSdkEmvGetAid        189
                        52. MfSdkEmvGetAidsFree        190
                        53. MfSdkEmvSetTlv2Kernel        190
                           12.   System module        191
                              1. Module description        191
                              2. Module structure declaration        191
                              3. Constant declarations        191
                              4. MfSdkSysGetDevModel        194
                              5. MfSdkSysGetDevModelName        194
                              6. MfSdkSysDevIs        195
                              7. MfSdkSysGetHardwareVer        195
                              8. MfSdkSysGetTime        196
                              9. MfSdkSysAppIsLock        196
                              10. MfSdkSysAuxlcdGetBrightness        197  
                              11. MfSdkSysAuxlcdSetBrightness        197
                              12. MfSdkSysSubAuxlcdGetBrightness        197
                              13. MfSdkSysSubAuxlcdSetBrightness        198
                              14. MfSdkSysBatterCharge        198
                              15. MfSdkSysGetBatterStatus        198
                              16. MfSdkSysBuzzerSound        199
                              17. MfSdkSysCheckKey        199
                              18. MfSdkSysCheckTick        200
                              19. MfSdkSysClrKey        200
                              20. MfSdkSysConfig        200
                              21. MfSdkSysCurlInit        201
                              22. MfSdkSysDelay        201
                              23. MfSdkSysEnergySetTime        202
                              24. MfSdkSysEnergyTime        202
                              25. MfSdkSysEraseSecureArea        202
                              26. MfSdkSysFileSetPath        203
                              27. MfSdkSysGetBatterLevel        203
                              28. MfSdkSysGetDateTime        203
                              29. MfSdkSysGetIsLcd        204
                              30. MfSdkSysGetLcdType        204
                              31. MfSdkSysGetPsn        205
                              32. MfSdkSysGetTerminalInfo        205
                              33. MfSdkSysGetTermSn        205
                              34. MfSdkSysGetTerminalSn        206
                              35. MfSdkSysGetTick        206
                              36. MfSdkSysGetTickDiff        206
                              37. MfSdkSysGetTimeStamp        207
                              38. MfSdkSysGuiGroupGetObj        207
                              39. MfSdkSysHttpDownload        208
                              40. MfSdkSysHttpDownloadUseAgent        208
                              41. MfSdkSysInit        208
                              42. MfSdkSysLcdCalibration        209
                              43. MfSdkSysLogoInit        209
                              44.   MfSdkSysLogoInitA        210
                              45. MfSdkSysModelType        210
                              46. MfSdkSysNetSetDatacallType        211
                              47. MfSdkSysPrintAdd        211
                              48. MfSdkSysReadFlashData        211
                              49. MfSdkSysReadSecureArea        212
                              50. MfSdkSysReboot        212
                              51. MfSdkSysRfidEmulateConfig        213
                              52. MfSdkSysRfidEmulateDeinit        213
                              53. MfSdkSysRfidEmulateInit        214
                              54. MfSdkSysRfidEmulateProcess        214  
                              55. MfSdkSysRun        214
                              56. MfSdkSysSetDateTime        215
                              57. MfSdkSysSetLanguage        215
                              58. MfSdkSysSetLogData        216
                              59. MfSdkSysSetScrBackLight        216
                              60. MfSdkSysSleep        216
                              61. MfSdkSysStart        217
                              62. MfSdkSysTaskAppSet        217
                              63. MfSdkSysTaskCreate        218
                              64. MfSdkSysTimerCheck        218
                              65. MfSdkSysTimerClose        218
                              66. MfSdkSysTimerCreate        219
                              67. MfSdkSysTimerEnable        219
                              68. MfSdkSysTimerDelete        220
                              69. MfSdkSysTimerOpen        220
                              70. MfSdkSysTtsSystemSetFunc        221
                              71. MfSdkSysUnzipFileFunc        221
                              72. MfSdkSysVersion        221
                              73. MfSdkSysWriteFlashData        222
                              74. MfSdkSysWriteSecureArea        222
                              75. MfSdkSysZipUpdate        223
                              76. MfSdkSysDriverLibInit        223
                              77. MfSdkSysTaskAppInit        223
                              78. MfSdkSysPubDriverInit        224
                              79. MfSdkSysFontInit        224
                              80. MfSdkSysConsoleSwitch        225
                              81. MfSdkSysThreadMutexInit        225
                              82. MfSdkSysThreadMutexLock        225
                              83. MfSdkSysThreadMutexUnlock        226
                              84. MfSdkSysThreadMutexDestroy        226
                              85. MfSdkSysGetSegmentLcdDisplayMaxLength        226
                              86. MfSdkSysIsExternalFlash        227
                              87. MfSdkSysSetForceSleepTime        227
                              88.   MfSdkSysSetSleepToPoweroff        227
                              89. MfSdkSysGetHeapInformation        228
                              90. MfSdkSysSetRestartEnabledOnce        228
                                 13. File System module        229
                                 1. Module description        229
                                 2. Module structure declaration        229
                                 3. Constant declarations        229
                                 4. MfSdkFsSetPath        230
                                 5. MfSdkFsCheckPath        231
                                 6. MfSdkFsClean        231
                                 7. MfSdkFsClose        231  
                                 8. MfSdkFsDelete        232
                                 9. MfSdkFsGetFreeSpace        232
                                 10. MfSdkFsGetTotalSpace        233
                                 11. MfSdkFsGetModuleVer        233
                                 12. MfSdkFsLseek        233
                                 13. MfSdkFsMkdir        234
                                 14. MfSdkFsOpen        234
                                 15. MfSdkFsPathClean        236
                                 16. MfSdkFsRead        237
                                 17. MfSdkFsReadLine        237
                                 18. MfSdkFsReadProfileInt        237
                                 19. MfSdkFsReadProfileString        238
                                 20. MfSdkFsUnlink        238
                                 21. MfSdkFsWrite        239
                                 22. MfSdkFsWriteSync        239
                                 23. MfSdkFsWriteBlockByName        240
                                 24. MfSdkFsWriteProfileInt        240
                                 25. MfSdkFsWriteProfileString        241
                                 26. MfSdkFsRenamePath        241
                                 27. MfSdkFsClearFile        242
                                 28. MfSdkFsDelDirFiles        242
                                 29. MfSdkFsRenameA        242
                                 30. MfSdkFsGetFileLength        243
                                 31. MfSdkFsRmdir        243
                                 32. MfSdkFsOpenDir        244
                                 33. MfSdkFsReadDir        244
                                 34. MfSdkFsCloseDir        245
                                    14. FIFO module        246
                                    1. Module description        246
                                    2. Module structure declaration        246
                                    3. Constant declarations        246
                                    4. MfSdkFifoCreate        247
                                    5. MfSdkFifoGet        247
                                    6.   MfSdkFifoInit        248
                                    7. MfSdkFifoIsEmpty        248
                                    8. MfSdkFifoIsFull        249
                                    9. MfSdkFifoPut        249
                                    10. MfSdkFifoResize        250
                                    11. MfSdkGetFifoNum        250
                                    12. MfSdkGetGetFifoSize        251
                                       15. Audio module        251
                                       1. Module description        251
                                       2. Module structure declaration        251
                                       3. Constant declarations        252  
                                       4. MfSdkAudPlayVoice        253
                                       5. MfSdkAudPlayAmt        253
                                       6. MfSdkAudPlayBatteryLevel        254
                                       7. MfSdkAudPlayFile        254
                                       8. MfSdkAudPlay        254
                                       9. MfSdkAudPlayNum        255
                                       10. MfSdkAudPlayNumber        255
                                       11. MfSdkAudPlayPayResult        255
                                       12. MfSdkAudPlayPayType        256
                                       13. MfSdkAudPlayUnit        256
                                       14. MfSdkAudTtsState        256
                                       15. MfSdkAudBatchBegin        257
                                       16. MfSdkAudBathcEnd        257
                                       17. MfSdkAudClear        258
                                       18. MfSdkAudTtsPlay        258
                                       19. MfSdkAudSetVolume        258
                                       20. MfSdkAudSetVolumeRunning        259
                                       21. MfSdkAudGetVolume        259
                                       22. MfSdkAudSetSpeed        259
                                          16. KeyBoard module        260
                                          1. Module description        260
                                          2. Module structure declaration        260
                                          3. Constant declarations        260
                                          4. MfSdkKbKeySetParam        261
                                          5. MfSdkKbGetKeySound        261
                                          6. MfSdkKbSetKeySound        262
                                          7. MfSdkKbWaitKey        262
                                          17. Lcd module        262
                                          1. Module description        262
                                          2. Module structure declaration        262
                                          3. Constant declarations        263
                                          4. MfSdkLcdBackLight        263
                                          5. MfSdkLcdSegmentBackLight        264
                                          6.   MfSdkLcdGetSubProbe        264
                                          7. MfSdkLcdSetIndex        265
                                          8. MfSdkLcdGetPowerDownTime        265
                                          9. MfSdkLcdSetPowerDownTime        265
                                          10. MfSdkLcdGetBackLightTime        266
                                          11. MfSdkLcdSetBackLightTime        266
                                          12. MfSdkLcdGetFrontBackLightTime        266
                                          13. MfSdkLcdSetFrontBackLightTime        267
                                          14. MfSdkLcdGetRearBackLightTime        267
                                          15. MfSdkLcdSetRearBackLightTime        267
                                          16. MfSdkLcdBrightnessLevelSettings        268  
                                          17. MfSdkLcdAutoFlush        268
                                          18. MfSdkLcdSetNormalDirection        269
                                          19. MfSdkLcdArrowDisplay        269
                                          20. MfSdkLcdBacklightIsBright        269
                                             18. Log module        270
                                             1. Module description        270
                                             2. Module structure declaration        270
                                             3. Constant declarations        270
                                             4. MfSdkLogSoundSet        270
                                             5. MfSdkLog        271
                                             6. MfSdkLogTip        271
                                             7. MfSdkLogHexBuff        272
                                             8. MfSdkLogLevel        272
                                             9. MfSdkLogOutputSwitch        273
                                             19. Power module        273
                                             1. Module description        273
                                             2. Module structure declaration        273
                                             3. Constant declarations        273
                                             4. MfSdkPowerResumeProc        274
                                             5. MfSdkPowerManagerSetFunc        275
                                             6. MfSdkPowerLockApp        275
                                             7. MfSdkPowerUnlockApp        275
                                             8. MfSdkPowerTaskInit        276
                                             9. MfSdkPowerTaskSuspend        276
                                             10. MfSdkPowerReset        276
                                             11. MfSdkPowerPageCb        277
                                             12. MfSdkPowerPageInit        277
                                             13. MfSdkPowerSetTime        278
                                             14. MfSdkPowerOff        278
                                             15. MfSdkPowerKeySetLight        278
                                             16. MfSdkPowerGetBatteryPercentage        279
                                             17. MfSdkPowerSetBacklightTime        279
                                             18. MfSdkPowerSupertimeReset        279
                                             19.   MfSdkPowerSwitchResetTick        280
                                             20. MfSdkPowerSleepSwitch        280
                                                20. QR module        281
                                                1. Module description        281
                                                2. Module structure declaration        281
                                                3. Constant declarations        281
                                                4. MfSdkQrDecode        281
                                                5. MfSdkQrScannerClose        282
                                                6. MfSdkQrScannerGetImg        282
                                                7. MfSdkQrScannerOpen        282
                                                8. MfSdkQrSetScanBoxPosition        283  
                                                9. MfSdkQrScannerStart        283
                                                10. MfSdkQrScannerStop        283
                                                11. MfSdkQrScannerSetPreview        284
                                                   21. TMS module        284
                                                   1. Module description        284
                                                   2. Module structure declaration        284
                                                   3. Constant declarations        284
                                                   4. MfSdkTmsSetProgressCallback        286
                                                   5. MfSdkTmsSetResultCallback        287
                                                   6. MfSdkTmsHeartBeat        287
                                                   7. MfSdkTmsUpdate        288
                                                   8. MfSdkTmsUpdateFile        288
                                                   9. MfSdkTmsAppBusy        288
                                                   10. MfSdkTmsCheckTimeDisable        289
                                                   11. MfSdkTmsGetMsg        289
                                                   12. MfSdkTmsGetResult        289
                                                   13. MfSdkTmsSetSig        290
                                                   14. MfSdkTmsUpdateOta        290
                                                   15. MfSdkTmsSetConnectRetryCnt        291
                                                   16. MfSdkTmsSetErrorRetryCnt        291
                                                   17. MfSdkTmsEnable        291
                                                   18. MfSdkTmsSetActionCallback        292
                                                   19. MfSdkTmsEnableSyncTime        292
                                                   22. LVGL module        293
                                                   1. Module description        293
                                                   2. Module structure declaration        293
                                                   3. Constant declarations        293
                                                   4. MfSdkLvglInit        295
                                                   5. MfSdkLvglGetPageBody        295
                                                   6. MfSdkLvglExit        295
                                                   7. MfSdkLvglCls        296
                                                   8. MfSdkLvglClsEnableStatusBar        296
                                                   9. MfSdkLvglEnableDefaultStatusBarIcons        297
                                                   10.   MfSdkLvglClearLine        297
                                                   11. MfSdkLvglGetStatusBarHeight        297
                                                   12. MfSdkLvglCreateButtons        298
                                                   13. MfSdkLvglClearAll        298
                                                   14. MfSdkLvglWaitKey        298
                                                   15. MfSdkLvglWaitKeyMs        299
                                                   16. MfSdkLvglClrKeyFlag        299
                                                   17. MfSdkLvglCheckKey        300
                                                   18. MfSdkLvglGetKey        300
                                                   19. MfSdkLvglDispTextCoord        300
                                                   20. MfSdkLvglDispTextLine        301  
                                                   21. MfSdkLvglDispMenuText        301
                                                   22. MfSdkLvglDispMenuIcon        302
                                                   23. MfSdkLvglDispButton        302
                                                   24. MfSdkLvglMessageBox        303
                                                   25. MfSdkLvglDispList        303
                                                   26. MfSdkLvglDispRollpage        304
                                                   27. MfSdkLvglInputText        304
                                                   28. MfSdkLvglInputTextEx        305
                                                   29. MfSdkLvglDispBar        305
                                                   30. MfSdkLvglUpdateBar        306
                                                   31. MfSdkLvglDispLed        306
                                                   32. MfSdkLvglUpdateLed        307
                                                   33. MfSdkLvglShowQrcode        307
                                                   34. MfSdkLvglShowQrcodeEx        308
                                                   35. MfSdkLvglShowImage        308
                                                   36. MfSdkLvglShowImageEx        309
                                                   37. MfSdkLvglShowImagebuff        309
                                                   38. MfSdkLvglShowScreenCanves        310
                                                   39. MfSdkLvglDrawLine        310
                                                   40. MfSdkLvglDrawBox        311
                                                   41. MfSdkLvglEsign        311
                                                   42. MfSdkLvglScan        312
                                                   43. MfSdkLvglDispDialog        312
                                                   44. MfSdkLvglUpdateDialog        313
                                                   45. MfSdkLvglCloseDialog        313
                                                   46. MfSdkLvglDispRollpageEx        313
                                                   47. MfSdkLvglDispMultipleChoice        314
                                                   48. MfSdkLvglDispSetSlider        314
                                                   49. MfSdkLvglDispSetResult        315
                                                   50. MfSdkLvglInputPin        315
                                                   51. MfSdkLvglDispAnimation        316
                                                   52. MfSdkLvglCloseAnimation        316
                                                   53. MfSdkLvglCreateStatusBarTask        317
                                                   54. MfSdkLvglSetStatusBarIcon        317
                                                   55. MfSdkLvglQuickSetStatusBarIcon        318
                                                   56. MfSdkLvglSetStatusBar        318
                                                   57. MfSdkLvglGetUiBuff        318
                                                   58. MfSdkLvglLoadPng        319
                                                   59. MfSdkLvglFreePng        319
                                                   60. MfSdkLvglGuiInit        320
                                                   61. MfSdkLvglGroupSet        320
                                                      23. Memory module        320
                                                      1. Module description        320
  

  Document history version


Date
	Version
	Remark
	Author
	2025-04-02
	V1.6
	                                                      1. update to MFSDK V1.7.4
	MoreFun SDK group
	2024-05-31  
	V1.5
	                                                      1. Added MfSdkFsRmdir
                                                      2. Added MfSdkFsOpenDir
                                                      3. Added MfSdkFsReadDir
                                                      4. Added MfSdkFsCloseDir
	MoreFun SDK group
	2024-05-31
	V1.4
	                                                      1. Add APIs description
	MoreFun SDK group
	2024-02-20
	V1.3
	                                                      1. Add Pinpad-related apis
	MoreFun SDK group
	2024-02-20
	V1.2
	                                                      1. Added        API        MfSdkFsRenamePath        and MfSdkFsGetFileLength
                                                      2. API        MfSdkFsOpenadd        descriptive information;
                                                      3. MfSdkLcdSetPowerDownTime        input parameter unit second;
                                                      4. MfSdkCommSocketConnect input parameter timeout unit ms;
	MoreFun SDK group
	2024-02-17
	V1.1
	                                                      1. MfSdkCommAtcCpin        add        descriptive information;


                                                      2. MfSdkQrDecode modify the return value type;


                                                      3. Added MfSdkTmsSetSig API whether to enable the signature verification function;


                                                      4. Added MfSdkVerGetSecHwVer/MfSdkVerGetSecFwVer;


                                                      5. MfSdkPrtSetLineSpace;
	MoreFun SDK group
	2023-12-31
	V1.0
	First version
	MoreFun SDK
group
	

                                                      1.   Global


                                                         1. Module description
The definition of the global description.


                                                         2. Module structure declaration
        None.          
                                                         3. Constant declarations
#define MFSDK_UNUSED(x) ((void)(x))
#define MFSDK_COND_RET(  cond  ,        retValue  ) do{ if(  cond  )        \
{ return   retValue  ; } }while(0)


#define MFSDK_FALSE (0)
#define MFSDK_TRUE (1)  
                                                         2. Version module
                                                         4. Module description
This module mainly includes APIs for getting versions.
  

                                                         5. Module structure declaration
        None.        
                                                         6. Constant declarations
        None.        


                                                         7. MfSdkVerGetDataVersion


Prototype
	

LIB_EXPORT s8* MfSdkVerGetDataVersion()
	Function
	

Get data lib version
	Params
	in
	Nothing
	out
	Nothing
	return
	version string
	remark
	

	





demo
	char* data_version = NULL;
data_version = MfSdkVerGetDataVersion();
	                                                         8. MfSdkVerMfOsVersion  


Prototype
	

LIB_EXPORT s8* MfSdkVerMfOsVersion()
	Function
	

Get MoreFun OS SDK version
	Params
	in
	Nothing
	out
	Nothing
	return
	version string
	remark
	

	demo
	char* osVersion = NULL;
osVersion = MfSdkVerMfOsVersion();
	

  

                                                            9. MfSdkVerGetAppVer


Prototype
	

LIB_EXPORT const s8 *MfSdkVerGetAppVer()
	Function
	

Get App version
	Params
	in
	Nothing
	out
	Nothing
	return
	version string
	remark
	

	demo
	char* appVersion = NULL;
appVersion = MfSdkVerGetAppVer();
	                                                            10. MfSdkVerGetBootVer  


Prototype
	

LIB_EXPORT const s8 *MfSdkVerGetBootVer()
	Function
	

Get boot version
	Params
	in
	Nothing
	out
	Nothing
	return
	version string
	remark
	

	demo
	char* bootVersion = NULL;
bootVersion = MfSdkVerGetBootVer();
	                                                               11. MfSdkVerGetDriverVer


Prototype
	

LIB_EXPORT const s8 *MfSdkVerGetDriverVer()
	Function
	

Get driver version
	Params
	in
	Nothing
	out
	Nothing
	return
	version string
	

  

remark
	

	demo
	char* driverVersion = NULL;
driverVersion = MfSdkVerGetDriverVer();
	                                                               12. MfSdkVerGetSysVer


Prototype
	

LIB_EXPORT const s8 *MfSdkVerGetSysVer()
	Function
	

Get system version
	Params
	in
	Nothing
	out
	Nothing
	return
	version string
	remark
	

	demo
	char* sysVersion = NULL;
sysVersion = MfSdkVerGetSysVer();
	                                                               13. MfSdkVerGetSpVer  


Prototype
	

LIB_EXPORT const s8 *MfSdkVerGetSpVer()
	Function
	

Get sp version
	Params
	in
	Nothing
	out
	Nothing
	return
	version string
	remark
	

	demo
	char* spVersion = NULL;
spVersion = MfSdkVerGetSpVer();
	                                                                  14. MfSdkVerSetAppVersion




Prototype        LIB_EXPORT s32 MfSdkVerSetAppVersion(s8 *pszVer)  
  

Function
	

Set application version.
	Params
	in
	pszVer        app version string
	out
	Nothing
	return
	0        Success
	remark
	

	demo
	char* appVer = “V1.0.0”;
MfSdkVerSetAppVersion(appVer);
	



                                                                  15. MfSdkVerGetSecHwVer  


Prototype
	

LIB_EXPORT s8 *MfSdkVerGetSecHwVer()
	Function
	

get pci hardware version
	Params
	in
	Nothing
	out
	Nothing
	return
	version string
	remark
	

	demo
	char *ver = (char*)MfSdkVerGetSecHwVer();
	                                                                     16. MfSdkVerGetSecFwVer


Prototype
	

LIB_EXPORT s8 *MfSdkVerGetSecFwVer()
	Function
	

Get pci firmware version
	Params
	in
	Nothing
	out
	Nothing
	return
	version string
	remark
	

	demo
	char *ver = (char*)MfSdkVerGetSecFwVer();
	

                                                                     3.   Util module
                                                                        17. Module description
This module mainly includes encoding type conversion and other util APIs.


                                                                        18. Module structure declaration
//QR code parameters typedef struct  
{
s32 nVersion;        //< version number:1~40
s32 nLevel;        //< Error correction level: 0-low, 1-in, 2-high, 3-maximum s32 moudleWidth;        ///< Module width (unit: pixel)  
} MfSdkUtilQrInfo_T;
                                                                        19. Constant declarations
  

                                                                        20. MfSdkUtilGetModuleVer


Prototype
	

LIB_EXPORT s32 MfSdkUtilGetModuleVer(s8 *pszVer)
	Function
	

Get util module version
	Params
	in
	Nothing
	out
	pszVer        Module version
	return
	Others        Failed, Ref. MfSdkUtilRet_E
	

  



	MFSDK_UTIL_RET_
Success
OK
	remark
	

	

demo
	char utilVersion[20] = {0}; int ret = -1;
ret = MfSdkUtilGetModuleVer(utilVersion);
	                                                                        21. MfSdkUtilAsc2Bcd


Prototype
	LIB_EXPORT s32 MfSdkUtilAsc2Bcd(s8 *AscBuf, s8 *BcdBuf, s32 AscLen)
	Function
	

ASCII code to BCD code
	

Params
	in
	AscLen        Incoming ASCII code data length
	AscBuf        ASCII code data to be converted
	out
	BcdBuf        Conversion output BCD code data
	

return
	Others        Failed, Ref. MfSdkUtilRet_E
	MFSDK_UTIL_RET_
Success
OK
	remark
	

	

demo
	char *AscBuf = "1234"; char BcdBuf[3] = {0}; int ret = -1;
ret = MfSdkUtilAsc2Bcd(AscBuf, BcdBuf, strlen(AscBuf));
	                                                                        22. MfSdkUtilBcd2Asc  


Prototype
	LIB_EXPORT s32 MfSdkUtilBcd2Asc(s8 *BcdBuf, s8 *AscBuf, s32 AscLen)
	Function
	

BCD code to ASCII code
	

Params
	

in
	The length of ASCII code data, that is the double
AscLen
length of BCD code data
	BcdBuf        BCD code data to be converted
	out
	AscBuf        Conversion output ASCII code data
	return
	Others        Failed, Ref. MfSdkUtilRet_E
	MFSDK_UTIL_RET_ Success
	

  



	OK
	remark
	

	



demo
	char AscBuf[9] = {0};
char *BcdBuf = "\x12\x23"; int ret = -1;
ret = MfSdkUtilBcd2Asc(BcdBuf, AscBuf, 2); APP_TRACE("MfSdkUtilBcd2Asc:%s\r\n",AscBuf);
Result: MfSdkUtilBcd2Asc:12
	                                                                           23. MfSdkUtilHex2Asc  


Prototype
	LIB_EXPORT s32 MfSdkUtilHex2Asc(u8* pszBcdBuf, s32 AscLen, s8 cAlignment, u8* pszAsciiBuf)
	Function
	

Hex code to ASCII code
	



Params
	

in
	The length of ASCII code data, that is the double
AscLen
length of Bcd code data
	cAlignment        Alignment
	pszBcdBuf        Bcd code data to be converted
	out
	AscBuf        Conversion output ASCII code data
	

return
	Others        Failed
	MFSDK_UTIL_RET_
Success
OK
	remark
	

	















demo
	char AscBuf[9] = {0};
char *BcdBuf = "\x12\x23"; int ret = -1;
memset(AscBuf,0,sizeof(AscBuf)); MfSdkUtilHex2Asc(BcdBuf, 4, 1, AscBuf); APP_TRACE("MfSdkUtilHex2Asc1:%s\r\n",AscBuf); memset(AscBuf,0,sizeof(AscBuf)); MfSdkUtilHex2Asc(BcdBuf, 4, 0, AscBuf); APP_TRACE("MfSdkUtilHex2Asc2:%s\r\n",AscBuf); memset(AscBuf,0,sizeof(AscBuf)); MfSdkUtilHex2Asc(BcdBuf, 3, 1, AscBuf); APP_TRACE("MfSdkUtilHex2Asc3:%s\r\n",AscBuf); memset(AscBuf,0,sizeof(AscBuf)); MfSdkUtilHex2Asc(BcdBuf, 3, 0, AscBuf); APP_TRACE("MfSdkUtilHex2Asc4:%s\r\n",AscBuf);
Result:
	

  

MfSdkUtilHex2Asc1:1223 MfSdkUtilHex2Asc2:1223 MfSdkUtilHex2Asc3:223 MfSdkUtilHex2Asc4:122  
                                                                              24. MfSdkUtilInt2Bcd


Prototype
	LIB_EXPORT s32 MfSdkUtilInt2Bcd(u32 IntData, s8 *BcdBuf, s32 BcdLen)
	Function
	

Int data transfer to BCD code
	

Params
	in
	BcdLen        Length of BCD code data after conversion
	IntData        Int data to be converted
	out
	BcdBuf        BCD data after conversion
	

return
	Others        Failed, Ref. MfSdkUtilRet_E
	MFSDK_UTIL_RET_
Success
OK
	remark
	

	









demo
	s8 bcdbuf[16] = {0}; MfSdkUtilInt2Bcd(123,bcdbuf, 2);
APP_TRACE_BUFF_TIP(bcdbuf, 2, "MfSdkUtilInt2Bcd1"); memset(bcdbuf,0,sizeof(bcdbuf)); MfSdkUtilInt2Bcd(123,bcdbuf, 4);
APP_TRACE_BUFF_TIP(bcdbuf, 4, "MfSdkUtilInt2Bcd4"); Result:
MfSdkUtilInt2Bcd1 01 23
MfSdkUtilInt2Bcd4
00 00 01 23
	                                                                              25. MfSdkUtilBcd2Int  


Prototype
	LIB_EXPORT s32 MfSdkUtilBcd2Int( s8 *BcdBuf, u32 *IntData,s32 BcdLen)
	Function
	

BCD code to int type
	Params
	in
	BcdLen        BCD code data length
	BcdBuf        BCD data to be converted
	

  



	out
	IntData        Int data after conversion
	

return
	Others        Failed, Ref. MfSdkUtilRet_E
	MFSDK_UTIL_RET
Success
_OK
	remark
	

	







demo
	u32 IntData = 0;
char *BcdBuf = "\x12\x23"; int ret = -1;
ret = MfSdkUtilBcd2Int(BcdBuf, &IntData , 2); APP_TRACE("MfSdkUtilBcd2Int:%d\r\n",IntData); Result:
MfSdkUtilBcd2Int:1223
	                                                                                 26. MfSdkUtilGenLrc  


Prototype
	

LIB_EXPORT u8 MfSdkUtilGenLrc(s8 *Data, s32 DataLen)
	Function
	Calculates LRC and generates LRC parity bits (bitwise exclusive or)
	Params
	in
	Data        Data to be calculated for LRC check bits
	DataLen        Data length
	return
	LRC        The LRC check value generated by calculation
	remark
	

	

demo
	char* Data = “xxxxxxxxxx”; unsigned char LRC;
LRC = MfSdkUtilGenLrc(Data, strlen(Data));
	                                                                                    27. MfSdkUtilDes


Prototype
	LIB_EXPORT s32 MfSdkUtilDes(u8 bDesType, u8 bDesMode, s8
*Key, s8 *InData, s32 DataLen, s8 *OutData)
	Function
	DES encryption and decryption to DES data encryption and decryption, or 3DES encryption and decryption
	

Params
	

in
	DES encryption and decryption algorithm: 0 denotes DES encryption,
bDesType        1 denotes DES decryption,
                                                                                    2. denotes 3DES encryption(16 bytes key),
                                                                                    3. denotes 3DES decryption(16 bytes key),
	

  



	

	                                                                                    4. denotes 3DES encryption(24 bytes key),
                                                                                    5. denotes 3DES decryption(24 bytes key).
	bDesMode        0 ECB 1 CBC
	Used for encryption and decryption of
Key
transmission keys, must be 8 times
	Input data to be encrypted or decrypted must
InData
be 8 times bytes
	DataLen        The length of input data
	out
	The key after encryption and decryption must
OutData
be 8 bytes
	

return
	Others        Failed, Ref. MfSdkUtilRet_E
	MFSDK_UTIL_RET_
Success
OK
	remark
	

	demo
	

	                                                                                    28. MfSdkUtilBeep  


Prototype
	

LIB_EXPORT void MfSdkUtilBeep(s32 num)
	Function
	Buzzing success indicates buzzing when successful, non blocking
	Params
	in
	num        Buzz times
	return
	Nothing
	remark
	

	demo
	MfSdkUtilBeep(100);
	                                                                                       29. MfSdkUtilBuzzerSound


Prototype
	

LIB_EXPORT void MfSdkUtilBuzzerSound(s32 nMillisecond)
	Function
	

Set the buzzer ringing time
	Params
	in
	nMillisecond        ringing time(Unit millisecond)
	out
	Nothing
	return
	Nothing
	

  

remark
	

	demo
	MfSdkUtilBuzzerSound(100);
	                                                                                       30. MfSdkUtilGetRand


Prototype
	

LIB_EXPORT s32 MfSdkUtilGetRand(s32 len, u8* pBuf)
	Function
	

Generating random numbers
	Params
	in
	len        random number len
	out
	pBuf        random number string
	

return
	Others        Failed, Ref. MfSdkUtilRet_E
	MFSDK_UTIL_RET
Success
_OK
	remark
	

	

demo
	unsigned char randomNumberStr[6] = {0}; int ret = -1;
ret = MfSdkUtilGetRand(5, randomNumberStr );
	                                                                                       31. MfSdkUtilSHA1  


Prototype
	LIB_EXPORT s32 MfSdkUtilSHA1(const u8* psSrc, u32 nSrcLen, u8* psDst)
	Function
	

SHA1 calculation
	

Params
	in
	psSrc        Source buffer
	nSrcLen        Source length
	out
	psDst        Result of SHA1
	

return
	Others        Failed, Ref. MfSdkUtilRet_E
	MFSDK_UTIL_RET_
Success
OK
	remark
	

	

demo
	unsigned char* psSrc = "demotest"; unsigned char psDst[20+1] = {0}; int ret = -1;
ret = MfSdkUtilSHA1((const unsigned char*)psSrc, strlen(psSrc), psDst);
	

  

                                                                                          32. MfSdkUtilGeneCodePic


Prototype
	LIB_EXPORT s32 MfSdkUtilGeneCodePic(s8 * chData, s32 iLen, MfSdkUtilQrInfo_T *qrparam , s8 * bitmap)
	Function
	

QR code generation
	

Params  
	

in
	chData        QR code data
	iLen        Data length
	qrparam        QR code parameters
	out
	bitmap        Generated two-dimensional code dot matrix data
	return
	Others        Failed, Ref. MfSdkUtilRet_E
	>0        Successfully generated QR code width
	remark
	

	

















demo
	#define QR_HEIGHT 80




MfSdkUtilQrInfo_T qrparam;
char *bitmap = MALLOC(QR_HEIGHT*QR_HEIGHT/8); char *qrData = "http://en.morefun-et.com";
int length = strlen(qrData); int width = 0;
int Qr_width = MfSdkGuiGetWidth(); qrparam.nVersion = 0; //auto qrparam.nLevel = 0;
qrparam.moduleWidth = 1;




while(qrparam.moudleWidth > 0 && (width <= 0 || width > Qr_heith))
{
memset(bitmap , 0 , QR_HEIGHT*QR_HEIGHT/8);
width = MfSdkUtilGeneCodePic(data , length, &qrparam, bitmap); qrparam.moudleWidth --;
}
	                                                                                          33. MfSdkUtilLed


Prototype
	

LIB_EXPORT void MfSdkUtilLed(s32 num, s32 type)
	Function
	

LED light control
	

  



Params
	

in
	num        LED light number
(0 red, 1 blue, 2 yellow, 3 green)
	type        LED light switch(0 close, 1 open)
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	MfSdkUtilLed(1,1); // open blue led
	                                                                                          34. MfSdkUtilStr2Longlong


Prototype
	

LIB_EXPORT long long MfSdkUtilStr2Longlong(const s8 *amt)
	Function
	

String to long long
	Params
	in
	amt        amount string
	out
	Nothing
	return
	long long        amount in long long type
	remark
	

	demo
	char *amt = "1533352";
long long amt = MfSdkUtilStr2Longlong((const char*)amt);
	                                                                                          35. MfSdkUtilMd5File  


Prototype
	LIB_EXPORT s32 MfSdkUtilMd5File(const s8* pszFilePath, u8* pOutMD5)
	Function
	

File MD5 value calculation
	Params
	in
	pszFilePath        File Path
	out
	pOutMD5        MD5 result
	return
	MFSDK_FALSE        file not found
	MFSDK_TRUE        success
	remark
	

	

demo
	#define FILE_TEST "data\\test.txt" unsigned char *pOutMD5 = NULL;
int ret = MfSdkUtilMd5File(FILE_TEST, pOutMD5);
	

  

                                                                                             36. MfSdkUtilUtf8str2Astr


Prototype
	LIB_EXPORT s32 MfSdkUtilUtf8str2Astr(char *utfstr, s32 utfchars, u8*astr,s32 buffsize)
	Function
	

Utf-8 string to ASCII string
	

Params
	

in
	utfstr        utf-8 string
	utfchars        utf-8 string length
	buffsize        astr buffer size
	out
	astr        out ascii string
	return
	Others        Failed, Ref. MfSdkUtilRet_E
	>0        ascii length
	remark
	

	

demo
	char AscBuf[50] = {0}; char *utfstr= “test”;
int ret = -1;
ret = MfSdkUtilUtf8str2Astr(utfstr, strlen(utfstr), AscBuf, sizeof(AscBuf));
	                                                                                             37. MfSdkUtilUnicodeToUtf8  


Prototype
	LIB_EXPORT s32 MfSdkUtilUnicodeToUtf8(u16 codepoint, s8
*outstr)
	Function
	

Unicode data transfer to utf-8 code
	Params
	in
	codepoint        Unicode data to be converted
	out
	outstr        utf-8 data after conversion
	return
	Others        Failed, Ref. MfSdkUtilRet_E
	>0        The length of outstr
	remark
	

	

demo
	char utfstr[50] = {0}; char *unicode= “test”; int utflen= -1;
utflen = MfSdkUtilUnicodeToUtf8((unsigned short)unicode, utfstr);
	

  

                                                                                                38. MfSdkUtilUtf8ToUnicode


Prototype
	

LIB_EXPORT s32 MfSdkUtilUtf8ToUnicode(u8 *instr, u8 *outstr)
	Function
	

utf-8 code data transfer to Unicode
	Params
	in
	instr        utf-8 data to be converted
	out
	outstr        Unicode data after conversion
	return
	Others        Failed, Ref. MfSdkUtilRet_E
	>0        The length of outstr
	remark
	

	

demo
	char unicodestr[50] = {0}; char *utfstr= “test”;
int unilen= -1;
unilen = MfSdkUtilUtf8ToUnicode(utfstr, unicodestr);
	                                                                                                39. MfSdkUtilTlvGetDataByTag  


Prototype
	LIB_EXPORT s32 MfSdkUtilTlvGetDataByTag(u8*tagName,u8
*pInBuf,s32 inBufLength,u8 *pValue, s32 valueLength)
	Function
	

Get TLV data by tag
	



Params
	

in
	tagName        tag name eg. "\x9F\x02"
	pInBuf        tlv bytes stream
	inBufLength        tlv bytes stream length
	valueLength        pValue buffer size
	out
	pValue        tagName value
	return
	Others        Failed, Ref. MfSdkUtilRet_E
	>0        pValue length
	remark
	

	demo
	

	

  

                                                                                                   40. MfSdkUtilCtrlBeep


Prototype
	

LIB_EXPORT void MfSdkUtilCtrlBeep(int ms, int hz)
	Function
	

Set the buzzer ringing time and Hz
	

Params
	in
	ms        beep time ms
	hz        beep hz
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	//750Hz ringing 500ms
MfSdkUtilCtrlBeep(500,750);
	                                                                                                   41. MfSdkUtilGenRsa  


Prototype
	LIB_EXPORT s32 MfSdkUtilGenRsa(s32 keyBits,u8 *privPem, s32 privPemLength,u8 *pubPem, s32 pubPemLength,s32 timeoutMs)
	Function
	Generate RSA public and private keys. The exponent is fixed at        65537
	





Params
	

in
	keyBits        RSA key bits
	privPemLength        privPem buffer size
	pubPemLength        pubPem buffer size
	timeoutMs        timeout ms
	out
	privPem        private key, format is pem
	pubPem        public key format is pem
	return
	Others        Failed, Ref. MfSdkUtilRet_E
	0        Success
	remark
	

	demo
	

	                                                                                                      42. MfSdkUtilGenRsaKey




LIB_EXPORT s32 MfSdkUtilGenRsaKey(u8 index,s32 keyBits,s32 timeoutMs)    
  

Function
	

Generate RSA key
	

Params
	

in
	index        index
	keyBits        1024 - 4096 bits
	timeoutMs        timeout ms
	out
	Nothing
	return
	0        Success
	Other        Failed, Ref. MfSdkUtilRet_E
	remark
	

	demo
	

	                                                                                                      43. MfSdkUtilRsaSign  


Prototype
	LIB_EXPORT s32 MfSdkUtilRsaSign(u8
index ,MfSdkUtilMDType_E mdAlg, u8* hash , s32 hashLength,u8* signData,s32 signDataLength)
	Function
	

Generate RSA signature
	





Params
	

in
	index
	mdAlg        Ref. MfSdkUtilMDType_E
	hash
	hashLength
	out
	signData
	signDataLength
	return
	Others        Failed, Ref. MfSdkUtilRet_E
	>0        Success
	remark
	

	demo
	

	                                                                                                         1. MfSdkUtilRsaGetPublicKey


Prototype
	LIB_EXPORT s32 MfSdkUtilRsaGetPublicKey(u8 index , u8
*pubPem, s32 pubPemLength)
	Function
	

Get RSA public key
	Params
	in
	index
	

  



	

	pubPemLength
	out
	pubPem        key string
	return
	0        Success
	Others        Failed, Ref. MfSdkUtilRet_E
	remark
	

	demo
	

	                                                                                                         2. MfSdkUtilGenRsaDelKey


Prototype
	

LIB_EXPORT s32 MfSdkUtilGenRsaDelKey(u8 index)
	Function
	

Delete index RSA key
	Params
	in
	index
	out
	Nothing
	

return
	MFSDK_UTIL_RET_
Success
OK
	Others        Failed, Ref. MfSdkUtilRet_E
	remark
	

	demo
	

	                                                                                                         3. MfSdkUtilGenRsaDelAllKey  


Prototype
	

LIB_EXPORT s32 MfSdkUtilGenRsaDelAllKey(void)
	Function
	

Delete all RSA key
	Params
	in
	Nothing
	out
	Nothing
	

return
	MFSDK_UTIL_RET_
Success
OK
	Others        Failed, Ref. MfSdkUtilRet_E
	remark
	

	demo
	

	

  

                                                                                                            4. MfSdkUtilRsaRand


Prototype
	LIB_EXPORT s32 MfSdkUtilRsaRand(void* para, u8* pbuf, u32 len)
	Function
	

For mbedtls rand
	

Params
	

in
	para
	pbuf
	len
	out
	Nothing
	return
	Others        Failed, Ref. MfSdkUtilRet_E
	0        Success
	remark
	

	demo
	

	                                                                                                            5. MfSdkUtilCompress  


Prototype
	LIB_EXPORT s32 MfSdkUtilCompress (u8*dest, u32 *destLen, const u8* source, u32 sourceLen)
	



Function
	Compresses the source buffer into the destination buffer. The level parameter has the same meaning as in deflateInit. sourceLen is the byte length of the source buffer. Upon entry, destLen is the total size of the destination buffer, which must be at least 0.1% larger than sourceLen plus 12 bytes. Upon exit,
destLen is the actual size of the compressed buffer.
	



Params
	

in
	destLen
	source
	sourceLen
	out
	destLen
	dest
	

return
	Others        Failed, Ref. MfSdkUtilRet_E
	MFSDK_UTIL_RET_
Success
OK
	remark
	

	demo
	

	

  

                                                                                                               6. MfSdkUtilCompressBound


Prototype
	

LIB_EXPORT u32 MfSdkUtilCompressBound (u32 sourceLen)
	Function
	

get compress bound
	Params
	in
	sourceLen
	out
	Nothing
	return
	compress bound
value
	remark
	

	demo
	

	                                                                                                               7. MfSdkUtilSave2Zip  


Prototype
	LIB_EXPORT s32 MfSdkUtilSave2Zip(const char *zip_filename, const char *file_name_in_zip, const u8 *data, u32 data_len)
	Function
	

save data to zip file
	



Params
	

in
	zip_filename        zip file name
	file_name_in_zip compress data file name
	data        compress data
	data_len        compress data length
	out
	Nothing
	

return
	Others        Failed, Ref. MfSdkUtilRet_E
	MFSDK_UTIL_RET_
Success
OK
	remark
	

	demo
	

	

                                                                                                                  4. RFID module
                                                                                                                  44. Module description
This module mainly includes NFC APIs.
  

                                                                                                                  45. Module structure declaration
        None.        
                                                                                                                  46. Constant declarations
typedef enum  
{
MFSDK_NFC_RET_MUTILCARD = MFSDK_ICC_RET_MUTILCARD,
// more than one card
MFSDK_NFC_RET_NOCARD = MFSDK_ICC_RET_NOCARD, // dont
find card  
MFSDK_NFC_RET_FAILED = MFSDK_ICC_RET_FAILED, //failed MFSDK_NFC_RET_BOUNDS = MFSDK_ICC_RET_BOUNDS, //Array
out-of-bounds
MFSDK_NFC_RET_PARM_ERROR =
MFSDK_ICC_RET_PARM_ERROR, //check param MFSDK_NFC_RET_OK = 0,
}MfSdkNfcRet_E;


typedef enum
{
MFSDK_NFC_LED_BLUE = 0, MFSDK_NFC_LED_YELLOW, MFSDK_NFC_LED_GREEN, MFSDK_NFC_LED_RED,
}MfSdkNfcLed_E;


typedef enum
{
MFSDK_NFC_LED_OFF = 0,
MFSDK_NFC_LED_ON = 1,
}MfSdkNfcLedSwitch_E;


                                                                                                                  47. MfSdkNfcInit


Prototype
	

LIB_EXPORT s32 MfSdkNfcInit(void)
	Function
	

Initialization of the NFC module.
	Params
	in
	None
	out
	None
	

  



return
	Others        Failed, Ref. MfSdkNfcRet_E
	MFSDK_NFC_RET_
Success
OK
	remark
	

	demo
	

	                                                                                                                  48. MfSdkNfcApdu


Prototype  
	LIB_EXPORT s32 MfSdkNfcApdu(u8 *tbuf, u16 tlen, u8 **rbuf, u16
*rlen)
	Function
	

NFC APDU exchange.
	

Params
	in
	tbuf        apdu request command
	tlen        apdu request command length
	out
	rbuf        eg. unsigned char *pTemp &pTemp
	rlen        pdu response length point
	



return
	MFSDK_NFC_RET_FAIL
Failed, Ref. MfSdkNfcRet_E
ED
	MFSDK_NFC_RET_PAR
Invalid parameters.
M_ERROR
	MFSDK_NFC_ETR_OK Success
	remark
	

	

















demo
	s32 iRet = MFSDK_NFC_RET_FAILED;
u8 *pRApdu = NULL; u16 rApduLength = 0; u8 cApud[] =
{
0x00,0xA4,0x04,0x00,0x0E,0x32,0x50,0x41,
0x59,0x2E,0x53,0x59,0x53,0x2E,0x44,0x44,
0x46,0x30,0x31,0x00
};
iRet = MfSdkNfcApdu(cApud,sizeof(cApud),&pRApdu , &rApduLength); if(MFSDK_NFC_RET_OK == iRet)
{
//Success TODO
}
else
	

  

{  
//Fail
}
                                                                                                                  49. MfSdkNfcClose


Prototype
	

LIB_EXPORT s32 MfSdkNfcClose(void)
	Function
	

Turn off the NFC module.
	Params
	in
	None
	out
	None
	return
	Others        Failed, Ref. MfSdkNfcRet_E
	MFSDK_NFC_RET_OK Success
	remark
	

	demo
	

	                                                                                                                  50. MfSdkNfcCtlsComm  


Prototype
	LIB_EXPORT s32 MfSdkNfcCtlsComm(s32 iCardType,MfSdkIccApdu_T *Apdu)
	Function
	

NFC Ctls command
	

Params
	in
	iCardType
	Apdu
	out
	None
	return
	Others        Failed, Ref. MfSdkNfcRet_E
	MFSDK_NFC_RET_OK Success
	remark
	

	demo
	

	                                                                                                                     51. MfSdkNfcCtlsPowerDown


Prototype
	

LIB_EXPORT s32 MfSdkNfcCtlsPowerDown(void)
	

  

Function
	

NFC Ctls Power Down
	Params
	in
	None
	out
	None
	return
	Others        Failed, Ref. MfSdkNfcRet_E
	MFSDK_NFC_RET_OK Success
	remark
	

	demo
	

	                                                                                                                     52. MfSdkNfcCtlsPowerUpAndSeek  


Prototype
	LIB_EXPORT s32 MfSdkNfcCtlsPowerUpAndSeek(int iCardType, char *psUID)
	Function
	

NFC Ctls Power Up and seek
	

Params
	in
	iCardType
	psUID
	out
	None
	return
	Others        Failed, Ref. MfSdkNfcRet_E
	MFSDK_NFC_RET_OK Success
	remark
	

	demo
	

	                                                                                                                        53. MfSdkNfcDetect


Prototype
	

LIB_EXPORT s32 MfSdkNfcDetect(void)
	Function
	

Check the user whether tap card .
	Params
	in
	None
	out
	None
	



return
	Others        Failed, Ref. MfSdkNfcRet_E
	MFSDK_NFC_RET_NOC
No card
ARD
	MFSDK_NFC_RET_MUTI
multiple card
LCARD
	

  



	MFSDK_NFC_RET_OK Success
	remark
	

	demo
	

	                                                                                                                        54. MfSdkNfcApduStream


Prototype
	LIB_EXPORT s32 MfSdkNfcApduStream(u8 *pC_Apdu, s32 clen, u8 *pR_Apdu, s32 rlen)
	Function
	

Bytes stream apdu command
	

Params
	

in
	pC_Apdu        CAPDU bytes stream
	clen        CAPDU bytes stream length
	rlen        recv buffer size
	out
	pR_Apdu        RAPDU recv buffer
	



return
	Others        Failed, Ref. MfSdkNfcRet_E
	> 0        R_Apdu length
	MFSDK_ICC_RET_PARM_E
params error
RROR
	MFSDK_ICC_RET_BOUNDS rlen < card response length
	remark
	

	demo
	

	                                                                                                                        55. MfSdkNfcGetUid  


Prototype
	

LIB_EXPORT s32 MfSdkNfcGetUid(u8* uid)
	Function
	

Get card UID
	Params
	in
	uid
	out
	None
	return
	Others        Failed, Ref. MfSdkNfcRet_E
	> 0        uid length
	remark
	

	demo
	

	

  

                                                                                                                           56. MfSdkNfcIsProbe


Prototype
	

LIB_EXPORT s32 MfSdkNfcIsProbe(void)
	Function
	

Check whether the NFC card is detected
	Params
	in
	None
	out
	None
	return
	Others        Failed, Ref. MfSdkNfcRet_E
	1        Success
	remark
	

	demo
	

	                                                                                                                           57. MfSdkNfcM1Atqa  


Prototype
	

LIB_EXPORT s32 MfSdkNfcM1Atqa(void)
	Function
	

	Params
	in
	None
	out
	None
	

return
	Others        Failed, Ref. MfSdkNfcRet_E
	MFSDK_NFC_RET_
Success
OK
	remark
	

	demo
	

	                                                                                                                              58. MfSdkNfcM1Auth


Prototype
	

LIB_EXPORT s32 MfSdkNfcM1Auth(s32 cmd, s32 block)
	Function
	

	Params
	in
	cmd
	

  



	

	block
	out
	None
	

return
	Others        Failed, Ref. MfSdkNfcRet_E
	MFSDK_NFC_RET_
Success
OK
	remark
	

	demo
	

	                                                                                                                              59. MfSdkNfcM1Close  


Prototype
	

LIB_EXPORT s32 MfSdkNfcM1Close(void)
	Function
	

	Params
	in
	None
	out
	None
	

return
	Others        Failed, Ref. MfSdkNfcRet_E
	MFSDK_NFC_RET_
Success
OK
	remark
	

	demo
	

	                                                                                                                                 60. MfSdkNfcM1Decrement


Prototype
	

LIB_EXPORT s32 MfSdkNfcM1Decrement(s32 block, s32 operand)
	Function
	

	

Params
	in
	block
	operand
	out
	None
	

return
	Others        Failed, Ref. MfSdkNfcRet_E
	MFSDK_NFC_RET_
Success
OK
	remark
	

	demo
	

	

  

                                                                                                                                 61. MfSdkNfcM1Increment


Prototype
	

LIB_EXPORT s32 MfSdkNfcM1Increment(s32 block, s32 operand)
	Function
	

	

Params
	in
	block
	operand
	out
	None
	

return
	Others        Failed, Ref. MfSdkNfcRet_E
	MFSDK_NFC_RET_
Success
OK
	remark
	

	demo
	

	                                                                                                                                 62. MfSdkNfcM1Open  


Prototype
	

LIB_EXPORT s32 MfSdkNfcM1Open(void)
	Function
	

M1 open
	Params
	in
	None
	out
	None
	

return
	Others        Failed, Ref. MfSdkNfcRet_E
	MFSDK_NFC_RET_
Success
OK
	remark
	

	demo
	

	                                                                                                                                    63. MfSdkNfcM1Read




Prototype        LIB_EXPORT s32 MfSdkNfcM1Read(s32 block, u8* buf, s32 *len)  
  

Function
	

	

Params
	in
	block
	len
	out
	buf
	

return
	Others        Failed, Ref. MfSdkNfcRet_E
	MFSDK_NFC_RET_
Success
OK
	remark
	

	demo
	

	                                                                                                                                    64. MfSdkNfcM1Restore  


Prototype
	

LIB_EXPORT s32 MfSdkNfcM1Restore(s32 block)
	Function
	

	Params
	in
	block
	out
	None
	

return
	Others        Failed, Ref. MfSdkNfcRet_E
	MFSDK_NFC_RET_
Success
OK
	remark
	

	demo
	

	                                                                                                                                       65. MfSdkNfcM1SetKey


Prototype
	

LIB_EXPORT s32 MfSdkNfcM1SetKey(u8 *key)
	Function
	

	Params
	in
	key
	out
	None
	

return
	Others        Failed, Ref. MfSdkNfcRet_E
	MFSDK_NFC_RET_
Success
OK
	

  

remark
	

	demo
	

	                                                                                                                                       66. MfSdkNfcM1Transfer


Prototype
	

LIB_EXPORT s32 MfSdkNfcM1Transfer(s32 block)
	Function
	

	Params
	in
	block
	out
	None
	

return
	Others        Failed, Ref. MfSdkNfcRet_E
	MFSDK_NFC_RET_
Success
OK
	remark
	

	demo
	

	                                                                                                                                       67. MfSdkNfcM1Uid  


Prototype
	

LIB_EXPORT s32 MfSdkNfcM1Uid(u8 *uid)
	Function
	

	Params
	in
	uid
	out
	None
	

return
	Others        Failed, Ref. MfSdkNfcRet_E
	MFSDK_NFC_RET_
Success
OK
	remark
	

	demo
	

	                                                                                                                                          68. MfSdkNfcM1Write




Prototype        LIB_EXPORT s32 MfSdkNfcM1Write(s32 block, u8 *buf, s32 len)  
  

Function
	

	

Params
	

in
	block
	buf
	len
	out
	None
	

return
	Others        Failed, Ref. MfSdkNfcRet_E
	MFSDK_NFC_RET_
Success
OK
	remark
	

	demo
	

	                                                                                                                                          69. MfSdkNfcOpen  


Prototype
	

LIB_EXPORT s32 MfSdkNfcOpen(void)
	Function
	

NFC open
	Params
	in
	None
	out
	None
	

return
	Others        Failed, Ref. MfSdkNfcRet_E
	MFSDK_NFC_RET_
Success
OK
	remark
	

	demo
	

	                                                                                                                                             70. MfSdkNfcReset


Prototype
	

LIB_EXPORT s32 MfSdkNfcReset(u8* pAtr, s32 iAtrLength)
	Function
	

NFC Reset
	

Params
	in
	pAtr
	iAtrLength
	out
	None
	return
	Others        Failed, Ref. MfSdkNfcRet_E
	

  



	MFSDK_NFC_RET_
Success
OK
	remark
	

	demo
	

	                                                                                                                                             71. MfSdkNfcTagEmulateInitSetData


Prototype
	s32 MfSdkNfcTagEmulateInitSetData(s8* data, s32 inDataLen, s8* code)
	Function
	

ntag set data initialization
	

Params
	in
	data        data
	inDataLen        data len
	code        data encoding format(example "utf-8")
	out
	None
	

return
	Others        Failed, Ref. MfSdkNfcRet_E
	MFSDK_NFC_RET_
Success
OK
	remark
	

	demo
	

	                                                                                                                                             72. MfSdkNfcTagEmulateInitSetUrl  


Prototype
	

s32 MfSdkNfcTagEmulateInitSetUrl(u8* url)
	Function
	

ntag set url initialization
	Params
	in
	url        set url
	out
	None
	

return
	Others        Failed, Ref. MfSdkNfcRet_E
	MFSDK_NFC_RET_
Success
OK
	remark
	

	demo
	

	

  

                                                                                                                                                73. MfSdkNfcTagEmulateProcess


Prototype
	

void MfSdkNfcTagEmulateProcess(void)
	Function
	

ntag execution processing
	Params
	in
	None
	out
	None
	return
	None
	remark
	

	demo
	

	



                                                                                                                                                74. MfSdkNfcTagEmulateDeinit  


Prototype
	

s32 MfSdkNfcTagEmulateDeinit(void)
	Function
	

ntag deinitialization
	Params
	in
	None
	out
	None
	return
	MFSDK_NFC_RET_
Success
OK
	remark
	

	demo
	

	                                                                                                                                                   75. MfSdkNfcLed


Prototype
	LIB_EXPORT void MfSdkNfcLed(MfSdkNfcLed_E num, MfSdkNfcLedSwitch_E type)
	Function
	

led control
	Params
	in
	num        led color, Ref. MfSdkNfcLed_E
	type        switch type, Ref. MfSdkNfcLedSwitch_E
	

  



	out
	None
	return
	None
	remark
	

	demo
	

	                                                                                                                                                   76. MfSdkNfcIsAroundFrontLcd


Prototype
	

LIB_EXPORT MFSDKBOOL MfSdkNfcIsAroundFrontLcd(void)
	Function
	

Check whether the NFC antenna is around the LCD
	Params
	in
	None
	out
	None
	return
	MFSDK_TRUE        nfc antenna around lcd
	remark
	

	demo
	

	



                                                                                                                                                   5. Magstripe module  
                                                                                                                                                      77. Module description
This module mainly includes Magstripe Card APIs.


                                                                                                                                                      78. Module structure declaration
None.
                                                                                                                                                      79. Constant declarations
typedef enum
{
MFSDK_MAG_RET_FAILED = -3, //failed MFSDK_MAG_RET_BOUNDS = -2, //Array out-of-bounds MFSDK_MAG_RET_PARM_ERROR = -1, //check param MFSDK_MAG_RET_OK = 0,  
}MfSdkMagRet_E;
  

                                                                                                                                                      80. MfSdkMagStripeDetect


Prototype
	LIB_EXPORT s32 MfSdkMagStripeDetect(MfSdkMagTraceInfo_T
*trackinfo)
	Function
	

Magstripe Card Detect
	Params
	in
	trackinfo
	out
	None
	

return
	Others        Failed, Ref. MfSdkMagRet_E
	MFSDK_MAG_RET
Success
_OK
	remark
	

	demo
	

	                                                                                                                                                      81. MfSdkMagtekClose  


Prototype
	

LIB_EXPORT void MfSdkMagtekClose(void)
	Function
	

	Params
	in
	None
	out
	None
	return
	None
	remark
	

	demo
	

	                                                                                                                                                         82. MfSdkMagTekFlush


Prototype
	

LIB_EXPORT s32 MfSdkMagTekFlush(void)
	Function
	

	Params
	in
	None
	out
	None
	

  



return
	Others        Failed, Ref. MfSdkMagRet_E
	MFSDK_MAG_RET
Success
_OK
	remark
	

	demo
	

	                                                                                                                                                         83. MfSdkMagtekOpen


Prototype
	

LIB_EXPORT void MfSdkMagtekOpen(void)
	Function
	

	Params
	in
	None
	out
	None
	return
	None
	remark
	

	demo
	

	

                                                                                                                                                         6. ICC module  
                                                                                                                                                            84. Module description
This module mainly includes ICC APIs.


                                                                                                                                                            85. Module structure declaration
None.




                                                                                                                                                            86. Constant declarations
typedef enum  
{
MFSDK_ICC_SLOT_MIN = 0,
MFSDK_ICC_SLOT_NFC = MFSDK_ICC_SLOT_MIN, //rfid
MFSDK_ICC_SLOT_NFC_EXTERN , //rfid extern MFSDK_ICC_SLOT_ICC, //contact ic card slot MFSDK_ICC_SLOT_ICC_EXTERN, //contact ic card slot extern MFSDK_ICC_SLOT_PSAM1,  
  

MFSDK_ICC_SLOT_PSAM2, MFSDK_ICC_SLOT_PSAM3, MFSDK_ICC_SLOT_PSAM4, MFSDK_ICC_SLOT_PSAM5, MFSDK_ICC_SLOT_PSAM6, MFSDK_ICC_SLOT_MAX    
}MfSdkIccSlot_E;


typedef enum
{
MFSDK_ICC_RET_MUTILCARD = -5, // more than one card MFSDK_ICC_RET_NOCARD = -4, // dont find card MFSDK_ICC_RET_FAILED = -3, //failed MFSDK_ICC_RET_BOUNDS = -2, //Array out-of-bounds MFSDK_ICC_RET_PARM_ERROR = -1, //check param MFSDK_ICC_RET_OK = 0,  
}MfSdkIccRet_E;


typedef enum
{
MFSDK_ICC_TYPE_CPUCARD = 0,


}MfSdkIccType_E;


                                                                                                                                                            87. MfSdkIccClose


Prototype
	

LIB_EXPORT s32 MfSdkIccClose(MfSdkIccSlot_E iSlotType)
	Function
	

	Params
	in
	iSlotType        Ref. MfSdkIccSlot_E
	out
	None
	

return
	MFSDK_ICC_RET_
Success
OK
	Other        Fail
	remark
	

	demo
	

	

  

                                                                                                                                                            88. MfSdkIccComm


Prototype
	LIB_EXPORT s32 MfSdkIccComm(s32 iCardType,MfSdkIccSlot_E iSlotType, MfSdkIccApdu_T *Apdu)
	Function
	

	

Params
	

in
	iCardType        Ref. MfSdkIccType_E
	iSlotType        Ref. MfSdkIccSlot_E
	Apdu
	out
	None
	return
	Ref. MfSdkIccRet_E
	remark
	

	demo
	

	                                                                                                                                                            89. MfSdkIccGetCardATR  


Prototype
	LIB_EXPORT s32 MfSdkIccGetCardATR(s32 iCardType, MfSdkIccSlot_E iSlotType, u8 *psATR, s32*pnATRLen)
	Function
	

	



Params
	

in
	iCardType        Ref. MfSdkIccType_E
	iSlotType        Ref. MfSdkIccSlot_E
	psATR
	pnATRLen
	out
	None
	return
	Ref. MfSdkIccRet_E
	remark
	

	demo
	

	                                                                                                                                                               90. MfSdkIccGetCardStatus




LIB_EXPORT s32 MfSdkIccGetCardStatus(MfSdkIccSlot_E iSlotType)    
  

Function
	

	Params
	in
	iSlotType        Ref. MfSdkIccSlot_E
	out
	None
	return
	Ref. MfSdkIccRet_E
	remark
	

	demo
	

	                                                                                                                                                               91. MfSdkIccGetModuleVer  


Prototype
	

LIB_EXPORT s32 MfSdkIccGetModuleVer(u8 *pszVer)
	Function
	

get module version
	Params
	in
	None
	out
	pszVer        Icc Module Version
	return
	Ref. MfSdkIccRet_E
	remark
	

	demo
	

	                                                                                                                                                                  92. MfSdkIccInsertDetect


Prototype
	

LIB_EXPORT s32 MfSdkIccInsertDetect(void)
	Function
	

	Params
	in
	None
	out
	None
	return
	Ref. MfSdkIccRet_E
	remark
	

	demo
	

	

  

                                                                                                                                                                  93. MfSdkIccApdu


Prototype
	LIB_EXPORT s32 MfSdkIccApdu(MfSdkIccSlot_E iSlotType, u8* pC_Apdu, s32 cLength,u8* pR_Apdu,s32 rLength)
	Function
	

apdu bytes stream
	



Params
	

in
	iSlotType        Ref. MfSdkIccSlot_E
	pC_Apdu        bytes stream
	cLength
	rLength
	out
	pR_Apdu
	



return
	> 0        R_Apdu length
	MFSDK_ICC_RET_PARM_
params error
ERROR
	MFSDK_ICC_RET_BOUND
rLength < card response length
S
	remark
	

	demo
	

	                                                                                                                                                                  94. MfSdkIccOpen  


Prototype
	

LIB_EXPORT s32 MfSdkIccOpen(MfSdkIccSlot_E iSlotType)
	Function
	

	Params
	in
	iSlotType        Ref. MfSdkIccSlot_E
	out
	None
	return
	Ref. MfSdkIccRet_E
	remark
	

	demo
	

	                                                                                                                                                                     95. MfSdkIccPowerOff




LIB_EXPORT s32 MfSdkIccPowerOff(s32 iCardType, MfSdkIccSlot_E iSlotType)    
  

Function
	

	

Params
	in
	iCardType        Ref. MfSdkIccType_E
	iSlotType        Ref. MfSdkIccSlot_E
	out
	None
	return
	Ref. MfSdkIccRet_E
	remark
	

	demo
	

	                                                                                                                                                                     96. MfSdkIccPowerUp  


Prototype
	LIB_EXPORT s32 MfSdkIccPowerUp(s32 iCardType, MfSdkIccSlot_E iSlotType ,u8 *atrstr,s32 buflen)
	Function
	

	

Params
	

in
	iCardType        Ref. MfSdkIccType_E
	iSlotType        Ref. MfSdkIccSlot_E
	buflen
	out
	atrstr
	return
	Ref. MfSdkIccRet_E
	remark
	

	demo
	

	                                                                                                                                                                        97. MfSdkIccPowerOn


Prototype
	LIB_EXPORT s32 MfSdkIccPowerOn(s32 iCardType, MfSdkIccSlot_E iSlotType)
	Function
	

	

Params
	in
	iCardType        Ref. MfSdkIccType_E
	iSlotType        Ref. MfSdkIccSlot_E
	out
	None
	return
	Ref. MfSdkIccRet_E
	remark
	

	demo
	

	

                                                                                                                                                                        7.   GUI module
                                                                                                                                                                           98. Module description
This module mainly includes UI APIs.


                                                                                                                                                                           99. Module structure declaration
//MfSdkGuiInputPage Parameters typedef struct  
{
s8* title; //[in] Title displayed in the middle of the first line s8* msgPrompt; //[in] Prompt information
s8* str; //[out] input data string  
s32 disp_mode; //[in] 0:digit input, 1:character input, 2:password input s32 disp_line; //[in] the number of rows Prompt displayed
s32 input_line; //[in] the number of rows inputs displayed
s32 disp_pattern; //[in] Prompt display position, 0 left alignment, 1 center; 2 right alignment
s32 input_pattern; //[in] inputs display position, 0 left alignment, 1 center; 2 right alignment
s32 min; //[in] minimum input length s32 max; //[in] maximum input length
s32 timeout; //[in] waiting for input timeout time (seconds)
void (*extra_paint_func)(void *extra_param); //[in] extra painting function on input page
void* extra_param; //[in] parameter of extra_paint_func
}MfSdkGuinputPageParam_T;


                                                                                                                                                                           100. Constant declarations
  

                                                                                                                                                                           101. MfSdkGuiLedAmount


Prototype
	

LIB_EXPORT void MfSdkGuiLedAmount(char *msg)
	Function
	

Set Amount display
	Params
	in
	msg        text amount eg. 0.00/1.00
	out
	None
	

  

return
	Nothing
	remark
	

	demo
	MfSdkGuiLedAmount("0.00");  //show amount on code break screen
	                                                                                                                                                                           102. MfSdkGuiLedCounter


Prototype
	

LIB_EXPORT void MfSdkGuiLedCounter(char *msg)
	Function
	

Show Counter display
	Params
	in
	msg        3 bytes ascii digit eg. "0"-"999"
	out
	None
	return
	Nothing
	remark
	

	demo
	MfSdkGuiLedCounter(“0”);
	                                                                                                                                                                           103. MfSdkGuiLedTime  


Prototype
	

LIB_EXPORT void MfSdkGuiLedTime(char *msg)
	Function
	

	Params
	in
	msg        HHMM eg. "09:00"
	out
	None
	return
	Nothing
	remark
	

	demo
	MfSdkGuiLedTime(“09:00”);
	                                                                                                                                                                              104. MfSdkGuiLedDigitShow


Prototype
	

LIB_EXPORT void MfSdkGuiLedDigitShow(char *digit_str)
	Function
	

Segment code
	

  

Params
	in
	digit_str
	out
	None
	return
	MFSDK_RET_OK Success
	remark
	

	demo
	

	                                                                                                                                                                              105. MfSdkGuiBeginBatchPaint


Prototype
	

LIB_EXPORT void MfSdkGuiBeginBatchPaint()
	Function
	

Batch refresh starts
	Params
	in
	None
	out
	None
	return
	Nothing
	remark
	

	

demo
	MfSdkGuiBeginBatchPaint(); MfSdkGuiClearDc();
//painting  APIs
MfSdkGuiEndBatchPaint();
	                                                                                                                                                                              106. MfSdkGuiEndBatchPaint  


Prototype
	

LIB_EXPORT void MfSdkGuiEndBatchPaint()
	Function
	

End of batch refresh
	Params
	in
	None
	out
	None
	return
	Nothing
	remark
	

	

demo
	MfSdkGuiBeginBatchPaint(); MfSdkGuiClearDc();
//painting  APIs
MfSdkGuiEndBatchPaint();
	

  

                                                                                                                                                                                 107. MfSdkGuiSetColor


Prototype
	

LIB_EXPORT void MfSdkGuiSetColor(s32 color)
	Function
	

Set the foreground color
	Params
	in
	color        the foreground color
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                 108. MfSdkGuiGetColor  


Prototype
	

LIB_EXPORT s32 MfSdkGuiGetColor()
	Function
	

Get the foreground color
	Params
	in
	None
	out
	None
	return
	>= 0        success, the foreground color
	Other        failure
	remark
	

	demo
	s32 foreground_color = MfSdkGuiGetColor();
	                                                                                                                                                                                    109. MfSdkGuiSetBgColor


Prototype
	

LIB_EXPORT void MfSdkGuiSetBgColor(s32 color)
	Function
	

Set the background color
	Params
	in
	color        the background color
	out
	None
	return
	Nothing
	

  

remark
	

	demo
	

	                                                                                                                                                                                    110. MfSdkGuiGetBgColor


Prototype
	

LIB_EXPORT s32 MfSdkGuiGetBgColor()
	Function
	

Get the background color
	Params
	in
	None
	out
	None
	return
	>= 0        success, the background color
	Other        failure
	remark
	

	demo
	s32 background_color = MfSdkGuiGetBgColor();
	                                                                                                                                                                                    111. MfSdkGuiSetFullScreen  


Prototype
	

LIB_EXPORT void MfSdkGuiSetFullScreen(s32 full)
	Function
	

Set to full screen display
	Params
	in
	full        is full screen display(1 - Yes, 0 - No)
	out
	None
	return
	Nothing
	remark
	

	demo
	MfSdkGuiSetFullScreen(1); //set full screen
	                                                                                                                                                                                       112. MfSdkGuiPixel


Prototype
	

LIB_EXPORT s32 MfSdkGuiPixel(s32 x, s32 y)
	Function
	

Draw a point
	

  



Params
	in
	x
	horizontal coordinate
	y
	vertical coordinate
	out
	None
	return
	0
	success
	Other
	failure
	remark
	

	



demo
	s32 ret;




MfSdkGuiBeginBatchPaint(); MfSdkGuiClearDc();
ret = MfSdkGuiPixel(5 , 5); //draw a point at (5, 5)
MfSdkGuiEndBatchPaint();
	                                                                                                                                                                                       113. MfSdkGuiLineTo  


Prototype
	

LIB_EXPORT s32 MfSdkGuiLineTo(s32 x, s32 y)
	Function
	

Draw a line
	

Params
	in
	x
	horizontal coordinate
	y
	vertical coordinate
	out
	None
	return
	0
	success
	Other
	failure
	remark
	

	demo
	

	                                                                                                                                                                                          114. MfSdkGuiBarRc


Prototype
	LIB_EXPORT void MfSdkGuiBarRc(s32 left, s32 top, s32 right, s32 bottom)
	Function
	

Gui filled area
	

Params
	

in
	left
	left border
	top
	upper boundary
	right
	right border
	bottom
	lower boundary
	

  



	out
	None
	return
	Nothing
	remark
	

	

demo
	MfSdkGuiBeginBatchPaint(); MfSdkGuiClearDc(); MfSdkGuiBarRc(5, 5, 10, 10);
MfSdkGuiEndBatchPaint();
	                                                                                                                                                                                          115. MfSdkGuiSetBarColor


Prototype
	

LIB_EXPORT void MfSdkGuiSetBarColor(s32 color)
	Function
	

Set the fill color
	Params
	in
	color        fill color(format 0x00RRGGBB)
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                          116. MfSdkGuiGetBarColor  


Prototype
	

LIB_EXPORT s32 MfSdkGuiGetBarColor()
	Function
	

Get the fill color
	Params
	in
	None
	out
	None
	return
	>=0        success, the fill color
	Other        failure
	remark
	

	demo
	s32 barColor = MfSdkGuiGetBarColor();
	

  

                                                                                                                                                                                             117. MfSdkGuiSetFont


Prototype
	

LIB_EXPORT void MfSdkGuiSetFont(s32 font)
	Function
	

Set display font
	Params
	in
	font        font(0: 12 lattice, 1: 16 lattice)
	out
	None
	return
	Nothing
	remark
	

	demo
	MfSdkGuiSetFont(0); //set to 12 lattice font
	                                                                                                                                                                                             118. MfSdkGuiGetFont  


Prototype
	

LIB_EXPORT s32 MfSdkGuiGetFont()
	Function
	

Get display font
	Params
	in
	None
	out
	None
	return
	>=0        success, the display font
	Other        failure
	remark
	

	demo
	s32 font = MfSdkGuiGetFont();
	                                                                                                                                                                                                119. MfSdkGuiSetTextColor


Prototype
	

LIB_EXPORT void MfSdkGuiSetTextColor(s32 color)
	Function
	

Set text color
	Params
	in
	color        text color
	out
	None
	return
	Nothing
	

  

remark
	

	demo
	

	                                                                                                                                                                                                120. MfSdkGuiGetTextColor


Prototype
	

LIB_EXPORT s32 MfSdkGuiGetTextColor()
	Function
	

Get text color
	Params
	in
	None
	out
	None
	return
	>=0        success, the text color
	Other        failure
	remark
	

	demo
	s32 textColor = MfSdkGuiGetTextColor();
	                                                                                                                                                                                                121. MfSdkGuiSetTextBgColor  


Prototype
	

LIB_EXPORT void MfSdkGuiSetTextBgColor(s32 color)
	Function
	

Set the text background color
	Params
	in
	color        text background color
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                   122. MfSdkGuiGetTextBgColor


Prototype
	

LIB_EXPORT s32 MfSdkGuiGetTextBgColor()
	Function
	

Get the text background color
	

  

Params
	in
	None
	out
	None
	return
	>=0        success, the text background color
	Other        failure
	remark
	

	demo
	s32 textBgColor = MfSdkGuiGetTextBgColor();
	                                                                                                                                                                                                   123. MfSdkGuiClearDc


Prototype
	

LIB_EXPORT void MfSdkGuiClearDc()
	Function
	

Clear screen display
	Params
	in
	None
	out
	None
	return
	Nothing
	remark
	

	

demo
	MfSdkGuiBeginBatchPaint(); MfSdkGuiClearDc();
//painting  APIs
MfSdkGuiEndBatchPaint();
	                                                                                                                                                                                                   124. MfSdkGuiSetTextZoom  


Prototype
	

LIB_EXPORT void MfSdkGuiSetTextZoom(s32 size)
	Function
	

Set text magnification
	Params
	in
	size        multiple, the default value is 2
	out
	None
	return
	Nothing
	remark
	

	demo
	MfSdkGuiSetTextZoom(4);
	

  

                                                                                                                                                                                                      125. MfSdkGuiGetTextZoom


Prototype
	

LIB_EXPORT s32 MfSdkGuiGetTextZoom()
	Function
	

Get text magnification
	Params
	in
	None
	out
	None
	return
	>=0        success, the text magnification
	Other        failure
	remark
	

	demo
	s32 textZoom = MfSdkGuiGetTextZoom();
	                                                                                                                                                                                                      126. MfSdkGuiSetPixel  


Prototype
	

LIB_EXPORT s32 MfSdkGuiSetPixel(s32 x, s32 y, s32 color)
	Function
	

Draw a point with color
	

Params
	

in
	x        horizontal coordinate
	y        vertical coordinate
	color        point color
	out
	None
	return
	0        success
	Other        failure
	remark
	

	demo
	

	                                                                                                                                                                                                         127. MfSdkGuiGetPixel


Prototype
	

LIB_EXPORT s32 MfSdkGuiGetPixel(s32 x, s32 y)
	Function
	

Get the color of the point on the screen
	

  



Params
	in
	x
	horizontal coordinate
	y
	vertical coordinate
	out
	None
	return
	>=0
	success, point color
	Other
	failure
	remark
	

	demo
	s32 pixelColor = MfSdkGuiGetPixel(5, 5); //get the color of point (5, 5)
	                                                                                                                                                                                                         128. MfSdkGuiTextOut  


Prototype
	

LIB_EXPORT s32 MfSdkGuiTextOut(s32 x, s32 y, char * text)
	Function
	

Display text on the screen ,Show only English
	

Params
	

in
	x
	horizontal coordinate
	y
	vertical coordinate
	text
	text content
	out
	None
	return
	0
	success
	Other
	failure
	remark
	

	



demo
	s32 ret = -1; MfSdkGuiBeginBatchPaint(); MfSdkGuiClearDc();
ret = MfSdkGuiTextOut(5, 5, “morefun”);
MfSdkGuiEndBatchPaint();
	                                                                                                                                                                                                            129. MfSdkGuiGetTextWidth


Prototype
	

LIB_EXPORT s32 MfSdkGuiGetTextWidth(char *text)
	Function
	

Get the display width of the text
	Params
	in
	text        text content
	out
	None
	return
	>=0        success, the text width
	

  



	Other        failure
	remark
	

	demo
	s32 textWidth = MfSdkGuiGetTextWidth(“morefun”);
	                                                                                                                                                                                                            130. MfSdkGuiGetTextHeight


Prototype
	

LIB_EXPORT s32 MfSdkGuiGetTextHeight(char *text)
	Function
	

Get the display height of the text
	Params
	in
	text        text content
	out
	None
	return
	>=0        success, the text height
	Other        failure
	remark
	

	demo
	s32 textHeight = MfSdkGuiGetTextHeight(“morefun”);
	                                                                                                                                                                                                            131. MfSdkGuiCline  


Prototype
	LIB_EXPORT void MfSdkGuiCline(s32 x1, s32 y1, s32 x2, s32 y2, s32 color)
	Function
	

Draw a line
	





Params
	



in
	x1        point1 X coordinate
	x2        point2 X coordinate
	y1        point1 Y coordinate
	y2        point2 Y coordinate
	color        color of the line
	out
	None
	return
	Nothing
	remark
	

	demo
	

	

  

                                                                                                                                                                                                               132. MfSdkGuiGetWidth


Prototype
	

LIB_EXPORT s32 MfSdkGuiGetWidth(void)
	Function
	

Get screen width
	Params
	in
	None
	out
	None
	return
	>=0        success, the screen width
	Other        failure
	remark
	

	demo
	s32 width = MfSdkGuiGetWidth();
	                                                                                                                                                                                                               133. MfSdkGuiGetHeight  


Prototype
	

LIB_EXPORT s32 MfSdkGuiGetHeight(void)
	Function
	

Get screen height
	Params
	in
	None
	out
	None
	return
	>=0        success, the screen height
	Other        failure
	remark
	

	demo
	s32 height = MfSdkGuiGetHeight();
	                                                                                                                                                                                                                  134. MfSdkGuiPageOpPaint


Prototype
	LIB_EXPORT void MfSdkGuiPageOpPaint(char * left_str, char * right_str)
	Function
	

Bottom options painting
	Params
	in
	left_str        The character displayed in the lower left corner
	right_str        The character displayed in the lower right corner
	

  



	out
	None
	return
	Nothing
	remark
	

	

demo
	MfSdkGuiBeginBatchPaint(); MfSdkGuiClearDc(); MfSdkGuiPageOpPaint(“Cancel”, “OK”);
MfSdkGuiEndBatchPaint();
	                                                                                                                                                                                                                  135. MfSdkGuiImeSetMode


Prototype
	LIB_EXPORT s32 MfSdkGuiImeSetMode(s32 def_mode, s32 allow_mode, s32 password)
	Function
	

Set input method parameters
	

Params
	

in
	def_mode        Default input method
	allow_mode        Support input method
	password        enter password
	out
	None
	return
	0        success
	Other        failure
	remark
	

	demo
	

	                                                                                                                                                                                                                  136. MfSdkGuiImeStartInput  


Prototype
	LIB_EXPORT s32 MfSdkGuiImeStartInput(char * buffer, s32 max, char * help)
	Function
	

Open the input method page
	

Params
	

in
	buffer        Input buffer
	max        Maximum input character
	help        Enter page title
	out
	None
	return
	0        success, the text length
	Other        failure
	remark
	ONLY for H9G,H9L
	

  

demo  


                                                                                                                                                                                                                     137. MfSdkGuiMainMenuFuncAdd


Prototype
	

LIB_EXPORT s32 MfSdkGuiMainMenuFuncAdd(void * pfunc)
	Function
	

Add menu handler
	Params
	in
	pfunc        menu handler
	out
	None
	return
	0        success
	Other        failure
	remark
	

	demo
	

	                                                                                                                                                                                                                     138. MfSdkGuiMainMenuFuncDel  


Prototype
	

LIB_EXPORT s32 MfSdkGuiMainMenuFuncDel(void * pfunc)
	Function
	

Del menu handler
	Params
	in
	pfunc        menu handler
	out
	None
	return
	0        success
	Other        failure
	remark
	

	demo
	

	                                                                                                                                                                                                                        139. MfSdkGuiMainMenuShow


Prototype
	LIB_EXPORT void MfSdkGuiMainMenuShow(char *id , s32 timeover)
	Function
	

Display menu
	

  



Params
	in
	id        menu id
	timeover        overtime time
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                        140. MfSdkGuiPostMessage


Prototype
	LIB_EXPORT u32 MfSdkGuiPostMessage(u32        msg_id, u32 wparam, u32 lparam)
	Function
	

Send a message
	

Params
	

in
	msg_id
	message id
	wparam
	parameter 1
	lparam
	parameter 2
	out
	None
	return
	0
	success
	Other
	failure
	remark
	

	demo
	MfSdkGuiPostMessage(MFSDK_GUI_GUIPAINT, 0, 0);
	                                                                                                                                                                                                                        141. MfSdkGuiGetMessage  


Prototype
	LIB_EXPORT u32 MfSdkGuiGetMessage(        MfSdkGuiMsg_T * pmsg , s32 timeover)
	Function
	

Recv a message
	

Params
	in
	pmsg
	message structure
	timeover
	overtime time
	out
	None
	return
	0
	success
	Other
	failure
	remark
	

	demo
	MfSdkGuiMsg_T  pmsg;
if(MfSdkGuiGetMessage(&pmsg, 100) == 0)
	

  

{  
//TODO
}


                                                                                                                                                                                                                           142. MfSdkGuiProcDefaultMsg


Prototype
	LIB_EXPORT s32 MfSdkGuiProcDefaultMsg( MfSdkGuiMsg_T * pmsg )
	Function
	

Let the system process the default message
	Params
	in
	pmsg        message structure
	out
	None
	return
	0        success
	Other        failure
	remark
	

	demo
	

	                                                                                                                                                                                                                           143. MfSdkGuiMessageBoxShow  


Prototype
	LIB_EXPORT s32 MfSdkGuiMessageBoxShow(char *title, char
*msg , char* pszLeftOp, char* pszRightOp , s32 timeover)
	Function
	

Display dialog
	





Params
	



in
	title
	message title
	msg
	message content
	pszLeftOp
	bottom left corner
	pszRightOp
	tip in the lower right corner
	timeover
	overtime time
	out
	None
	

return
	1
	Confirm return
	2
	Cancel back
	3
	Timeout
	Other
	failure
	remark
	

	

demo
	int ret = -1;
ret = MfSdkGuiMessageBoxShow(“Tips”, “Success” , “Cancel”, “Confirm” , “30 * 1000”);
	

  

                                                                                                                                                                                                                              144. MfSdkGuiLoadBmpEx


Prototype
	LIB_EXPORT char *MfSdkGuiLoadBmpEx(char * filename, int
*width, int *height, int * color)
	Function
	

Load bmp into memory
	

Params
	in
	filename
	image name
	

out
	width
	image width
	height
	image height
	color
	image color
	

return
	!=0
	success,Image content array, which needs to
be released after use
	0
	failure
	remark
	

	







demo
	#define LOGOBMP “data\\logo.bmp”




char *pbmp = NULL; int logowidth = 0;
int logoheight = 0; int logocolor = 0;


pbmp = MfSdkGuiLoadBmpEx(LOGOBMP, &logowidth, &logoheight, &logocolor);
	                                                                                                                                                                                                                              145. MfSdkGuiLoadBmp  


Prototype
	LIB_EXPORT char *MfSdkGuiLoadBmp(char * filename, s32
*width, s32 *height)
	Function
	

Load bmp into memory
	

Params
	in
	filename
	image name
	out
	width
	image width
	height
	image height
	

return
	!=0
	success,Image content array, which needs to
be released after use
	0
	failure
	remark
	

	



#define LOGOBMP “data\\logo.bmp”  




demo
________________
char *pbmp = NULL; int logowidth = 0;
int logoheight = 0;




pbmp = MfSdkGuiLoadBmp(LOGOBMP, &logowidth, &logoheight);//bmp only black and white
                                                                                                                                                                                                                                 146.   MfSdkGuiBmpFree  


Prototype
	

LIB_EXPORT void MfSdkGuiBmpFree(char * pbmp)
	Function
	

Free memory of bmp
	Params
	in
	pbmp        image content array
	out
	None
	return
	Nothing
	remark
	

	demo
	MfSdkGuiBmpFree(pbmp);
	                                                                                                                                                                                                                                    147. MfSdkGuiOutBits


Prototype
	LIB_EXPORT void MfSdkGuiOutBits(s32 x, s32 y, unsigned char
*pbits, s32 width , s32 height, s32 mode)
	Function
	

Display image
	





Params
	





in
	x
	horizontal coordinate
	y
	vertical coordinate
	pbits
	image data
	width
	image width
	height
	image height
	mode
	display mode(0 - Positive, 1 - Reverse)
	out
	None
	return
	Nothing
	remark
	

	demo
	#define LOGOBMP “data\\logo.bmp”
	

  





s8 *pbmp = NULL; s32 logowidth = 0; s32 logoheight = 0;  


pbmp = MfSdkGuiLoadBmp(LOGOBMP, &logowidth, &logoheight); if(pbmp)
{
s32 logotop = (MfSdkGuiGetHeight() - logoheight)/2; s32 logoleft = (MfSdkGuiGetWidth() - logowidth)/2; MfSdkGuiBeginBatchPaint();
MfSdkGuiClearDc();
MfSdkGuiOutBits(logoleft, logotop , pbmp, logowidth , logoheight, 0); //show logo at the center of the screen
MfSdkGuiEndBatchPaint();
}


                                                                                                                                                                                                                                    148. MfSdkGuiOutBitsEx


Prototype
	LIB_EXPORT void MfSdkGuiOutBitsEx(s32 x, s32 y, unsigned char *pbits, s32 width , s32 height, s32 mode , s32 color)
	Function
	

Display image
	







Params
	





in
	x
	horizontal coordinate
	y
	vertical coordinate
	pbits
	image data
	width
	image width
	height
	image height
	mode
	display mode(0 - Positive, 1 - Reverse)
	color
	bit color of the picture(1,4,24)
	out
	None
	return
	Nothing
	remark
	

	





demo
	#define LOGOBMP “data\\logo.bmp”




s8 *pbmp = NULL; s32 logowidth = 0; s32 logoheight = 0; s32 logocolor = 0;
	

  

pbmp = MfSdkGuiLoadBmpEx(LOGOBMP, &logowidth, &logoheight, &logocolor); if(pbmp)  
{
s32 logotop = (MfSdkGuiGetHeight() - logoheight)/2; s32 logoleft = (MfSdkGuiGetWidth() - logowidth)/2; MfSdkGuiBeginBatchPaint();
MfSdkGuiClearDc();
MfSdkGuiOutBitsEx(logoleft, logotop , pbmp, logowidth , logoheight, 0, logocolor); //show logo at the center of the screen MfSdkGuiEndBatchPaint();
}


                                                                                                                                                                                                                                    149. MfSdkGuiOutBitsZoom


Prototype
	LIB_EXPORT void MfSdkGuiOutBitsZoom(s32 x, s32 y, unsigned char *pbits, s32 width , s32 height, s32 mode , s32 zoom)
	Function
	

Display image
	







Params
	





in
	x
	horizontal coordinate
	y
	vertical coordinate
	pbits
	image data
	width
	image width
	height
	image height
	mode
	display mode(0 - Positive, 1 - Reverse)
	zoom
	amplification factor
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                    150. MfSdkGuiTextWidthEx


Prototype
	

LIB_EXPORT s32 MfSdkGuiTextWidthEx(char * str)
	Function
	

get text width
	Params
	in
	str        text content
	

  



	out
	None
	return
	>=0        success, the text width
	Other        failure
	remark
	

	demo
	

	                                                                                                                                                                                                                                    151. MfSdkGuiTextOutEx


Prototype
	

LIB_EXPORT s32 MfSdkGuiTextOutEx(s32 x, s32 y,char * str)
	Function
	

Display text on the screen ,Show different languages
	



Params
	

in
	x        horizontal coordinate
	y        vertical coordinate
	str        text content
	out
	None
	return
	0        success
	Other        failure
	remark
	

	



demo
	s32 ret = -1; MfSdkGuiBeginBatchPaint(); MfSdkGuiClearDc();
ret = MfSdkGuiTextOutEx(5, 5, “morefun”);
MfSdkGuiEndBatchPaint();
	                                                                                                                                                                                                                                    152. MfSdkGuiSetTextStyle  


Prototype
	

LIB_EXPORT void MfSdkGuiSetTextStyle(s32 textStyle)
	Function
	

Setting Text Style
	Params
	in
	textStyle        text style(0 - opaque, 1 - transparent)
	out
	None
	return
	Nothing
	remark
	

	demo
	MfSdkGuiSetTextStyle(0);
	

  

                                                                                                                                                                                                                                       153. MfSdkGuiSelectPageEx


Prototype
	LIB_EXPORT s32 MfSdkGuiSelectPageEx(char *title , char
*items[],s32 itemscount,s32 timeover, s32 select)
	Function
	

select page
	





Params
	



in
	title        the title of the select page
	items        menu items
	itemscount        number of menu items
	timeover        menu timeout
	select        default menu item
	out
	None
	return
	>=0        success, index in items of chosen item
	Other        failure
	remark
	

	demo
	

	                                                                                                                                                                                                                                       154. MfSdkGuiSelectPageExT  


Prototype
	LIB_EXPORT s32 MfSdkGuiSelectPageExT(char *title ,char items[][255],s32 itemscount,s32 timeover, s32 select)
	Function
	

select page
	





Params
	



in
	title        the title of the select page
	items        menu items
	itemscount        number of menu items
	timeover        menu timeout
	select        default menu item
	out
	None
	return
	>=0        success, index in items of chosen item
	Other        failure
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                          155. MfSdkGuiSelectPageCb




Prototype
	LIB_EXPORT s32 MfSdkGuiSelectPageCb(char *title , char
*items[],int itemscount,int timeover,int select,char callback_key,int (*callbackfunc)(const void *items[],const int itemscount))
	Function
	

select page with key trigger callback function
	







Params
	







in
	title        the title of the select page
	items        menu items
	itemscount        number of menu items
	timeover        menu timeout
	select        default menu item
	the key used to trigger the callback (recommend
callback_key
KEY_0 or KEY_BACKSPACE)
	callbackfunc        callback function
	out
	None
	return
	>=0        success, index in items of chosen item
	Other        failure
	remark
	

	demo
	

	                                                                                                                                                                                                                                          156. MfSdkGuiTitleColorBackground  


Prototype
	

LIB_EXPORT void MfSdkGuiTitleColorBackground(s32 color)
	Function
	

set the background color of title
	Params
	in
	color        the background color of title
	out
	None
	return
	Nothing
	remark
	only for H9G, H9L
	demo
	

	

  

                                                                                                                                                                                                                                             157. MfSdkGuiTitleColorForeground


Prototype
	

LIB_EXPORT void MfSdkGuiTitleColorForeground(s32 color)
	Function
	

set the foreground color of title
	Params
	in
	color        the foreground color of title
	out
	None
	return
	Nothing
	remark
	only for H9G, H9L
	demo
	

	                                                                                                                                                                                                                                             158. MfSdkGuiTitleFont  


Prototype
	

LIB_EXPORT void MfSdkGuiTitleFont(int font)
	Function
	Set title font
	Params
	in
	font        font(0 - 12 lattice, 1 - 16 lattice)
	out
	None
	return
	Nothing
	remark
	only for H9G, H9L
	demo
	

	                                                                                                                                                                                                                                                159. MfSdkGuiMenuHightlineColor


Prototype
	

LIB_EXPORT void MfSdkGuiMenuHightlineColor(s32 color)
	Function
	

set the color of menu hightline
	Params
	in
	color        the color of menu hightline
	out
	None
	return
	Nothing
	remark
	only for H9G, H9L
	

  

demo  


                                                                                                                                                                                                                                                160. MfSdkGuiTextOutLineCenter


Prototype
	LIB_EXPORT void MfSdkGuiTextOutLineCenter(char *pMsg , s32 top)
	Function
	

Display text in the line center on the screen,Show only English
	

Params
	in
	pMsg        text content
	top        top        coordinate
	out
	None
	return
	Nothing
	remark
	

	



demo
	MfSdkGuiBeginBatchPaint(); MfSdkGuiClearDc(); //clean screen
//show “Morefun” at the center of line 5 on screen MfSdkGuiTextOutLineCenter(“Morefun”, MFSDK_GUI_LINE_TOP(5));
MfSdkGuiBeginEndPaint();
	                                                                                                                                                                                                                                                161. MfSdkGuiTextOutLineRight  


Prototype
	LIB_EXPORT void MfSdkGuiTextOutLineRight(char *pMsg , s32 top)
	Function
	

Display text in the line right on the screen,Show only English
	

Params
	in
	pMsg        text content
	top        top        coordinate
	out
	None
	return
	Nothing
	remark
	

	



demo
	MfSdkGuiBeginBatchPaint(); MfSdkGuiClearDc(); //clean screen
//show “Morefun” at the right of line 5 on screen MfSdkGuiTextOutLineRight(“Morefun”, MFSDK_GUI_LINE_TOP(5));
MfSdkGuiBeginEndPaint();
	

  

                                                                                                                                                                                                                                                   162. MfSdkGuiTextOutLineLeft


Prototype
	LIB_EXPORT void MfSdkGuiTextOutLineLeft(char *pMsg , s32 top)
	Function
	

Display text in the line left on the screen,Show only English
	

Params
	in
	pMsg        text content
	top        top        coordinate
	out
	None
	return
	Nothing
	remark
	

	



demo
	MfSdkGuiBeginBatchPaint(); MfSdkGuiClearDc(); //clean screen
//show “Morefun” at the left of line 5 on screen MfSdkGuiTextOutLineLeft(“Morefun”, MFSDK_GUI_LINE_TOP(5));
MfSdkGuiBeginEndPaint();
	                                                                                                                                                                                                                                                   163. MfSdkGuiTextOutWinCenter  


Prototype
	

LIB_EXPORT void MfSdkGuiTextOutWinCenter(char *pmsg)
	Function
	

Display text in the middle of the screen,Show only English
	Params
	in
	pmsg        text content
	out
	None
	return
	Nothing
	remark
	

	



demo
	MfSdkGuiBeginBatchPaint(); MfSdkGuiClearDc(); //clean screen
MfSdkGuiTextOutWinCenter(“Morefun”); //show “Morefun” at the center of the screen
MfSdkGuiBeginEndPaint();
	

  

                                                                                                                                                                                                                                                      164. MfSdkGuiClearRect


Prototype
	LIB_EXPORT void MfSdkGuiClearRect(s32 left, s32 top, s32 right, s32 bottom, s32 color)
	Function
	

Refresh the specified area
	





Params
	



in
	left        left border
	top        upper boundary
	right        right border
	bottom        lower boundary
	color        refresh with specified color
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                      165. MfSdkGuiMessageBoxShowEx  


Prototype
	LIB_EXPORT s32 MfSdkGuiMessageBoxShowEx(char *title, char
*msg , char* pszLeftOp, char* pszRightOp , s32 timeover,s32 flag,unsigned char * keylist, s32 * presskey)
	Function
	

Display dialog
	







Params
	







in
	title        message title
	msg        message content
	pszLeftOp        bottom left corner
	pszRightOp        tip in the lower right corner
	timeover        overtime time
	flag        show timeout on title right side(1 - Yes, 0 - No)
	support        key value eg:{key0,key1,keyok}
	out
	presskey        return press key value
	

return
	1        Confirm return
	2        Cancel back
	3        Timeout
	Other        Failure
	remark
	

	

  

demo  


                                                                                                                                                                                                                                                         166. MfSdkGuiSetTitle


Prototype
	

LIB_EXPORT void MfSdkGuiSetTitle(char *title)
	Function
	

Set title
	Params
	in
	title        title string
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                         167. MfSdkGuiTextOutHighlight  


Prototype
	LIB_EXPORT s32 MfSdkGuiTextOutHighlight(s32 x, s32 y, s32 y2,char * text)
	Function
	

Highlight a line of text
	



Params
	

in
	x        the starting x coordinate of the highlight
	y        the starting y coordinate of the highlight
	y2        the ending y coordinate of the highlight
	text        the text want to highlight
	out
	None
	return
	0        success
	Other        failure
	remark
	

	demo
	

	                                                                                                                                                                                                                                                            168. MfSdkGuiRectHighlight


Prototype
	

LIB_EXPORT s32 MfSdkGuiRectHighlight(int x, int x2, int y, int y2)
	

  

Function
	

Highlight an area
	



Params
	

in
	x
	the starting x coordinate of the highlight
	x2
	the ending x coordinate of the highlight
	y
	the starting y coordinate of the highlight
	y2
	the ending y coordinate of the highlight
	out
	None
	return
	0
	success
	Other
	failure
	remark
	

	demo
	

	                                                                                                                                                                                                                                                            169. MfSdkGuiDefaultMsgFuncAdd  


Prototype
	

LIB_EXPORT s32 MfSdkGuiDefaultMsgFuncAdd(void * pfunc)
	Function
	

Add default message processing
	Params
	in
	pfunc        message processing function
	out
	None
	return
	0        success
	Other        failure
	remark
	

	demo
	

	                                                                                                                                                                                                                                                               170. MfSdkGuiMainMenuItemAdd


Prototype
	LIB_EXPORT s32
MfSdkGuiMainMenuItemAdd(MfSdkGuiMenuItemDef_T * menu_item)
	Function
	

Add menu item
	Params
	in
	menu_item        menu item
	out
	None
	return
	0        success
	Other        failure
	

  

remark
	

	demo
	

	                                                                                                                                                                                                                                                               171. MfSdkGuiMainMenuItemDel


Prototype
	LIB_EXPORT s32 MfSdkGuiMainMenuItemDel(char *name ,char
*id)
	Function
	

Delete menu item
	

Params
	in
	name        the value of st_gui_menu_item_def->name
	id        the value of st_gui_menu_item_def->id
	out
	None
	return
	0        success
	Other        failure
	remark
	

	demo
	

	                                                                                                                                                                                                                                                               172. MfSdkGuiKeyGetEvent  


Prototype
	LIB_EXPORT s32 MfSdkGuiKeyGetEvent(MfSdkGuiKeyEvent_T
*key_event)
	Function
	

get event
	Params
	in
	None
	out
	key_event        event structure
	return
	0        success
	Other        failure
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                  173. MfSdkGuiWifiSetPage




Prototype        LIB_EXPORT s32 MfSdkGuiWifiSetPage()  
  

Function
	

	Params
	in
	None
	out
	None
	return
	0        success
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                  174. MfSdkGuiSetProcs  


Prototype
	LIB_EXPORT void MfSdkGuiSetProcs( MfSdkGuiSignProcs_T
*procs )
	Function
	

Set sign processing function
	Params
	in
	procs        the sign processing function
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                     175. MfSdkGuiSignExist


Prototype
	

LIB_EXPORT int MfSdkGuiSignExist( const char *index )
	Function
	

Determine whether it has been signed
	Params
	in
	index        Signature index
	out
	None
	return
	0        success
	other        failure
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                     176. MfSdkGuiSignProc


Prototype
	LIB_EXPORT int MfSdkGuiSignProc( const char *index, const char *date, const char *refno, int timeout )
	Function
	

Signature processing
	



Params
	

in
	index        Signature index
	date        Device date
	refno        Reference No
	timeout        timeout time
	out
	None
	return
	0        success
	Other        failure
	remark
	API: gui_sign_proc and gui_sign_proc2 merge to MfSdkGuiSignProc
	demo
	

	                                                                                                                                                                                                                                                                     177. MfSdkGuiSignPrint  


Prototype
	

LIB_EXPORT const char *MfSdkGuiSignExist( const char *index )
	Function
	

Get sign print string
	Params
	in
	index        Signature index
	out
	None
	return
	!=0        success, the print string
	0        failure
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                        178. MfSdkGuiSignEncode




LIB_EXPORT int MfSdkGuiSignEncode( const char *index, char    
**jbigencode )
  

Function
	

JBIG encoding interface
	Params
	in
	index        Signature index
	out
	jbigencode        JBIG encoded signature data
	return
	!=0        success, the print string
	0        failure
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                        179. MfSdkGuiSignEncodeFree  


Prototype
	

LIB_EXPORT int MfSdkGuiSignEncodeFree( char *jbigencode )
	Function
	

JBIG results released
	Params
	in
	jbigencode        the JBIG result
	out
	None
	return
	0        success
	Other        failure
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                           180. MfSdkGuiSignClean


Prototype
	

LIB_EXPORT int MfSdkGuiSignClean()
	Function
	

Clean up signature data
	Params
	in
	None
	out
	None
	return
	0        success
	Other        failure
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                           181. MfSdkGuiSignSavetofile


Prototype
	LIB_EXPORT int MfSdkGuiSignSavetofile(char *filename, const char *index)
	Function
	

Save signature to file
	

Params
	in
	filename        the filename of Signature
	index        Signature index
	out
	None
	return
	0        success
	Other        failure
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                           182. MfSdkGuiSetPowerfullColor  


Prototype
	LIB_EXPORT void MfSdkGuiSetPowerfullColor(unsigned int iColor)
	Function
	

set powerfull color
	

Params
	in
	0xFF0000(red)/ 0x00FF00(green) /
iColor
0x0000FF(blue)
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                              183. MfSdkGuiStateFuncAdd


Prototype
	

LIB_EXPORT int MfSdkGuiStateFuncAdd(void * pfunc)
	Function
	

	Params
	in
	pfunc
	

  



	out
	None
	return
	0        success
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                              184. MfSdkGuiCleartState


Prototype
	

LIB_EXPORT void MfSdkGuiCleartState(int left , int width)
	Function
	

	

Params
	in
	left
	width
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                              185. MfSdkGuiOutStateBitsColor  


Prototype
	LIB_EXPORT void MfSdkGuiOutStateBitsColor(int x, int y, unsigned char *pbits, int width , int height, int mode , int fc ,int bc)
	Function
	

	









Params
	







in
	x
	y
	pbits
	width
	height
	mode
	fc
	bc
	out
	None
	return
	Nothing
	remark
	

	

  

demo  


                                                                                                                                                                                                                                                                                 186. MfSdkGuiGetDefineColor


Prototype
	

LIB_EXPORT int MfSdkGuiGetDefineColor(int index)
	Function
	

	Params
	in
	index
	out
	None
	return
	

	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                 187. MfSdkGuiSetCurlSocketIcon  


Prototype
	LIB_EXPORT void MfSdkGuiSetCurlSocketIcon(char* recv_icon,char* send_icon,int x)
	Function
	

set curl socket status icon
	

Params
	

in
	recv_icon        recv icon buf
	send_icon        send icon buf
	x        X-coordinate offset
	out
	None
	return
	Nothing
	remark
	icon buf only 30*30 1-bit bmp
	demo
	

	                                                                                                                                                                                                                                                                                    188. MfSdkGuiRefreshMod


Prototype
	

LIB_EXPORT void MfSdkGuiRefreshMod(int mod)
	Function
	

Set the screen refresh mode,disable by default
	





Params
	in
	0:Open the refresh task(It is recommended to set
mod
when the code has a large number of pixels
	out
	None
	return
	

	remark
	Called once after the sys_init
	demo
	

	                                                                                                                                                                                                                                                                                    8. Printer module
                                                                                                                                                                                                                                                                                    189. Module description  
This module mainly includes printer APIs.


                                                                                                                                                                                                                                                                                       190. Module structure declaration
None
                                                                                                                                                                                                                                                                                       191. Constant declarations
typedef enum
{


















back
________________
MFSDK_PRT_SUCCESS = 0, //Success MFSDK_PRT_FAIL = -1, //Printer unknown fault MFSDK_PRT_DEV_FAIL = -2, //Printer device failure
MFSDK_PRT_OUTOF_PAPER = -3, //The printer is out of paper MFSDK_PRT_LOSE_COMMAND = -4, //Print handle not obtained MFSDK_PRT_FILE_FAIL = -5, //Fail to open the file MFSDK_PRT_HANDLE_BACK = -6, //Split machine handle is not put  


MFSDK_PRT_CACHE_ERR = -7, //Save cache failed MFSDK_PRT_PARM_ERROR = -8,//Parameter error
  
}MfSdkPrtRet_E;


typedef enum
{
MFSDK_PRT_PATTERN_LEFT = 0,        //left
MFSDK_PRT_PATTERN_CENTER = 1,                //center MFSDK_PRT_PATTERN_RIGHT = 2,        //right
}MfSdkPrtPattern_E;
  

                                                                                                                                                                                                                                                                                       192. MfSdkPrtInit


Prototype
	

LIB_EXPORT s32 MfSdkPrtInit(void)
	Function
	

Printer initialize, check the printer status (if it is out of paper).
	Params
	in
	Nothing
	out
	Nothing
	return
	For details, see MfSdkPrtRet_E
	remark
	

	



demo
	S32 ret = MfSdkPrtInit();
if(ret == MFSDK_PRT_SUCCESS)
{
//TODO
}
	                                                                                                                                                                                                                                                                                       193. MfSdkPrtStr  


Prototype
	LIB_EXPORT s32 MfSdkPrtStr( s8 *str, s32 linegap, MFSDKBOOL newline)
	Function
	String printing with automatic line break function, support \r\n newline
	





Params
	



in
	s8 *str        Need to print string information
	Line spacing: unit pixels, 0 is the default value
s32 linegap
(for Pin printing use)
	MFSDKBOOL        0 Does not support line breaks;1 support \r\n
newline        newline
	out
	Nothing
	return
	For details, see MfSdkPrtRet_E
	remark
	Save the string to the printer cache and call Print Start
(Print_Start) to print
	



demo
	S32 ret = UPrint_Str("AMOUNT", 1, 1); if(ret == MFSDK_PRT_SUCCESS)
{
//TODO
}
	

  

                                                                                                                                                                                                                                                                                          194. MfSdkPrtBitMap


Prototype
	LIB_EXPORT s32 MfSdkPrtBitMap( s8 *BmpFile, MfSdkPrtPattern_E pattern)
	Function
	

print image (XXX.bmp)
	

Params
	

in
	s8 *BmpFile        Image file name (XXX.bmp)
	MfSdkPrtPattern_E pattern alignment (see 'MfSdkPrtPattern_E'
pattern        enum)
	out
	Nothing
	return
	For details, see MfSdkPrtRet_E
	remark
	

	



demo
	S32 ret =MfSdkPrtBitMap("data//img_mof.bmp", MFSDK_PRT_PATTERN_CENTER);
if(ret == MFSDK_PRT_SUCCESS)
{
//TODO
}
	                                                                                                                                                                                                                                                                                          195. MfSdkPrtStart  


Prototype
	

LIB_EXPORT s32 MfSdkPrtStart(void)
	Function
	

Start printing
	Params
	in
	Nothing
	out
	Nothing
	return
	For details, see MfSdkPrtRet_E
	remark
	Thermal printing: no more blank lines (processed by the
application layer) are required after printing is completed;
	



demo
	S32 ret = MfSdkPrtStart();
if(ret == MFSDK_PRT_SUCCESS)
{
//TODO
}
	

  

                                                                                                                                                                                                                                                                                             196. MfSdkPrtStrBold


Prototype
	LIB_EXPORT s32 MfSdkPrtStrBold( s8 *pszStr, MfSdkPrtPattern_E pattern, s32 linegap, MFSDKBOOL newline)
	Function
	String printing with automatic line break function, support \r\n newline
	







Params
	





in
	s8 *pszStr        Need to print string information
	MfSdkPrtPattern_E alignment (see 'MfSdkPrtPattern_E' enum)
pattern
	Line spacing, unit pixels, 0 is the default value
s32 linegap
(for Pin printing use)
	MFSDKBOOL        0 Does not support line breaks;1 support \r\n
newline        newline
	out
	Nothing
	return
	For details, see MfSdkPrtRet_E
	remark
	

	



demo
	S32 ret = MfSdkPrtStrBold(“MFSDK”,MFSDK_PRT_PATTERN_LEFT,10,1); if(ret == MFSDK_PRT_SUCCESS)
{
//TODO
}
	                                                                                                                                                                                                                                                                                             197. MfSdkPrtFeed  


Prototype
	

LIB_EXPORT s32 MfSdkPrtFeed(s32 linegap)
	Function
	

Printer paper
	Params
	in
	s32 linegap        Paper length (pixels)
	out
	Nothing
	return
	For details, see MfSdkPrtRet_E
	remark
	

	



demo
	S32 ret = MfSdkPrtFeed(36);
if(ret == MFSDK_PRT_SUCCESS)
{
//TODO
}
	

  

                                                                                                                                                                                                                                                                                                198. MfSdkPrtMatrixCode


Prototype
	LIB_EXPORT s32 MfSdkPrtMatrixCode(const s8 *psMatrixCode, s32 nLen, s8 cSize, MfSdkPrtPattern_E pattern)
	Function
	

Print QR code,Convert incoming data to QR code and print
	





Params
	





in
	const s8        QR code data
*psMatrixCode
	s32 nLen        QR code data length
	s8 cSize        QR code size, 0-small, 1-medium, 2-large
	MfSdkPrtPattern_E alignment (see 'MfSdkPrtPattern_E' enum)
pattern
	out
	Nothing
	return
	For details, see MfSdkPrtRet_E
	remark
	

	



demo
	S32 ret = MfSdkPrtMatrixCode(“MFSDK”,6,1,MFSDK_PRT_PATTERN_CENTER); if(ret == MFSDK_PRT_SUCCESS)
{
//TODO
}
	                                                                                                                                                                                                                                                                                                199. MfSdkPrtSetFontEN  


Prototype
	LIB_EXPORT s32 MfSdkPrtSetFontEN(s32 size, s32 zoomW, s32 zoomH)
	Function
	

Set print font(English)
	



Params
	

in
	s32 size        et print English font size(0--8)
	s32 zoomW        Set the horizontal magnification of English(1--5)
	s32 zoomH        Set the vertical magnification of English(1--5)
	out
	Nothing
	return
	For details, see MfSdkPrtRet_E
	remark
	

	demo
	S32 ret = MfSdkPrtSetFontEN(5,4,4);
if(ret == MFSDK_PRT_SUCCESS)
	

  

{  
//TODO
}


                                                                                                                                                                                                                                                                                                   200. MfSdkPrtSetFontCN


Prototype
	LIB_EXPORT s32 MfSdkPrtSetFontCN(s32 size, s32 zoomW, s32 zoomH)
	Function
	

Set print font(Chinese)
	



Params
	

in
	s32 size        Set print other font size(0--1)
	s32 zoomW        Set the horizontal magnification of English(1--5)
	s32 zoomH        Set the vertical magnification of English(1--5)
	out
	Nothing
	return
	For details, see MfSdkPrtRet_E
	remark
	

	



demo
	S32 ret = MfSdkPrtSetFontCN(1,4,4); if(ret == MFSDK_PRT_SUCCESS)
{
//TODO
}
	                                                                                                                                                                                                                                                                                                   201. MfSdkPrtSetDensity  


Prototype
	

LIB_EXPORT s32 MfSdkPrtSetDensity(s32 val)
	Function
	

Set print density
	Params
	in
	s32 val        Set print density (1--5, 3 is normal)
	out
	Nothing
	return
	For details, see MfSdkPrtRet_E
	remark
	

	



demo
	S32 ret = MfSdkPrtSetDensity(3); if(ret == MFSDK_PRT_SUCCESS)
{
//TODO
}
	

  

                                                                                                                                                                                                                                                                                                      202. MfSdkPrtSetAlign


Prototype
	

LIB_EXPORT void MfSdkPrtSetAlign(MfSdkPrtPattern_E pattern)
	Function
	String printing with automatic line break function, support \r\n newline
	Params
	in
	pattern        alignment (see 'MfSdkPrtPattern_E' enum)
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	MfSdkPrtInit(MFSDK_PRT_PATTERN_CENTER);
	                                                                                                                                                                                                                                                                                                      203. MfSdkPrtSetLineAlign  


Prototype
	LIB_EXPORT void MfSdkPrtSetLineAlign(MfSdkPrtPattern_E pattern)
	Function
	

Set the line print buffer align format,will not affect next line
	

Params
	in
	MfSdkPrtPattern_E alignment (see 'MfSdkPrtPattern_E' enum)
pattern
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	MfSdkPrtSetLineAlign(MFSDK_PRT_PATTERN_CENTER);
	                                                                                                                                                                                                                                                                                                         204. MfSdkPrtStrLine


Prototype
	LIB_EXPORT void MfSdkPrtStrLine( s8 *sLeft,        s8 *sRight, s32 nLinegap)
	Function
	String printing with automatic line feed function, support \r\n newline
	Params
	in
	Nothing
	out
	Nothing
	return
	Nothing
	

  

remark
	

	demo
	MfSdkPrtStrLine(“amt”,”123”,5);
	                                                                                                                                                                                                                                                                                                         205. MfSdkPrtSetLineSpace


Prototype
	

LIB_EXPORT void MfSdkPrtSetLineSpace(s32 nLinegap)
	Function
	

set the line space of follow print buffer
	Params
	in
	nLinegap        line space value
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                         206. MfSdkPrtSetFontMode  


Prototype
	

LIB_EXPORT void MfSdkPrtSetFontMode(s32 mod)
	Function
	

Set the printing mode for English letters and numbers
	

Params
	

in
	1 Print English letters and numbers characters
mod        using font files; 0 or no setting, the default print uses the code font
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                            207. MfSdkPrtCheckNopaper


Prototype
	

LIB_EXPORT s32 MfSdkPrtCheckNopaper()
	Function
	

Check if the device is out of paper
	

  

Params
	in
	Nothing
	out
	Nothing
	return
	Ref. MfSdkPrtRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                            208. MfSdkPrtSetArabicNumOrder


Prototype
	

LIB_EXPORT s32 MfSdkPrtSetArabicNumOrder(s32 order)
	Function
	

Set the printing mode for English letters and numbers
	Params
	in
	order        1:Set up Arabic digital reverse printing
	out
	Nothing
	return
	Ref. MfSdkPrtRet_E
	remark
	

	demo
	

	

                                                                                                                                                                                                                                                                                                            9. Pinpad module  
                                                                                                                                                                                                                                                                                                               209. Module description
This module mainly includes pin entry device.


                                                                                                                                                                                                                                                                                                               210. Module structure declaration
typedef struct
{
u8 mode; // mode 2,open encrypted pin(The backbutton deletes a pin); 3,open encrypted pin(The backbutton deletes all pin);
u8 min;//Minimum pin length u8 max;//Maximum pin length u32 timeoverMs;//timeover(ms)  
u8 isBypass;//Whether to support bypass
} MfSdkPedPinModCfg_T;


typedef struct
{


s8 appVer[10]; s8 pinpadSn[32]; s8 model[10];  
}MfSdkPedPinpadInfo_T;
                                                                                                                                                                                                                                                                                                               211. Constant declarations
typedef enum  
{
MFSDK_PED_NOT_KEY = -22,        // No injection key MFSDK_PED_PARM_ERROR = -21, // Parameter error MFSDK_PED_PINPAD_INSUFFICIENT_SPACE = -16,//The pinpad    
space is insufficient
MFSDK_PED_PINPAD_NO_PUBLIC_KEY_SIGN = -15,//The pinpad upgrade lacks the public key signature
MFSDK_PED_PINPAD_REPEATED_SET_MODE = -12, //Repeated
setting mode
MFSDK_PED_PINPAD_UPDATEFILE_TOO_BIG = -11, // update file
too big
MFSDK_PED_UPDATEFILE_FORMAT_ERR = -10, // update file
format error
MFSDK_PED_UPDATE_COMPLETE_RECONNECT_FAILED = -9, //
failed to reconnect to the pinpad after the update is complete MFSDK_PED_MD5_FAILED = -8, // pinpad app md5 authentication
failed
________________


MFSDK_PED_WRITE_FAILED = -7, // pinpad failed to write files MFSDK_PED_OPEN_FAILED = -6, // app to be updated failed to open MFSDK_PED_NO_APP_UPDATE = -5, // no apps to update(mo
  
data/pinpad.bin)
MFSDK_PED_PINPAD_TIMEOUT = -2, // External Pinpad communication timed out
MFSDK_PED_OTHER = -1,
MFSDK_PED_SUCCESS = 0,        // Success
}MfSdkPedRet_E; typedef enum
{
MFSDK_PED_ENCRYPT = 0, // Encryption mode MFSDK_PED_DECRYPT = 1, // Decryption mode
} MfSdkPedMod_E;


typedef enum
{
MFSDK_PED_DES_ECB = 0, // des mode ECB MFSDK_PED_DES_CBC = 1, // des mode CBC
  

} MfSdkPedDesMod_E;  


typedef enum
{
MFSDK_PED_PINPAD_INPUT_PIN = 0, MFSDK_PED_PINPAD_PRESS_OK, MFSDK_PED_PINPAD_PRESS_ESC,  
}MfSdkPedPinpadStatus_E;




#define MFSDK_MKSK_MAINKEY_TYPE 0x00  
#define MFSDK_MKSK_PINENC_TYPE 0x01 #define MFSDK_MKSK_MACENC_TYPE 0x02 #define MFSDK_MKSK_MAGDEC_TYPE 0x03 #define MFSDK_MKSK_TRANSKEY_TYPE 0x04


#define MFSDK_SEC_FIXED_FIELD 0x00 #define MFSDK_SEC_MKSK_FIELD 0x01 #define MFSDK_SEC_DUKPT_FIELD 0x02


#define MFSDK_SEC_MAC_UPAY_FORMAT 0x01 #define MFSDK_SEC_MAC_X99_FORMAT 0x02 #define MFSDK_SEC_MAC_X919_FORMAT 0x03 #define MFSDK_SEC_MAC_XOR_FORMAT 0x04


#define MFSDK_SEC_PIN_FORMAT0 0x00 #define MFSDK_SEC_PIN_FORMAT1 0x01 #define MFSDK_SEC_PIN_FORMAT2 0x02 #define MFSDK_SEC_PIN_FORMAT3 0x03 #define MFSDK_SEC_PIN_FORMAT4 0x04


#define MFSDK_DUKPT_DES_KEY_PIN 0x00 #define MFSDK_DUKPT_DES_KEY_MAC1 0x01 #define MFSDK_DUKPT_DES_KEY_MAC2 0x02 #define MFSDK_DUKPT_DES_KEY_DATA1 0x03 #define MFSDK_DUKPT_DES_KEY_DATA2 0x04 #define MFSDK_DUKPT_DES_KEY_PEK 0x05


typedef enum
{
MFSDK_PED_TR31_TYPE_IPEK = 0, MFSDK_PED_TR31_TYPE_BDK,
}MfSdkPedTr31KeyType_E;
  



typedef enum  
{
MFSDK_PED_PINPAD_UPDATE_START = 0x01, MFSDK_PED_PINPAD_UPDATEING, MFSDK_PED_PINPAD_UPDATE_END, MFSDK_PED_PINPAD_RESTORE_CONNECTION,  
}MfSdkPedPinpadUpdateStatus_E;


                                                                                                                                                                                                                                                                                                               212. MfSdkPedSetKeySize  


Prototype
	

LIB_EXPORT s32 MfSdkPedSetKeySize(s32 size)
	Function
	

Set the key length
	Params
	in
	size        16 or 24
	out
	nothing
	return
	For details, see MfSdkPedRet_E.
	remark
	

	



demo
	S32 ret = MfSdkPedSetKeySize(16); if(ret == MFSDK_PED_SUCCESS)
{
//TODO
}
	                                                                                                                                                                                                                                                                                                                  213. MfSdkPedGetKeySize


Prototype
	

LIB_EXPORT s32 MfSdkPedGetKeySize(void)
	Function
	

Get the key length
	Params
	in
	nothing
	out
	nothing
	return
	key length
	remark
	

	demo
	S32 keyLength = MfSdkPedGetKeySize();
	

  

                                                                                                                                                                                                                                                                                                                  214. MfSdkPedDukptLoadKey


Prototype
	LIB_EXPORT s32 MfSdkPedDukptLoadKey(s32 mode, s32 type, s32 gid, u8 *init_ksn, u8 *init_key, u8 *kvc)
	Function
	

initialize the dukpt key use IPEK ciphertext
	





Params
	





in
	encryption method of initial key(0 - plaintext, 1 -
s32 mode
tmk encryption, 2 - kek encryption)
	s32 type        initial key type(0 - ipek, 1 - bdk)
	s32 gid        key grouping,,max 100 group (0 - 99)
	u8 *init_ksn        initial ksn
	u8 *init_key        Initial key
	out
	u8 *kvc        key kvc(Key plaintext encryption 8 0x00)
	return
	For details, see MfSdkPedRet_E.
	remark
	

	







demo
	u8 kvc[8] = { 0 };
u8 ksn[10] = "\xFF\xFF\x01\x11\x7C\x70\xCA\x00\x00\x00"; u8 ipek[16] =
"\xC1\xD0\xF8\xFB\x49\x58\x67\x0D\xBA\x40\xAB\x1F\x37\x52\xEF\x0D"; S32 ret = MfSdkPedDukptLoadKey(0,0,0, ksn, ipek, kvc);
if(ret == MFSDK_PED_SUCCESS)
{
//TODO
}
	                                                                                                                                                                                                                                                                                                                  215. MfSdkPedDukpt3desRun  


Prototype
	LIB_EXPORT s32 MfSdkPedDukpt3desRun(MfSdkPedMod_E mode, s8 *inData, s32 size, s8 *outData, MfSdkPedDesMod_E
desMode, s32 keyTpye)
	Function
	

use the previously obtained key 3des operation
	





Params
	





in
	MfSdkPedMod_E mode(Ref. enum'MfSdkPedMod_E' )
mode
	s8 *inData        raw data
	s32 size        data length (8-byte multiple)
	MfSdkPedDesMod_ des mode(see 'MfSdkPedDesMod_E' enum)
E desMode
	

  



	

	key type(0 - MFSDK_DUKPT_DES_KEY_PIN, 1 - MFSDK_DUKPT_DES_KEY_MAC1,
s32 keyTpye        2 - MFSDK_DUKPT_DES_KEY_MAC2,
                                                                                                                                                                                                                                                                                                                     3. - MFSDK_DUKPT_DES_KEY_DATA1,
                                                                                                                                                                                                                                                                                                                     4. - MFSDK_DUKPT_DES_KEY_DATA2)
	out
	s8 *outData        out data
	return
	For details, see MfSdkPedRet_E.
	remark
	

	











demo
	u8 ksn[20] = { 0 };
u8 inData[] = "morefun"; u8 ounData[20] = { 0 };
S32 ret = MfSdkPedDukptGetKsn(0, ksn); if(ret == MFSDK_PED_SUCCESS)
{
ret = MfSdkPedDukpt3desRun(MFSDK_PED_ENCRYPT, inData, 8, ounData, MFSDK_PED_DES_ECB, MFSDK_DUKPT_DES_KEY_DATA1);
if(ret == MFSDK_PED_SUCCESS)
{
//TODO
}
}
	                                                                                                                                                                                                                                                                                                                     216. MfSdkPedDukptGetKsn  


Prototype
	

LIB_EXPORT s32 MfSdkPedDukptGetKsn(u32 gid, u8 *ksn)
	Function
	

get key corresponds to ksn
	Params
	in
	u32 gid        gid key grouping ,max 100 group (0 - 99)
	out
	u8 *ksn        key corresponds to ksn
	return
	For details, see MfSdkPedRet_E.
	remark
	

	



demo
	u8 ksn[20] = { 0 };
S32 ret = MfSdkPedDukptGetKsn(0, ksn); if(ret == MFSDK_PED_SUCCESS)
{
//TODO
}
	

  

                                                                                                                                                                                                                                                                                                                        217. MfSdkPedMkSkSavePlaintextKey


Prototype
	LIB_EXPORT s32 MfSdkPedMkSkSavePlaintextKey(s32 type, u32 gid, u8 *key, u8 *kvc)
	Function
	

get key corresponds to ksn
	







Params
	







in
	type key type(
                                                                                                                                                                                                                                                                                                                        1. - MFSDK_MKSK_MAINKEY_TYPE,
                                                                                                                                                                                                                                                                                                                        2. - MFSDK_MKSK_PINENC_TYPE,
s32 type
                                                                                                                                                                                                                                                                                                                        1. - MFSDK_MKSK_MACENC_TYPE,
                                                                                                                                                                                                                                                                                                                        2. - MFSDK_MKSK_MAGDEC_TYPE,
                                                                                                                                                                                                                                                                                                                        3. - MFSDK_MKSK_TRANSKEY_TYPE)
	u32 gid        key grouping ,max 100 group (0 - 99)
	u8 *key        key key plaintext
	out
	u8 *kvc        key kvc(key plaintext encryption 8 0x00)
	return
	For details, see MfSdkPedRet_E.
	remark
	

	









demo
	u8 kvc[8] = { 0 }; u8 key[16] =
"\xC1\xD0\xF8\xFB\x49\x58\x67\x0D\xBA\x40\xAB\x1F\x37\x52\xEF\x0D"; S32 ret =
MfSdkPedMkSkSavePlaintextKey(MFSDK_MKSK_MAINKEY_TYPE,0,key, kvc); if(ret == MFSDK_PED_SUCCESS)
{
//TODO




}
	                                                                                                                                                                                                                                                                                                                        218. MfSdkPedMkSkSaveEncryptedKey  


Prototype
	LIB_EXPORT s32 MfSdkPedMkSkSaveEncryptedKey(s32 type, u32 gid, u8 *key, MfSdkPedDesMod_E desMode, u8 *kvc)
	Function
	

save key ciphertext
	

Params
	

in
	type key type(
                                                                                                                                                                                                                                                                                                                           1. - MFSDK_MKSK_MAINKEY_TYPE,
s32 type
                                                                                                                                                                                                                                                                                                                           1. - MFSDK_MKSK_PINENC_TYPE,
                                                                                                                                                                                                                                                                                                                           2. - MFSDK_MKSK_MACENC_TYPE,
	

  



	

	                                                                                                                                                                                                                                                                                                                           3. - MFSDK_MKSK_MAGDEC_TYPE,
                                                                                                                                                                                                                                                                                                                           4. - MFSDK_MKSK_TRANSKEY_TYPE)
	u32 gid        key grouping ,max 100 group (0 - 99)
	MfSdkPedDesMod_ des mode(see 'MfSdkPedDesMod_E' enum)
E desMode
	u8 *key        key ciphertext
	out
	u8 *kvc        key kvc(key plaintext encryption 8 0x00)
	return
	For details, see MfSdkPedRet_E.
	remark
	

	









demo
	u8 kvc[8] = { 0 }; u8 key[16] =
"\xC1\xD0\xF8\xFB\x49\x58\x67\x0D\xBA\x40\xAB\x1F\x37\x52\xEF\x0D"; S32 ret =
MfSdkPedMkSkSavePlaintextKey(MFSDK_MKSK_MAINKEY_TYPE,0,key, kvc); if(ret == MFSDK_PED_SUCCESS)
{
//TODO




}
	                                                                                                                                                                                                                                                                                                                           219. MfSdkPedMkSkGetKcv  


Prototype
	LIB_EXPORT s32 MfSdkPedMkSkGetKcv(s32 keyIndex, s32 keyType, u8 *OutKcv)
	Function
	

get mksk kcv
	





Params
	





in
	s32 keyIndex        keyIndex key index(0-99)
	(0 - MFSDK_MKSK_MAINKEY_TYPE,
1 - MFSDK_MKSK_PINENC_TYPE,
s32 keyType        2 - MFSDK_MKSK_MACENC_TYPE,
3 - MFSDK_MKSK_MAGDEC_TYPE,
4 - MFSDK_MKSK_TRANSKEY_TYPE)
	out
	u8 *OutKcv        key kvc(key plaintext encryption 8 0x00)
	return
	For details, see MfSdkPedRet_E.
	remark
	

	demo
	u8 kcv[10] = { 0 };
s32 ret = MfSdkPedMkSkGetKcv(0,MFSDK_MKSK_MAINKEY_TYPE,kcv);
	

  

                                                                                                                                                                                                                                                                                                                              220. MfSdkPedMkSk3desRun


Prototype
	LIB_EXPORT s32 MfSdkPedMkSk3desRun(s32 type, s32 gid, MfSdkPedMod_E mode, u8 *ind, s32 size, u8 iv[8], u8 *outd,
MfSdkPedDesMod_E desMode)
	Function  
	

use key 3des operation
	













Params
	













in
	(0 - MFSDK_MKSK_MAINKEY_TYPE,
1 - MFSDK_MKSK_PINENC_TYPE,
s32 type        2 - MFSDK_MKSK_MACENC_TYPE,
3 - MFSDK_MKSK_MAGDEC_TYPE,
4 - MFSDK_MKSK_TRANSKEY_TYPE)
	s32 gid        key grouping,max 100 group (0 - 99)
	MfSdkPedMod_E mode(see 'MfSdkPedMod_E' enum)
mode
	u8 *ind        raw data
	s32 size        data length (8-byte multiple)
	u8 iv[8]        initialization vector
	MfSdkPedDesMod_ des mode(see 'MfSdkPedDesMod_E' enum)
E desMode
	out
	u8 *outd        calculation results
	return
	For details, see MfSdkPedRet_E.
	remark
	

	









demo
	u8 ksn[20] = { 0 };
u8 inData[] = "morefun"; u8 ounData[20] = { 0 }; u8 iv[8] = { 0 };
S32 ret = 0;
ret = MfSdkPedMkSk3desRun(MFSDK_MKSK_MAINKEY_TYPE, 0,MFSDK_PED_ENCRYPT,inData,8,iv,ounData,MFSDK_PED_DES_ECB); if(ret == MFSDK_PED_SUCCESS)
{
//TODO}
}
	                                                                                                                                                                                                                                                                                                                              221. MfSdkPedMacProc




LIB_EXPORT s32 MfSdkPedMacProc(s32 fid, s32 gid, s32 format, u8 *data, s32 len, u8 *mac, s32 keyTpye, s32 keySize)    
  

Function
	

computing mac
	















Params
	













in
	field id (1 - MFSDK_SEC_MKSK_FIELD, 2 -
s32 fid
MFSDK_SEC_DUKPT_FIELD)
	s32 gid        key grouping ,max 100 group (0 - 99)
	mac format (
1 - MFSDK_SEC_MAC_UPAY_FORMAT,
s32 format        2 - MFSDK_SEC_MAC_X99_FORMAT,
3 - MFSDK_SEC_MAC_X919_FORMAT,
4 - MFSDK_SEC_MAC_XOR_FORMAT)
	u8 *data        mac source data
	s32 len        data length
	key type(
s32 keyTpye        1 - MFSDK_DUKPT_DES_KEY_MAC1,
2 - MFSDK_DUKPT_DES_KEY_MAC2)
	s32 keySize        key size
	out
	u8 *mac        mac
	return
	For details, see MfSdkPedRet_E.
	remark
	

	







demo
	U8 data[10] = “\x12\x34\x56”; U8 mac[30]={0};
S32 ret = MfSdkPedMacProc(MFSDK_SEC_DUKPT_FIELD,0,MFSDK_SEC_MAC_X919_FORMAT,data,8, mac,MFSDK_DUKPT_DES_KEY_MAC1,16);
if(ret == MFSDK_PED_SUCCESS)
{
//TODO}
}
	                                                                                                                                                                                                                                                                                                                              222. MfSdkPedEncryptPinProc  


Prototype
	LIB_EXPORT s32 MfSdkPedEncryptPinProc(s32 fid, s32 format, s32 gid, u8 *pan, u8 *pinBlock, u8 *pin)
	Function
	

read pin ciphertext from the security keyboard
	

Params
	

in
	field id (1 - MFSDK_SEC_MKSK_FIELD, 2 -
s32 fid
MFSDK_SEC_DUKPT_FIELD)
	pin format (
s32 format
0 - MFSDK_SEC_PIN_FORMAT0,
	

  



	

	                                                                                                                                                                                                                                                                                                                                 1. - MFSDK_SEC_PIN_FORMAT1,
                                                                                                                                                                                                                                                                                                                                 2. - MFSDK_SEC_PIN_FORMAT2,
                                                                                                                                                                                                                                                                                                                                 3. - MFSDK_SEC_PIN_FORMAT3,
                                                                                                                                                                                                                                                                                                                                 4. - MFSDK_SEC_PIN_FORMAT4)
	s32 gid        key grouping ,max 100 group (0 - 99)
	u8 *pan        card number
	u8 *pin        pin plaintext
	out
	u8 *pinBlock        pin Block
	return
	For details, see MfSdkPedRet_E.
	remark
	

	







demo
	U8 pan[10] = “1234123488888888”;
U8 pinblock[30]={0}; S32 ret =
MfSdkPedEncryptPinProc(MFSDK_SEC_DUKPT_FIELD,MFSDK_SEC_PIN_FORMAT0,0,pan,pin block,”1234”);
if(ret == MFSDK_PED_SUCCESS)
{
//TODO}
}
	                                                                                                                                                                                                                                                                                                                                 223. MfSdkPedSetPinModeCfgInit  


Prototype
	

LIB_EXPORT void MfSdkPedSetPinModeCfgInit(void)
	Function
	Pin mode config init
pin is plaintext and 4-6 , it does not support bypass MfSdkPedPinModCfg_T flag is 0
	Params
	in
	Nothing
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                    224. MfSdkPedSetPinModeCfg




LIB_EXPORT void MfSdkPedSetPinModeCfg(MfSdkPedPinModCfg_T cfg)    
  

Function
	

Set enable pin input mode config
	

Params
	in
	MfSdkPedPinModC For details, see MfSdkPedPinModCfg_T
fg_T cfg
	out
	Nothing
	return
	Nothing
	remark
	

	





demo
	MfSdkPedPinModCfg_T pinCfg = { 0 }; pinCfg.mode = 2;
pinCfg.min = 4;
pinCfg.max = 6;
pinCfg.timeoverMs = 45000;
pinCfg.isBypass = 1; MfSdkPedSetPinModeCfg(pinCfg);
	                                                                                                                                                                                                                                                                                                                                    225. MfSdkPedEncryptPinProcEx  


Prototype
	LIB_EXPORT s32 MfSdkPedEncryptPinProcEx(u8* pan, u8* pinBlock)
	Function
	Calculated pinblock value,MfSdkPedSetPinModeCfg needs to be called first.
	Params
	in
	pan        Card PAN
	out
	pinBlock
	return
	For details, see MfSdkPedRet_E.
	remark
	

	









demo
	MfSdkPedPinModCfg_T pinCfg = { 0 }; pinCfg.mode = 2;
pinCfg.min = 4;
pinCfg.max = 6;
pinCfg.timeoverMs = 45000;
pinCfg.isBypass = 1; MfSdkPedSetPinModeCfg(pinCfg); u8* pan = “1234567890123456”;
u8 pinBlock[8] = {0};
s32 nRet = MfSdkPedEncryptPinProcEx(pan, pinBlock);
	

  

                                                                                                                                                                                                                                                                                                                                       226. MfSdkPedGetPinModeCfg


Prototype
	LIB_EXPORT MfSdkPedPinModCfg_T
*MfSdkPedGetPinModeCfg(void)
	Function
	

Get pin input mode config
	Params
	in
	nothing
	out
	nothing
	return
	MfSdkPedPinModCfg_T point, pin input mode config
	remark
	

	demo
	MfSdkPedPinModCfg_T pinCfg = { 0 };
&pinCfg = MfSdkPedGetPinModeCfg();
	                                                                                                                                                                                                                                                                                                                                       227. MfSdkPedGetPinModeStatus  


Prototype
	

LIB_EXPORT s32 MfSdkPedGetPinModeStatus(s32 *length)
	Function
	

Get pin mode status
	Params
	in
	Nothing
	out
	s32 *length        pin length
	

return
	0        Still input
	1        Press the enter(OK) button
	2        Press the exit button
	3        timeover
	remark
	

	



demo
	S32 len=0;
S32 ret = MfSdkPedGetPinModeStatus(&len); If(ret == 1)
{
//user press the enter(OK) button
}
	

  

                                                                                                                                                                                                                                                                                                                                          228. MfSdkPedSaveRsaPriKey


Prototype
	LIB_EXPORT s32 MfSdkPedSaveRsaPriKey(s32 index, s32 length, u8 *p, u8 *q)
	Function
	

save the private key to the security module
	



Params
	



in
	s32 index        index key index (0 - 9)
	s32 length        rsa byte size(128/256)
	u8 *p        private key P component
	u8 *q        private key Q component
	out
	Nothing
	return
	For details, see MfSdkPedRet_E.
	remark
	

	



demo
	s32 ret = MfSdkPedSaveRsaPriKey(0,128,”10”,”20”);
if(ret == MFSDK_PED_SUCCESS)
{
//TODO}
}
	                                                                                                                                                                                                                                                                                                                                          229. MfSdkPedSaveRsaPukKey  


Prototype
	LIB_EXPORT s32 MfSdkPedSaveRsaPukKey(s32 index, s32 length, u8 *n)
	Function
	

save the public key to the security module
	



Params
	

in
	s32 index        index key index (0 - 9)
	s32 length        length rsa byte size(128/256)
	u8 *n        public        key N component
	out
	Nothing
	return
	For details, see MfSdkPedRet_E.
	remark
	

	



demo
	s32 ret = MfSdkPedSaveRsaPukKey(0,128,”10”);
if(ret == MFSDK_PED_SUCCESS)
{
//TODO}
}
	

  

                                                                                                                                                                                                                                                                                                                                             230. MfSdkPedRsaBlock


Prototype
	LIB_EXPORT s32 MfSdkPedRsaBlock(s32 index, s8 *inD, s8
*outD, s32 length)
	Function
	

RSA block calculation
	



Params
	

in
	s32 index        index key index (0 - 9)
	s8 *inD        in data
	s32 length        rsa key byte size(128/256)
	out
	s8 *outD        out data
	return
	For details, see MfSdkPedRet_E.
	remark
	

	



demo
	s8 out[20]={0};
s32 ret = MfSdkPedRsaBlock(0,”1234”,out,128);
if(ret == MFSDK_PED_SUCCESS)
{
//TODO}
}
	                                                                                                                                                                                                                                                                                                                                             231. MfSdkPedDeleteKey  


Prototype
	LIB_EXPORT s32 MfSdkPedDeleteKey(s32 keyType, s32 keyIndex)
	Function
	

elete index key
	

Params
	in
	s32 keyType        0:MKSK,1:DUKPT
	s32 keyType        key index(0-99)
	out
	Nothing
	return
	For details, see MfSdkPedRet_E.
	remark
	

	



demo
	s8 out[20]={0};
s32 ret = MfSdkPedDeleteKey(0,0);
if(ret == MFSDK_PED_SUCCESS)
{
//TODO}
}
	

  

                                                                                                                                                                                                                                                                                                                                                232. MfSdkPedTr31GetData


Prototype
	LIB_EXPORT s32 MfSdkPedTr31GetData(u32 type,        u8 *mk, s32 nKeySize,        u8 *data, s32 size, s8 *wk)
	Function
	

save key plaintext
	





Params
	



in
	u32 type        default 0
	u8 *mk        key for decrypt the TR31 string
	s32 nKeySize        mk size
	u8 *data        TR31 string
	s32 size        TR31 data size
	out
	s8 *wk        Decrypted key
	return
	For details, see MfSdkPedRet_E.
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                233. MfSdkPedRkiDukptLoad  


Prototype
	LIB_EXPORT s32 MfSdkPedRkiDukptLoad(const s8 *keyData, s32 len)
	Function
	

load the rki key use dukpt
	

Params
	in
	const s8 *keyData key data
	s32 len        key length
	out
	s8 *wk        Decrypted key
	return
	otherr        Failed
	0        Success
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                   234. MfSdkPedRkiCheckAppKey




Prototype        LIB_EXPORT s32 MfSdkPedRkiCheckAppKey( u8 *sHashValue)  
  

Function
	

verify the app hash
	Params
	in
	sHashValue        sha256 value of app KEY
	out
	Nothing
	return
	1, Yes; 0, No
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                   235. MfSdkPedSetPinpad  


Prototype
	

LIB_EXPORT s32 MfSdkPedSetPinpad(s32 mod)
	Function
	

set input pinpad
	Params
	in
	s32 mod        1:external Pinpad, 0:device's Pinpad
	out
	Nothing
	return
	For details, see MfSdkPedRet_E.
	remark
	

	demo
	MfSdkPedSetPinpad(1);
	                                                                                                                                                                                                                                                                                                                                                      236. MfSdkPedGetPinpad


Prototype
	

LIB_EXPORT s32 MfSdkPedGetPinpad(void)
	Function
	

get input pinpad
	Params
	in
	Nothing
	out
	Nothing
	return
	1        external Pinpad
	0        device's Pinpad
	remark
	

	

demo
	s32 ret = MfSdkPedGetPinpad(); If(ret == 1)
{
//external pinpad
	

                                                                                                                                                                                                                                                                                                                                                      237.     MfSdkPedSetPedUi


Prototype
	

LIB_EXPORT s32 MfSdkPedSetPedUi(u8 *buff, u32 len)
	Function
	

Send page buf to external pinpad
	

Params
	in
	u8 *buff        page buff
	u32 len        buff len
	out
	Nothing
	return
	For details, see MfSdkPedRet_E
	remark
	

	



demo
	u8 buf[153600]={0};
s32 ret = MfSdkPedSetPedUi(buf,153600); If(ret == MFSDK_PED_SUCCESS )
{
//TODO
}
	                                                                                                                                                                                                                                                                                                                                                         238. MfSdkPedCheckCardOnce  


Prototype
	

LIB_EXPORT s32 MfSdkPedCheckCardOnce(void)
	Function
	

Use the external pinpad to check card
	Params
	in
	Nothing
	out
	Nothing
	

return
	0        no card
	1        icc card
	2        rfid cad
	other        fail
	remark
	

	

demo
	s32 ret = MfSdkPedCheckCardOnce(); if(ret == 1)
{
//ICC card
	

                                                                                                                                                                                                                                                                                                                                                            239.     MfSdkPedIsWithPinpad


Prototype
	

LIB_EXPORT s32 MfSdkPedIsWithPinpad(s32 timeoutMs)
	Function
	

Whether the terminal has external pinpad.
	Params
	in
	s32 timeoutMs        timeout ms
	out
	Nothing
	return
	1        Connect the external pinpad
	0        External pinpad is not connected
	remark
	

	



demo
	s32 ret = MfSdkPedIsWithPinpad(3000); if(ret == 1)
{
//Connect the external pinpad
}
	                                                                                                                                                                                                                                                                                                                                                               240. MfSdkPedExPinpadUpdate  


Prototype
	

s32 MfSdkPedExPinpadUpdate(MfSdkPedPinpadUpdateCb cb)
	Function
	Update the external pinpad app.The pinpad app path must be in data/pinpad.bin
	

Params
	in
	MfSdkPedPinpadU Set the callback for the update process(500ms
pdateCb cb        call once)
	out
	Nothing
	return
	For details, see MfSdkPedRet_E
	remark
	

	





demo
	static s32 AppPedPinpadUpdateCb(MfSdkPedPinpadUpdateStatus_E status, s32 total, s32 updatedSize, u32 time)
{
return 0;
}
s32 ret = MfSdkPedExPinpadUpdate(AppPedPinpadUpdateCb); If(ret == MFSDK_PED_SUCCESS )
	

  



{  
//TODO
}


                                                                                                                                                                                                                                                                                                                                                                  241. MfSdkPedGetExPinpadVersion


Prototype
	

s32 MfSdkPedGetExPinpadVersion(s8 *buf, s32 bufSize)
	Function
	

Get the version of the external pinpad
	Params
	in
	bufSize        Version buff size
	out
	buf        Version buff
	return
	For details, see MfSdkPedRet_E
	remark
	

	



demo
	s8 buf[20] = {0};
s32 ret = MfSdkPedGetExPinpadVersion(buf,20); If(ret == MFSDK_PED_SUCCESS )
{
//TODO
}
	                                                                                                                                                                                                                                                                                                                                                                  242. MfSdkPedGetExPinpadInfo  


Prototype
	LIB_EXPORT s32
MfSdkPedGetExPinpadInfo(MfSdkPedPinpadInfo_T *info)
	Function
	

Get the info of the external pinpad
	Params
	in
	nothing
	out
	info        pinpad info
	return
	For details, see MfSdkPedRet_E
	remark
	

	



demo
	MfSdkPedPinpadInfo_T pinfo = {0};
s32 ret = MfSdkPedPinpadInfo_T(&pinfo ); If(ret == MFSDK_PED_SUCCESS )
{
//TODO
}
	

  

                                                                                                                                                                                                                                                                                                                                                                     243. MfSdkPedSetPedPinMod


Prototype
	

LIB_EXPORT s32 MfSdkPedSetPedPinMod(s32 min, s32 max)
	Function
	

Set the external pinpad pin
	

Params
	in
	s32 min        pin min len
	s32 max        pin max len
	out
	Nothing
	return
	For details, see MfSdkPedRet_E.
	remark
	

	



demo
	s32 ret = MfSdkPedSetPedPinMod(4,6);
if(ret == MFSDK_PED_SUCCESS)
{
//TODO}
}
	                                                                                                                                                                                                                                                                                                                                                                     244. MfSdkPedGetPin  


Prototype
	

LIB_EXPORT s32 MfSdkPedGetPin(s32 *len, s8 *pinBuf)
	Function
	

Gets the pin of the external pinpad
	

Params
	in
	Nothing
	out
	s32 *len        Enter the pin length
	s8 *pinBuf        pin
	return
	For details, see MfSdkPedPinpadStatus_E
	remark
	

	







demo
	s8 pinBuf[10]={0}; s32 pinLen=0; s32 ret=0;
ret = MfSdkPedGetPin(&pinLen,pinBuf);
if(ret == MFSDK_PED_PINPAD_PRESS_OK)
{
//pinpad press OK
}
	

  

                                                                                                                                                                                                                                                                                                                                                                        245. MfSdkPedTR31LoadKBPK


Prototype
	

s32 MfSdkPedTR31LoadKBPK(s32 gid, u8 *kbpk, u32 kbpkLen)
	Function
	

Load TR-31 clear-text KBPK
	



Params
	

in
	gid        key index 0-99
	kbpk        kbpk value
	kbpkLen        kbpk length
	out
	Nothing
	return
	For details, see MfSdkPedPinpadStatus_E
	remark
	

	









demo
	s32 ret=0; u8 kbpk[] =
{
0x89,0xE8,0x8C,0xF7,0x93,0x14,0x44,0xF3,
0x34,0xBD,0x75,0x47,0xFC,0x3F,0x38,0x0C
};
ret = MfSdkPedTR31LoadKBPK(0, kbpk, sizeof(kbpk)); if(ret == MFSDK_PED_SUCCESS)
{
//load success
}
	                                                                                                                                                                                                                                                                                                                                                                        246. MfSdkPedDukptLoadEncryptedKeyByTR31  


Prototype
	s32
MfSdkPedDukptLoadEncryptedKeyByTR31(MfSdkPedTr31KeyTy pe_E type, s32 gid, u8 *keyblock, u32 keyblockLen)
	Function
	

Load cipher-text dukpt bdk/ipek by TR-31
	



Params
	



in
	type        (0 - ipek, 1 - bdk)
	gid        key index 0-99
	keyblock        keyblock value
	keyblockLen        keyblock length
	out
	Nothing
	return
	For details, see MfSdkPedPinpadStatus_E
	

  

remark
	

	

	s32 ret=0;
	

	u8* keyblock =
	

	"B0080B1TX00N0000D94B387D9FACD303A6AEE1DF9CECB7F8FA3D314DB43F7C0EDCBC62
	

	E94412D427";
	demo
	ret = MfSdkPedDukptLoadEncryptedKeyByTR31(MFSDK_PED_TR31_TYPE_IPEK, 1, keyblock,
strlen(keyblock));
	

	if(ret == MFSDK_PED_SUCCESS)
	

	{
	

	//load success
	

	}
	                                                                                                                                                                                                                                                                                                                                                                           247. MfSdkPedDukptLoadEncryptedKeyByTR31A  




Prototype
	s32 MfSdkPedDukptLoadEncryptedKeyByTR31A(MfSdkPedTr31KeyT ype_E type, s32 gid, u8 *keyblock, u32 keyblockLen, u8
*pKsn ,s32 ksnLength,u8 *kvc ,s32 kvcLenth)
	Function
	

Load cipher-text dukpt bdk/ipek by TR-31
	







Params
	





in
	type        (0 - ipek, 1 - bdk)
	gid        key index 0-99
	keyblock        keyblock value
	keyblockLen        keyblock length
	pKsn
	ksnLength
	kvcLenth
	out
	kvc
	return
	For details, see MfSdkPedPinpadStatus_E
	remark
	Note pKsn != NULL && ksnLength > 0 will load pKsn
	demo
	

	                                                                                                                                                                                                                                                                                                                                                                              248. MfSdkPedMkskSaveEncryptedKeyByTR31


Prototype
	s32 MfSdkPedMkskSaveEncryptedKeyByTR31(s32 type, u32 gid, u8 *keyblock, u32 keyblockLen ,u8 *kvc ,s32 kvcLenth)
	Function
	

Load cipher-text mk/wk by TR-31
	

  











Params
	







in
	



type
	MFSDK_MKSK_MAINKEY_TYPE MFSDK_MKSK_PINENC_TYPE MFSDK_MKSK_MACENC_TYPE MFSDK_MKSK_MAGDEC_TYPE
MFSDK_MKSK_TRANSKEY_TYPE
	gid
	key index 0-99
	keyblock
	keyblock value
	keyblockLen
	keyblock length
	kvcLenth
	kvc length
	out
	kvc
	kvc buff
	return
	For details, see MfSdkPedPinpadStatus_E
	remark
	

	









demo
	s32 ret=0;
u8 kvc[32] = { 0 };
u8* keyblock = "B0080B1TX00N0000D94B387D9FACD303A6AEE1DF9CECB7F8FA3D314DB43F7C0EDCBC62 E94412D427";
ret = MfSdkPedMkskSaveEncryptedKeyByTR31(MFSDK_MKSK_PINENC_TYPE, 1, keyblock, strlen(keyblock), kvc, sizeof(kvc));
if(ret == MFSDK_PED_SUCCESS)
{
//load success
}
	                                                                                                                                                                                                                                                                                                                                                                              249. MfSdkPedSetTransKey  


Prototype
	

s32 MfSdkPedSetTransKey(s32 gid, s8 *key)
	Function
	

Save the mksk trans key
	

Params
	in
	gid        max 100 group (0 ~ 99)
	key        trans key
	out
	nothing
	return
	For details, see MfSdkPedRet_E
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                 250. MfSdkPedGetTransKeyKvc


Prototype
	s32 MfSdkPedGetTransKeyKvc(s32 gid, s8* kvcBuf, s32 kvcBufLen)
	Function
	

Save the mksk trans key
	

Params
	in
	gid        max 100 group (0 ~ 99)
	kvcBufLen        kvc buffer length
	out
	kvcBuf        kvc(Length 4 bytes)
	return
	For details, see MfSdkPedRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                 251. MfSdkPedSaveEncryptedMKByTransKey  


Prototype
	s32 MfSdkPedSaveEncryptedMKByTransKey(u32 gid, u8* key, MfSdkPedDesMod_E mode, u8* kvc)
	Function
	

Save the encrypted main key by trans key
	



Params
	

in
	gid        max 100 group (0 ~ 99)
	key        encrypted main key by trans key
	mode        des mode(see 'MfSdkPedDesMod_E' enum)
	out
	kvc        kvc(Length 4 bytes)
	return
	For details, see MfSdkPedRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                    252. MfSdkPedDeleteTransKey


Prototype
	

s32 MfSdkPedDeleteTransKey(s32 gid)
	Function
	

Delete the mksk trans key
	Params
	in
	gid        max 100 group (0 ~ 99)
	

  



	out
	nothing
	return
	For details, see MfSdkPedRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                    253. MfSdkPedRebootCmd


Prototype
	

s32 MfSdkPedRebootCmd()
	Function
	

Reboot the external pinpad
	Params
	in
	nothing
	out
	nothing
	return
	For details, see MfSdkPedRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                    254. MfSdkPedGotoMainPage  


Prototype
	

s32 MfSdkPedGotoMainPage()
	Function
	

External pinpad Back to the main page
	Params
	in
	nothing
	out
	nothing
	return
	For details, see MfSdkPedRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                       255. MfSdkPedAesSavePlaintextKey




s32 MfSdkPedAesSavePlaintextKey(s32 type, s32 gid, const u8 * key,s32 length, u8*kvc)    
  

Function
	

Save the aes key
	





Params
	



in
	MFSDK_MKSK_AES_KEY_TMK -
type
MFSDK_MKSK_AES_KEY_TMK2_MAG
	gid        0 - 49
	key        keyblock value
	length        keyblock length
	out
	kvc
	return
	For details, see MfSdkPedRet_E.
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                       256. MfSdkPedTr31LoadAesKey  


Prototype
	s32 MfSdkPedTr31LoadAesKey(s32 gid, s32 keyType,const u8* data, s32 size, u8 checkvalue[4])
	Function
	

Three-level key system
	





Params
	



in
	gid        0 - 49
	MFSDK_MKSK_AES_KEY_TMK -
keyType
MFSDK_MKSK_AES_KEY_TMK2_MAG
	data
	size
	out
	checkvalue
	return
	For details, see MfSdkPedRet_E.
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                          257. MfSdkPedMkSkAesRun


Prototype
	s32 MfSdkPedMkSkAesRun(s32 type, s32 gid, MfSdkPedMod_E mode, u8 *ind, s32 size, u8 iv[16], u8 *outd, MfSdkPedDesMod_E
desMode)
	Function
	

use key aes operation
	Params
	in
	type        key type(0x08 -
	

  



	

	MFSDK_MKSK_AES_KEY_PINENC, 0x09 - MFSDK_MKSK_AES_KEY_MACENC, 0x0A - MFSDK_MKSK_AES_KEY_MAGENC ...
MFSDK_MKSK_AES_KEY_TMK2_MAG)
	gid        key grouping,max 50 group (0 - 49)
	mode        mode(see 'MfSdkPedMod_E' enum)
	ind        raw data
	size        data length (16-bytes multiple)
	iv        initialization vector
	desMode        des mode(see 'MfSdkPedDesMod_E' enum)
	out
	outd        calculation results
	return
	For details, see MfSdkPedRet_E.
	remark
	

	demo
	

	



10Communication module  
                                                                                                                                                                                                                                                                                                                                                                                          1. Module description
This module mainly includes communication APIs.


                                                                                                                                                                                                                                                                                                                                                                                          2. Module structure declaration
typedef struct
{


char
	ip[20];        /*IP
	address*/
	char
	gateway[30];
	/*Local gateway*/
	char
	mask[30];
	/*Local subnet mask*/
	char
	dns[30];
	/*DNS*/
	

  

                                                                                                                                                                                                                                                                                                                                                                                          3. Constant declarations
  

  

typedef enum  
{
MFSDK_COMM_SOCKET_INDEX_MIN = 0, MFSDK_COMM_SOCKET_INDEX_0 =
MFSDK_COMM_SOCKET_INDEX_MIN, MFSDK_COMM_SOCKET_INDEX_1, MFSDK_COMM_SOCKET_INDEX_2, MFSDK_COMM_SOCKET_INDEX_3, MFSDK_COMM_SOCKET_INDEX_4, MFSDK_COMM_SOCKET_INDEX_MAX  
}MfSdkCommSocketIndex_E;  


typedef enum
{
MFSDK_COMM_NET_ONLY_WIRELESS = 0,                // only wireless 0 MFSDK_COMM_NET_ONLY_WIFI,        // only wifi MFSDK_COMM_NET_ONLY_WIRELESS_1,                        // only
wireless 1 (Device not supported)
MFSDK_COMM_NET_ONLY_ETHERNET,        // ETHERNET
MFSDK_COMM_NET_FIRST_WIRELESS,        // wireless
priority
MFSDK_COMM_NET_FIRST_WIFI,        // wifi priority
}MfSdkCommNetSelect_E;


typedef MfSdkCommNetSelect_E MfSdkCommMode_E;


typedef enum
{
MFSDK_COMM_UART_COM0 = 0, MFSDK_COMM_UART_COM1, MFSDK_COMM_UART_COM2, MFSDK_COMM_UART_COM3, MFSDK_COMM_UART_COM4, MFSDK_COMM_UART_COM5, MFSDK_COMM_UART_COM6, MFSDK_COMM_UART_COM7, MFSDK_COMM_UART_COM8, MFSDK_COMM_UART_COM9, MFSDK_COMM_UART_COM10, MFSDK_COMM_UART_COM11, MFSDK_COMM_UART_COM12, MFSDK_COMM_UART_COM13, MFSDK_COMM_UART_COM14,
  

MFSDK_COMM_UART_COM15, MFSDK_COMM_UART_COM16, MFSDK_COMM_UART_COM17, MFSDK_COMM_UART_COM18, MFSDK_COMM_UART_COM19, MFSDK_COMM_UART_COM20, MFSDK_COMM_UART_COM21, MFSDK_COMM_UART_COM22, MFSDK_COMM_UART_COM23, MFSDK_COMM_UART_COM24, MFSDK_COMM_UART_COM25, MFSDK_COMM_UART_COM26, MFSDK_COMM_UART_COM27, MFSDK_COMM_UART_COM28, MFSDK_COMM_UART_COM29, MFSDK_COMM_UART_COM30,      
}MfSdkCommUart_E;


typedef enum
{
MFSDK_COMM_RET_FAILED = -3, //failed MFSDK_COMM_RET_BOUNDS = -2, //Array out-of-bounds MFSDK_COMM_RET_PARM_ERROR = -1, //check param MFSDK_COMM_RET_OK = 0,
}MfSdkCommRet_E;


typedef enum
{
MFSDK_COMM_ATCCPIN_FAIL = 0, //Failure MFSDK_COMM_ATCCPIN_LOCKED,        //locked MFSDK_COMM_ATCCPIN_NORMAL, //noraml MFSDK_COMM_ATCCPIN_PUK        //Puk
}MfSdkCommAtcCpin_E;


typedef enum
{
MFSDK_COMM_WIFI_STATE_CONNECT_PROCESS = -999,
MFSDK_COMM_WIFI_STATE_DISCONNECT_PROCESS = -998,
MFSDK_COMM_WIFI_STATE_CONNECT_START = -997,
MFSDK_COMM_WIFI_STATE_NOT_EXIST = -2,
MFSDK_COMM_WIFI_STATE_PWD_ERROR = -1,
MFSDK_COMM_WIFI_STATE_DISCONNECT = 0,
MFSDK_COMM_WIFI_STATE_CONNECT = 1,
  

}MfSdkCommWifiState_E;  


typedef enum
{
MFSDK_COMM_MOBILE_NO_SIGNAL = 0,
MFSDK_COMM_MOBILE_1G, //The 1st Generation Mobile Communication System  
MFSDK_COMM_MOBILE_2G, //The 2nd Generation Mobile Communication System
MFSDK_COMM_MOBILE_3G, //The 3rd Generation Mobile Communication System  
MFSDK_COMM_MOBILE_4G, //The 4th Generation Mobile Communication System
MFSDK_COMM_MOBILE_5G,//RFU The 5th Generation Mobile Communication System
MFSDK_COMM_MOBILE_6G,//RFU The 6th Generation Mobile Communication System
}MfSdkCommMobileGen_E;


typedef enum
{
MFSDK_COMM_IPV4 = 1,                //only ipv4 MFSDK_COMM_IPV6,        //only ipv6 MFSDK_COMM_IPV4_IPV6,        // both ipv4 and ipv6
}MfSdkCommIpVer_E;


typedef enum
{
MFSDK_COMM_ATC_OFF = 0, // turn off MFSDK_COMM_ATC_ON,        //turn on
}MfSdkCommAtcPowerState_E;


typedef enum
{
MFSDK_COMM_SIM_PROC_PPP_NETWORK_OK = 0, MFSDK_COMM_SIM_PROC_NETWORK_CONNECTED, MFSDK_COMM_SIM_PROC_NETWORK_REGISTER_NETOWK, MFSDK_COMM_SIM_PROC_SIM_NORMAL, MFSDK_COMM_SIM_PROC_SWITCHING_SIM, MFSDK_COMM_SIM_PROC_NO_SIM_CARD,


}MfSdkCommSimProcStatus_E;
  

typedef enum  
{
MFSDK_COMM_IPTYPE_V4,        // Get IP address type        IPv4 MFSDK_COMM_IPTYPE_V6,        // Get IP address type        IPv6
}MfSdkCommIpType_E;


                                                                                                                                                                                                                                                                                                                                                                                          4. MfSdkCommLinkState


Prototype
	

LIB_EXPORT MFSDKBOOL MfSdkCommLinkState(void)
	Function
	

Get net link state for both GPRS and Wifi
	Params
	in
	None
	out
	None
	return
	1        Linked
	0        Disconnect
	remark
	

	demo
	MFSDKBOOL linkState = MfSdkCommLinkState();
	                                                                                                                                                                                                                                                                                                                                                                                          5. MfSdkCommGetNetMode  


Prototype
	LIB_EXPORT MfSdkCommMode_E MfSdkCommGetNetMode(void)
	Function
	

Get Comm mode, Ref.MfSdkCommMode_E
	Params
	in
	None
	out
	None
	return
	NetMode        Ref.MfSdkCommMode_E
	remark
	

	demo
	s32 netMode = MfSdkCommGetNetMode();
	                                                                                                                                                                                                                                                                                                                                                                                             6. MfSdkCommAtcCell


Prototype  
	

LIB_EXPORT s32 MfSdkCommAtcCell(s32 index)
	

  

Function
	

get 1st net registered cell
	Params
	in
	index
	out
	None
	return
	Cell ID
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                             7. MfSdkCommAtcCellInfor  


Prototype
	LIB_EXPORT s32 MfSdkCommAtcCellInfor(s32 *cid, s32 size, s32
*num)
	Function
	

get net registered cell
	

Params
	in
	cid        buffer
	size        buffer size
	out
	num
	

return
	MFSDK_COMM_RE
Success
T_OK
	Other        Fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                8. MfSdkCommAtcCpin


Prototype
	LIB_EXPORT MfSdkCommAtcCpin_E MfSdkCommAtcCpin(s32 index)
	Function
	

get net registered cell
	Params
	in
	index        0~1
	out
	None
	



return
	MFSDK_COMM_ATCCPIN_FAI
Fail
L
	MFSDK_COMM_ATCCPIN_LO
Locked
CKED
	MFSDK_COMM_ATCCPIN_NO Normal
	

  



	RMAL
	MFSDK_COMM_ATCCPIN_PU
Puk
K
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                9. MfSdkCommAtcGetLocalIp


Prototype
	

LIB_EXPORT s32 MfSdkCommAtcGetLocalIp(s8* ip)
	Function
	

Get local ip
	Params
	in
	None
	out
	ip
	

return
	MFSDK_COMM_RE
Success
T_OK
	Other        Fail
	remark
	

	demo
	s8 ip[32] = {0};
s32 ret = MfSdkCommAtcGetLocalIp(ip);
	                                                                                                                                                                                                                                                                                                                                                                                                10. MfSdkCommAtcIccid  


Prototype
	

LIB_EXPORT const s8* MfSdkCommAtcIccid(s32 index)
	Function
	

Get index Integrate circuit card identity value
	Params
	in
	index        0~1
	out
	None
	return
	Icc ID
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                   11. MfSdkCommAtcImei


Prototype
	

LIB_EXPORT const s8* MfSdkCommAtcImei(s32 index)
	Function
	

Get Module imei
	Params
	in
	index        0~1
	out
	None
	return
	imei value
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                   12. MfSdkCommAtcImsi  


Prototype
	

LIB_EXPORT const s8* MfSdkCommAtcImsi(s32 index)
	Function
	

Get Module imsi
	Params
	in
	index        0~1
	out
	None
	return
	imsi value
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                      13. MfSdkCommAtcLac


Prototype
	

LIB_EXPORT s32 MfSdkCommAtcLac(s32 index)
	Function
	

Get net registered lac
	Params
	in
	index        GPRS/4G index 0-1
	out
	None
	return
	lac value
	remark
	

	

  

demo  


                                                                                                                                                                                                                                                                                                                                                                                                      14. MfSdkCommAtcGetMcc


Prototype
	

LIB_EXPORT s32 MfSdkCommAtcGetMcc(s32 index)
	Function
	

Get gprs MCC
	Params
	in
	index        use 0
	out
	None
	return
	lac value
	remark
	

	demo
	s32 mcc = MfSdkCommAtcGetMcc(0);
	                                                                                                                                                                                                                                                                                                                                                                                                      15. MfSdkCommAtcGetMnc  


Prototype
	

LIB_EXPORT s32 MfSdkCommAtcGetMnc(s32 index)
	Function
	

Get gprs MNC
	Params
	in
	index        use 0
	out
	None
	return
	lac value
	remark
	

	demo
	s32 mnc = MfSdkCommAtcGetMnc(0);
	                                                                                                                                                                                                                                                                                                                                                                                                         16. MfSdkCommAtcLacInfor


Prototype
	LIB_EXPORT s32 MfSdkCommAtcLacInfor(s32 *lac, s32 size, s32
*num)
	Function
	

Get net registered lac
	

Params
	in
	lac        buffer
	size        buffer size
	out
	num        lac num
	

  



return
	MFSDK_COMM_RE
Success
T_OK
	Other        Fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                         17. MfSdkCommAtcSignal


Prototype
	

LIB_EXPORT s32 MfSdkCommAtcSignal(s32 index)
	Function
	

Get Module signal
	Params
	in
	index        GPRS/4G index 0-1
	out
	None
	return
	0        Unregistered
	1 - 4        Signal, e.g. 1:1 grid signal
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                         18. MfSdkCommGetAtcGeneration  


Prototype
	LIB_EXPORT MfSdkCommMobileGen_E MfSdkCommGetAtcGeneration(s32 index)
	Function
	

Get the atc generation
	Params
	in
	index        sim index 0-1 (Single sim card select 0)
	out
	None
	return
	Ref. MfSdkCommMobileGen_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                            19. MfSdkCommGetAtcPower




LIB_EXPORT MfSdkCommAtcPowerState_E MfSdkCommGetAtcPower(void)    
  

Function
	

Get the atc power
	Params
	in
	None
	out
	None
	return
	Ref. MfSdkCommAtcPowerState_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                            20. MfSdkCommAtcSendCmd  


Prototype
	LIB_EXPORT s32 MfSdkCommAtcSendCmd(s8 * cmd,s8 * RecvData,s32 RecvSize,s32 timeout,s32 count)
	Function
	

Send and recv AT commend (4G module)
	



Params
	



in
	cmd        AT cmd
	RecvSize        size of recv buff
	timeout        Timeout unit: ms
	count        resend count
	out
	RecvData        recv buff
	return
	0        success
	other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                               21. MfSdkCommGetNetSelect


Prototype
	LIB_EXPORT MfSdkCommNetSelect_E MfSdkCommGetNetSelect(void)
	Function
	

Get mode of wifi or gprs or the Priority
	Params
	in
	None
	out
	None
	

return
	0        WIRELESS
	1        WIFI
	Other        Ref.MfSdkCommNetSelect_E
	

  

remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                               22. MfSdkCommGetOperateId


Prototype
	

LIB_EXPORT s32 MfSdkCommGetOperateId(void)
	Function
	Read the id of the working sim card(Only devices with two sim cards are supported)
	Params
	in
	None
	out
	None
	

return
	0        SIM 1
	1        SIM 2
	Other        Fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                               23. MfSdkCommGetWifiPower  


Prototype
	

LIB_EXPORT s32 MfSdkCommGetWifiPower(void)
	Function
	

Get the WiFi power
	Params
	in
	None
	out
	None
	return
	0        Power OFF
	1        Power ON
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                  24. MfSdkCommGsmGetSignal




Prototype        s32 MfSdkCommGsmGetSignal(void)  
  

Function
	

Get gsm signal
	Params
	in
	None
	out
	None
	return
	

	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                  25. MfSdkCommHttpDownload  


Prototype
	LIB_EXPORT s32 MfSdkCommHttpDownload(s8 *url, s8*fullpathfilename, s32 iscontinue, s32 nRetry)
	Function
	

HTTP download
	



Params
	

in
	url        url address
	fullpathfilename        The full name of the downloaded file
	iscontinue        1-sequel 0-download again
	nRetry        retry count
	out
	None
	

return
	MFSDK_COMM_RE
Success
T_OK
	Other        Fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                     26. MfSdkCommMbedtlsInit


Prototype
	LIB_EXPORT s32 MfSdkCommMbedtlsInit(s32 useSession, s32 logLevel)
	Function
	

if you use mbedtls ,need init mbedtls
	

Params
	in
	useSession
	logLevel
	out
	None
	return
	MFSDK_COMM_RE
Success
T_OK
	

  



	Other        Ref. MfSdkCommRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                     27. MfSdkCommNetLink


Prototype
	LIB_EXPORT s32 MfSdkCommNetLink(void * pfunc, char * apn, s32 timeover)
	Function
	

Connect Network
	

Params
	

in
	pfunc        Callback
	apn        GPRS apn
	timeover        Connection timeout
	out
	None
	

return
	MFSDK_COMM_RE
Success
T_OK
	Other        Fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                     28. MfSdkCommNetLinkWithUserInfo  


Prototype
	LIB_EXPORT s32 MfSdkCommNetLinkWithUserInfo( char * apn, char *user, char *pwd)
	Function
	

Connect Network
	

Params
	

in
	apn        GPRS apn
	user        GPRS apn user id
	pwd        GPRS apn user password
	out
	None
	

return
	MFSDK_COMM_RE
Success
T_OK
	Other        Fail
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                        29. MfSdkCommNetUnlink


Prototype
	

LIB_EXPORT s32 MfSdkCommNetUnlink(void)
	Function
	

Disconnect from the network
	Params
	in
	None
	out
	None
	

return
	MFSDK_COMM_RE
Success
T_OK
	Other        Fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                        30. MfSdkCommSetApMode  


Prototype
	LIB_EXPORT s32 MfSdkCommSetApMode(MfSdkCommIpVer_E mode)
	Function
	

set IPV version, should be called in main.c before network initial
	Params
	in
	mode        1:only IPV4; 2:only IPV6; 3:IPV4&IPV6
	out
	None
	

return
	MFSDK_COMM_RE
Success
T_OK
	Other        Ref. MfSdkCommRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                           31. MfSdkCommSetApnList


Prototype
	LIB_EXPORT s32
MfSdkCommSetApnList(MfSdkCommApnInfo_T apn_list[], s32 ncount)
	Function
	

	

  



Params
	in
	apn_list[]        APN operator corresponding list
	ncount        APN count
	out
	None
	

return
	MFSDK_COMM_RE
Success
T_OK
	Other        Ref. MfSdkCommRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                           32. MfSdkCommSetApnListMcc  


Prototype
	LIB_EXPORT s32
MfSdkCommSetApnListMcc(MfSdkCommApinfoMcc_T*apnlistMc c, s32 count)
	Function
	

Set APN MCC list.
	

Params
	in
	apn_list[]        APN operator corresponding list
	ncount        APN count
	out
	None
	

return
	MFSDK_COMM_RE
Success
T_OK
	Other        Ref. MfSdkCommRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                              33. MfSdkCommSetAtcPower


Prototype
	s32 MfSdkCommSetAtcPower(MfSdkCommAtcPowerState_E flag)
	Function
	

Set the atc power
	

Params
	in
	                                                                                                                                                                                                                                                                                                                                                                                                                              1. - Turn off atc,
flag
                                                                                                                                                                                                                                                                                                                                                                                                                              1. - Turn on atc
	out
	None
	

return
	MFSDK_COMM_RE
Success
T_OK
	Other        Ref. MfSdkCommRet_E
	

  

remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                              34. MfSdkCommSetInitApn


Prototype
	LIB_EXPORT s32 MfSdkCommSetInitApn(s8 *apn, s8 *user, s8
*pwd)
	Function
	

set gprs apn
	

Params
	

in
	apn        GPRS APN
	user        GPRS USER
	pwd        GRPS PASSWORD
	out
	None
	

return
	MFSDK_COMM_RE
Success
T_OK
	Other        Ref. MfSdkCommRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                              35. MfSdkCommSetNetMode  


Prototype
	

LIB_EXPORT s32 MfSdkCommSetNetMode(s32 mode)
	Function
	

Switch network switching mode
	Params
	in
	mode        Ref. MfSdkCommNetSelect_E
	out
	None
	

return
	MFSDK_COMM_RE
Success
T_OK
	Other        Ref. MfSdkCommRet_E
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                 36. MfSdkCommSetNetSelect


Prototype
	LIB_EXPORT s32
MfSdkCommSetNetSelect(MfSdkCommNetSelect_E index)
	Function
	

	Params
	in
	index        Ref. MfSdkCommNetSelect_E
	out
	None
	

return
	MFSDK_COMM_RE
Success
T_OK
	Other        Ref. MfSdkCommRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                 37. MfSdkCommSetWifiName  


Prototype
	

LIB_EXPORT s32 MfSdkCommSetWifiName(s32 mode)
	Function
	set wifi name, (WiFi version V5.1.2 and above support modify the wifi name)
	Params
	in
	mode        mode = 0: KM_AP, default: KM_(SN)
	out
	None
	

return
	MFSDK_COMM_RE
Success
T_OK
	Other        Ref. MfSdkCommRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                    38. MfSdkCommSocketClose


Prototype
	LIB_EXPORT s32
MfSdkCommSocketClose(MfSdkCommSocketIndex_E index)
	Function
	

Disconnect the server
	

  

Params
	in
	index        Sock index (0-4)
	out
	None
	

return
	MFSDK_COMM_RE
Success
T_OK
	Other        Ref. MfSdkCommRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                    39. MfSdkCommSocketConnect  


Prototype
	LIB_EXPORT s32
MfSdkCommSocketConnect(MfSdkCommSocketIndex_E index, char * ip, s32 port, s32 timeout, void *func)
	Function
	

Connect to the server
	





Params
	



in
	index
	Sock index (0-4)
	ip
	IP address
	port
	Port number
	timeout
	time-out period unit:ms
	func
	callback function
	out
	None
	return
	>=0
	Success
	<0
	Fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                       40. MfSdkCommSocketConnectPriority


Prototype
	

LIB_EXPORT s32 MfSdkCommSocketConnectPriority(s32 mode)
	Function
	

Set connect priority
	

Params
	in
	mode=0(priority ipv4),
mode
mode=1(priority ipv6)
	out
	None
	return
	MFSDK_COMM_RE
Success
T_OK
	

  



	Other        Ref. MfSdkCommRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                       41. MfSdkCommSocketCreate


Prototype
	LIB_EXPORT s32
MfSdkCommSocketCreate(MfSdkCommSocketIndex_E index)
	Function
	

Create socket
	Params
	in
	index        Sock index (0-4)
	out
	None
	return
	>=0        Success
	<0        Fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                       42. MfSdkCommSocketFifoResize  


Prototype
	LIB_EXPORT s32 MfSdkCommSocketFifoResize(s32 index, s32 size)
	Function
	

	

Params
	in
	index        Sock index (0-4)
	size
	out
	None
	return
	>=0        Success
	<0        Fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                          43. MfSdkCommSocketRecv




LIB_EXPORT s32    
MfSdkCommSocketRecv(MfSdkCommSocketIndex_E index,




	unsigned char * buff, s32 len, u32 timeover)
	Function
	

Receive data
	

Params
	in
	index        Sock index (0-4)
timeover        Receive timeout
	out
	buff        Receive buffer
	len        Receive length
	

return
	>0        Receive length
	0        Timeout
	-1        Network disconnection
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                          44. MfSdkCommSocketSend  


Prototype
	LIB_EXPORT s32
MfSdkCommSocketSend(MfSdkCommSocketIndex_E index, u8* buff, s32 size)
	Function
	

Send data
	

Params
	

in
	index        Sock index (0-4)
	buff        Send buff
	len        Send length
	out
	None
	return
	>=0        Success
	<0        Fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                             45. MfSdkCommSslAuthMode


  

Prototype
________________
LIB_EXPORT s32
MfSdkCommSslAuthMode(MfSdkCommSocketIndex_E index, s32 authMode)  
  

Function
	

Set the certificate verification mode.
	





Params
	



in
	index        Sock index (0-4)
	Ref.
MBEDTLS_SSL_VERIFY_NONE
authMode MBEDTLS_SSL_VERIFY_OPTIONAL MBEDTLS_SSL_VERIFY_REQUIRED MBEDTLS_SSL_VERIFY_UNSET
	out
	None
	

return
	MFSDK_COMM_RE
Success
T_OK
	Other        Ref. MfSdkCommRet_E
	remark
	

	



demo
	s32 sock = MfSdkCommSocketCreate(MFSDK_COMM_SOCKET_INDEX_1); MfSdkCommSslAuthMode(sock,MBEDTLS_SSL_VERIFY_OPTIONAL); MfSdkCommSslInit(sock, "xxxx\\ca.pem", "xxxx\\cli.crt", "xxxx\\pri.key", 1); s32 ret = MfSdkCommSslConnect(sock,
"a2d911mzqj2e50-ats.iot.ap-south-1.amazonaws.com", 8883,NULL);
if(ret != MFSDK_COMM_RET_OK) {MfSdkCommSocketClose(sock); }
	                                                                                                                                                                                                                                                                                                                                                                                                                                             46. MfSdkCommSslClose  


Prototype
	LIB_EXPORT s32
MfSdkCommSslClose(MfSdkCommSocketIndex_E index)
	Function
	

Close handle
	Params
	in
	index        Sock index (0-4)
	out
	None
	

return
	MFSDK_COMM_RE
Success
T_OK
	Other        Ref. MfSdkCommRet_E
	remark
	

	



demo
	s32 sock = MfSdkCommSocketCreate(MFSDK_COMM_SOCKET_INDEX_1); MfSdkCommSslAuthMode(sock,MBEDTLS_SSL_VERIFY_OPTIONAL); MfSdkCommSslInit(sock, "xxxx\\ca.pem", "xxxx\\cli.crt", "xxxx\\pri.key", 1); s32 ret = MfSdkCommSslConnect(sock,
"a2d911mzqj2e50-ats.iot.ap-south-1.amazonaws.com", 8883,NULL);
if(ret != MFSDK_COMM_RET_OK) {MfSdkCommSocketClose(sock); }
	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                47. MfSdkCommSslConnect


Prototype
	LIB_EXPORT s32
MfSdkCommSslConnect(MfSdkCommSocketIndex_E index, char
* ip, s32 port, void *func)
	Function
	

Connect to the server
	





Params
	



in
	index        Sock index (0-4)
	ip        IP address
	port        Port number
	callback function
func
int (*connect_server_func)(void);
	out
	None
	

return
	MFSDK_COMM_RET_
Success
OK
	MFSDK_COMM_RET_F
Fail
AILED
	remark
	

	



demo
	s32 sock = MfSdkCommSocketCreate(MFSDK_COMM_SOCKET_INDEX_1); MfSdkCommSslAuthMode(sock,MBEDTLS_SSL_VERIFY_OPTIONAL); MfSdkCommSslInit(sock, "xxxx\\ca.pem", "xxxx\\cli.crt", "xxxx\\pri.key", 1); s32 ret = MfSdkCommSslConnect(sock,
"a2d911mzqj2e50-ats.iot.ap-south-1.amazonaws.com", 8883,NULL);
if(ret != MFSDK_COMM_RET_OK) {MfSdkCommSocketClose(sock); }
	                                                                                                                                                                                                                                                                                                                                                                                                                                                48. MfSdkCommSslInit  


Prototype
	LIB_EXPORT s32 MfSdkCommSslInit(MfSdkCommSocketIndex_E index, char * cacert, char * clientcert, char * clientkey, s32 level)
	Function
	

	





Params
	



in
	index        Sock index (0-4)
	cacert        Cacert path
	clientcert        Clientcert path
	clientkey        Clientkey path
	level        Log level default value is 1
	out
	None
	return
	MFSDK_COMM_RET_ Success
	

  



	OK
	MFSDK_COMM_RET_F
Fail
AILED
	remark
	

	



demo
	s32 sock = MfSdkCommSocketCreate(MFSDK_COMM_SOCKET_INDEX_1); MfSdkCommSslAuthMode(sock,MBEDTLS_SSL_VERIFY_OPTIONAL); MfSdkCommSslInit(sock, "xxxx\\ca.pem", "xxxx\\cli.crt", "xxxx\\pri.key", 1); s32 ret = MfSdkCommSslConnect(sock,
"a2d911mzqj2e50-ats.iot.ap-south-1.amazonaws.com", 8883,NULL);
if(ret != MFSDK_COMM_RET_OK) {MfSdkCommSocketClose(sock); }
	                                                                                                                                                                                                                                                                                                                                                                                                                                                   49. MfSdkCommSslSetHostname  


Prototype
	LIB_EXPORT s32
MfSdkCommSslSetHostname(MfSdkCommSocketIndex_E index , const char * cn)
	Function
	

Set ssl host name
	Params
	in
	index        Sock index (1-4)
	out
	cn        Host name
	

return
	MFSDK_COMM_RE
success
T_OK
	MFSDK_COMM_RE
failed
T_FAILED
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                      50. MfSdkCommSslMbedtls


Prototype
	

LIB_EXPORT s32 MfSdkCommSslMbedtls(s32 mbedtls)
	Function
	

Whether to use mbedtls.
	Params
	in
	mbedtls        1 - enable        0-disable
	out
	None
	return
	MFSDK_COMM_RE
success
T_OK
	

  

remark
	

	demo
	MfSdkCommSslMbedtls(1);
	                                                                                                                                                                                                                                                                                                                                                                                                                                                      51. MfSdkCommSslRecv


Prototype
	LIB_EXPORT s32
MfSdkCommSslRecv(MfSdkCommSocketIndex_E index, char * pdata, s32 size)
	Function
	

Use new API MfSdkCommSocketRecv pls.
	

Params
	in
	index        Sock index (0-4)
	size
	out
	pdata        recv data
	return
	>=0        Success
	<0        Fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                      52. MfSdkCommSslSend  


Prototype
	LIB_EXPORT s32
MfSdkCommSslSend(MfSdkCommSocketIndex_E index, char * pdata, s32 size)
	Function
	

Use new API MfSdkCommSocketSend pls.
	

Params
	

in
	index        Sock index (0-4)
	size        send data size
	pdata        send data
	out
	

	return
	

	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                         53. MfSdkCommSslSend2


Prototype
	LIB_EXPORT s32 MfSdkCommSslSend2(s32 index, char * pdata, s32 size)
	Function
	

Use new API MfSdkCommSocketSend pls.
	

Params
	in
	index        Sock index (0-4)
	size        send data size
	pdata        send data
	out
	

	return
	

	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                         54. MfSdkCommUartClear  


Prototype
	LIB_EXPORT s32 MfSdkCommUartClear(MfSdkCommUart_E nCom)
	Function
	

Clear uart fifo buff
	Params
	in
	nCom        For details, see MfSdkCommUart_E.
	out
	None
	

return
	MFSDK_COMM_RE
success
T_OK
	other        fail
	remark
	

	



demo
	if(MfSdkCommUartClear(MFSDK_COMM_UART_COM10)==MFSDK_COMM_RE T_OK)
{
//clear succ
}
	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                            55. MfSdkCommUartClose


Prototype
	LIB_EXPORT s32 MfSdkCommUartClose(MfSdkCommUart_E nCom)
	Function
	

close uart port
	Params
	in
	nCom        For details, see MfSdkCommUart_E.
	out
	None
	

return
	MFSDK_COMM_RE
success
T_OK
	other        fail
	remark
	

	



demo
	if(MfSdkCommUartClose(MFSDK_COMM_UART_COM10)==MFSDK_COMM_R ET_OK)
{
//close succ
}
	                                                                                                                                                                                                                                                                                                                                                                                                                                                            56. MfSdkCommUartGetRxBufLength  


Prototype
	LIB_EXPORT s32
MfSdkCommUartGetRxBufLength(MfSdkCommUart_E nCom)
	Function
	

Get receive buff len
	Params
	in
	nCom        For details, see MfSdkCommUart_E.
	out
	None
	return
	>=0        receive buff len
	remark
	

	

demo
	if(MfSdkCommUartGetRxBufLength(MFSDK_COMM_UART_COM10) > 0)
{
//TODO RECV
}
	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                               57. MfSdkCommUartOpen


Prototype
	LIB_EXPORT s32 MfSdkCommUartOpen(MfSdkCommUart_E nCom, u32 nBaud,u32 nData,u32 nStop,u32 nParity)
	Function
	

open uart port
	





Params
	



in
	nCom        For details, see MfSdkCommUart_E.
	nBaud        Baud rate
	nData        Data bits
	nStop        Stop bits
	nParity        Parity
	out
	None
	return
	MFSDK_COMM_RE
success
T_OK
	remark
	

	



demo
	s32 ret = MfSdkCommUartOpen(MFSDK_COMM_UART_COM10, 115200, 8, 0,
0);
if(ret == MFSDK_COMM_RET_OK)
{
//TODO
}
	                                                                                                                                                                                                                                                                                                                                                                                                                                                               58. MfSdkCommUartRecv  


Prototype
	LIB_EXPORT s32 MfSdkCommUartRecv(MfSdkCommUart_E nCom, u8* pBuffer, u32 nLength, s32 timeout)
	Function
	

receive uart port data
	

Params
	

in
	nCom        For details, see MfSdkCommUart_E.
	nLength        recv length
	timeout        time-out period
	out
	pBuffer        recv buffer
	return
	>=0        receive data len
	remark
	

	

demo
	u8 recvBuf[512] = {0}; if(MfSdkCommUartRecv(MFSDK_COMM_UART_COM10,recvBuf,512,10000)>0)
{
	

  

//receive succ  
}


                                                                                                                                                                                                                                                                                                                                                                                                                                                                  59. MfSdkCommUartSend


Prototype
	LIB_EXPORT s32 MfSdkCommUartSend(MfSdkCommUart_E nCom, u8* pBuffer, u32 nLength)
	Function
	

send uart port data
	

Params
	

in
	nCom        For details, see MfSdkCommUart_E.
	pBuffer        send buffer
	nLength        send buffer length
	out
	None
	return
	>=0        send data len
	remark
	

	



demo
	u8 sendBuf[512] =”12345678”;
if(MfSdkCommUartSend(MFSDK_COMM_UART_COM10,sendBuf,8)==8)
{
//send succ
}
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                  60. MfSdkCommUartSetupComm  


Prototype
	LIB_EXPORT s32
MfSdkCommUartSetupComm(MfSdkCommUart_E nCom , u8* buffer , s32 size)
	Function
	

set uart comm buffer size.Generally do not set
	

Params
	

in
	nCom        For details, see MfSdkCommUart_E.
	buffer        buffer uart comm buffer handler
	size        buffer size
	out
	None
	return
	MFSDK_COMM_RE
success
T_OK
	remark
	

	

demo
	u8 buf[512] ={4096};
if(MfSdkCommUartSetupComm(MFSDK_COMM_UART_COM10,buf,4096)==MF SDK_COMM_RET_OK)
	

  

{  
//TODO
}


                                                                                                                                                                                                                                                                                                                                                                                                                                                                     61. MfSdkCommWifiClearListApNum


Prototype
	

LIB_EXPORT s32 MfSdkCommWifiClearListApNum(void)
	Function
	

Clear wifi ap list
	Params
	in
	None
	out
	None
	return
	MFSDK_COMM_RE
success
T_OK
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                     62. MfSdkCommWifiGetApMac  


Prototype
	

LIB_EXPORT s8 *MfSdkCommWifiGetApMac(void)
	Function
	

Get Wifi AP MAC
	Params
	in
	None
	out
	None
	return
	AP Mac
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                        63. MfSdkCommWifiGetChannel


Prototype
	

LIB_EXPORT s32 MfSdkCommWifiGetChannel(void)
	Function
	

Get wifi channel
	

  

Params
	in
	None
	out
	None
	return
	wifi channel
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                        64. MfSdkCommWifiGetLinkState


Prototype
	LIB_EXPORT MfSdkCommWifiState_E MfSdkCommWifiGetLinkState(void)
	Function
	

Get connection status
	Params
	in
	None
	out
	None
	return
	Ref. MfSdkCommWifiLinkState_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                        65. MfSdkCommWifiGetLocalip  


Prototype
	

s8* MfSdkCommWifiGetLocalip(void)
	Function
	

Get Local IP
	Params
	in
	None
	out
	None
	return
	wifi ip
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                           66. MfSdkCommWifiGetLocalMac




Prototype        LIB_EXPORT s8* MfSdkCommWifiGetLocalMac(void)  
  

Function
	

Get Wifi Mac
	Params
	in
	None
	out
	None
	return
	wifi mac
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                           67. MfSdkCommWifiGetRssi  


Prototype
	

LIB_EXPORT s32 MfSdkCommWifiGetRssi(void)
	Function
	

Get Wifi Rssi
	Params
	in
	None
	out
	None
	return
	wifi rssi
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                              68. MfSdkCommWifiGetSignal


Prototype
	

LIB_EXPORT s32 MfSdkCommWifiGetSignal(void)
	Function
	

Get Wifi Signal
	Params
	in
	None
	out
	None
	return
	wifi signal
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                              69. MfSdkCommWifiGetSsid


Prototype
	

LIB_EXPORT s8* MfSdkCommWifiGetSsid(void)
	Function
	

Get Wifi Ssid
	Params
	in
	None
	out
	None
	return
	wifi ssid
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                              70. MfSdkCommWifiLinkAp  


Prototype
	LIB_EXPORT s32
MfSdkCommWifiLinkAp(MfSdkCommWifiApList_T *apList, s8
*pwd)
	Function
	

Connect to WiFi
	

Params
	in
	apList        MfSdkCommWifiApList_T item
	pwd        wifi password
	out
	None
	

return
	MFSDK_COMM_RE
success
T_OK
	other        failed
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 71. MfSdkCommWifiListAp


Prototype
	LIB_EXPORT s32
MfSdkCommWifiListAp(MfSdkCommWifiApList_T *apList)
	Function
	

Get the router list
	Params
	in
	None
	

  



	

out
	Router list data, The ap_list space is allocated by
apList        the caller with an array size of 10/30(Soundbox 10,traditional POS 30)
	return
	Number of routers
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 72. MfSdkCommWifiListApQuit


Prototype
	

LIB_EXPORT s32 MfSdkCommWifiListApQuit(void)
	Function
	

quit the router list
	Params
	in
	None
	out
	None
	return
	MFSDK_COMM_RE
success
T_OK
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 73. MfSDkCommWifiListNetWork  


Prototype
	LIB_EXPORT s32
MfSDkCommWifiListNetWork(MfSdkCommWifiApList_T *apList)
	Function
	

Get the router save ap list
	

Params
	in
	None
	

out
	Router list data, The ap_list space is allocated by
apList        the caller with an array size of 10/30(Soundbox 10,traditional POS 30)
	return
	

	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    74. MfSdkCommWifiRemoveNetWorkAp


Prototype
	

LIB_EXPORT s32 MfSdkCommWifiRemoveNetWorkAp(s8* ssid)
	Function
	

Remove Wifi Ap
	Params
	in
	ssid        Wifi Ap
	out
	None
	return
	MFSDK_COMM_RE
success
T_OK
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    75. MfSdkCommWifiSetPower  


Prototype
	

LIB_EXPORT s32 MfSdkCommWifiSetPower(s32 flag)
	Function
	

Set the WiFi power
	Params
	in
	flag        0 - Turn off wifi power; 1 - Turn on wifi power
	out
	None
	

return
	MFSDK_COMM_RE
Success
T_OK
	other
	failed
	remark
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       76. MfSdkCommWifiSetScan


Prototype
	

LIB_EXPORT s32 MfSdkCommWifiSetScan(s32 flag)
	Function
	

Start scan wifi
	

Params
	in
	0:stop scan 1:auto scan one time 2:scan
flag
immediately one time
	out
	None
	

  



return
	MFSDK_COMM_RE
success
T_OK
	other
	failed
	remark
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       77. MfSdkCommWifiUnlinkAp


Prototype
	

LIB_EXPORT s32 MfSdkCommWifiUnlinkAp(s8* ssid)
	Function
	

Unlink wifi ap
	Params
	in
	ssid        wifi ap
	out
	None
	

return
	MFSDK_COMM_RE
success
T_OK
	other
	failed
	remark
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       78. MfSdkCommSet4gMode  


Prototype
	

LIB_EXPORT s32 MfSdkCommSet4gMode(void)
	Function
	

set net to 4G mode
	Params
	in
	None
	out
	None
	return
	MFSDK_COMM_RE
Success
T_OK
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          79. MfSdkCommWifiCheckState




Prototype        LIB_EXPORT s32 MfSdkCommWifiCheckState(void)  
  

Function
	

check wifi state
	Params
	in
	None
	out
	None
	return
	1        Success
	Other        Fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          80. MfSdkCommWifiStartConfig  


Prototype
	

LIB_EXPORT s32 MfSdkCommWifiStartConfig(void)
	Function
	

start config wifi
	Params
	in
	None
	out
	None
	return
	MFSDK_COMM_RE
Success
T_OK
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             81. MfSdkCommUartInit


Prototype
	

LIB_EXPORT void MfSdkCommUartInit(void)
	Function
	

init device uart
	Params
	in
	None
	out
	None
	return
	

	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             82. MfSdkCommLanCableCheck


Prototype
	

LIB_EXPORT s32 MfSdkCommLanCableCheck(void)
	Function
	

Whether the device is connected to a network cable
	Params
	in
	None
	out
	None
	return
	0        unconnected
	1        connected
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             83. MfSdkCommLanSetDHCP  


Prototype
	

LIB_EXPORT s32 MfSdkCommLanSetDHCP(int mod)
	Function
	

Set whether to enable DHCP
	

Params
	in
	1 enable,
mod
0 disenable
	out
	None
	

return
	MFSDK_COMM_RE
Success
T_OK
	Other        Ref. MfSdkCommRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                84. MfSdkCommLanIsDHCP


Prototype
	

LIB_EXPORT s32 MfSdkCommLanIsDHCP()
	Function
	

Whether to enable DHCP
	

  

Params
	in
	None
	out
	None
	

return
	0        disenable
	1        enable
	Other        Ref. MfSdkCommRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                85. MfSdkCommLanCfg  


Prototype
	LIB_EXPORT void MfSdkCommLanCfg(const MfSdkCommLanCfg_T *lanCfg)
	Function
	

Configuring Ethernet
	Params
	in
	lanCfg        Configuring Ethernet
	out
	None
	return
	Nothing
	remark
	

	demo
	

	



                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   86. MfSdkCommGetSwitchSimProcStatus


Prototype
	LIB_EXPORT MfSdkCommSimProcStatus_E MfSdkCommGetSwitchSimProcStatus()
	Function
	

get the status of the sim card switchover
	Params
	in
	None
	out
	None
	return
	For details, see MfSdkCommSimProcStatus_E
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   87. MfSdkCommSetOperateIdTask


Prototype
	

LIB_EXPORT s32 MfSdkCommSetOperateIdTask(s32 val)
	Function
	set the id of the working sim card(nonblocking)(Only devices with two sim cards are supported)
	

Params
	in
	0: sim 1,
value
1: sim 2
	out
	None
	return
	>=0        Success
	Other        Fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   88. MfSdkCommWifiPageInitMode  


Prototype
	LIB_EXPORT void MfSdkCommWifiPageInitMode(void* state,int mode)
	Function
	

init wifi logo
	

Params
	in
	state        lv_obj_t*
	mode        logo color 0-black ,1-white
	out
	None
	return
	None
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      89. MfSdkCommWifiPageInit


Prototype
	LIB_EXPORT void MfSdkCommWifiPageInit(void* obj, int align, int x_ofs, int y_ofs)
	Function
	

init wifi page.
	Params
	in
	obj        lv_obj_t*
	

  



	

	align        ref. lv_align_t
	x_ofs        x offset
	y_ofs        y offset
	out
	None
	return
	None
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      90. MfSdkCommAtcPageInit  


Prototype
	LIB_EXPORT void MfSdkCommAtcPageInit(void* obj, int align, int x_ofs, int y_ofs)
	Function
	

init gprs page
	



Params
	

in
	obj        lv_obj_t*
	align        ref. lv_align_t
	x_ofs        x offset
	y_ofs        y offset
	out
	None
	return
	None
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         91. MfSdkCommAtcPageInitMode


Prototype
	LIB_EXPORT void MfSdkCommAtcPageInitMode(void* state,int mode)
	Function
	

init GSM logo
	

Params
	in
	state        lv_obj_t*
	mode        logo color 0-black ,1-white
	out
	None
	return
	None
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         92. MfSdkCommLanEnable


Prototype
	

LIB_EXPORT s32 MfSdkCommLanEnable();
	Function
	

enable Ethernet
	

Params
	in
	None
	out
	None
	return
	For details, see MfSdkCommRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         93. MfSdkCommLanDisenable  


Prototype
	

LIB_EXPORT s32 MfSdkCommLanEnable();
	Function
	

disenable Ethernet
	

Params
	in
	None
	out
	None
	return
	For details, see MfSdkCommRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            94. MfSdkCommAtcGetIp


Prototype
	LIB_EXPORT s32 MfSdkCommAtcGetIp(MfSdkCommIpType_E ipType, s8* ip ,s32 length)
	Function
	

Get local IP, default IPv4
	

Params
	in
	ipType        IPv4/IPv6
	length        ip buffer size
	out
	ip        ip buffer
	

  

return
	> 0        ip length
	other        failed
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            95. MfSdkCommLanGetEthernetPower


Prototype
	

LIB_EXPORT s32 MfSdkCommLanGetEthernetPower(void);
	Function
	

Get Ethernet Power
	Params
	in
	None
	out
	None
	return
	1        Turn on
	0        Turn off
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            96. MfSdkCommLanSetEthernetPower  


Prototype
	

LIB_EXPORT s32 MfSdkCommLanSetEthernetPower(s32 flag);
	Function
	

Set Ethernet Power
	Params
	in
	flag        0 - Turn off , 1 - Turn on
	out
	None
	return
	For details, see MfSdkCommRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               97. MfSdkCommLanChipExist




Prototype        LIB_EXPORT s32 MfSdkCommLanChipExist()  
  

Function
	

Check if the device has a WiFi chip
	Params
	in
	None
	out
	None
	return
	1        Have WiFi chip
	0        No WiFi chip
	remark
	

	demo
	

	



                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               98. MfSdkCommWifiChipExist  


Prototype
	

LIB_EXPORT s32 MfSdkCommWifiChipExist()
	Function
	

Check if the device has a Ethernet chip
	Params
	in
	None
	out
	None
	return
	1        Have Ethernet chip
	0        No Ethernet chip
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  99. MfSdkCommAtcSetNetMode


Prototype
	

LIB_EXPORT void MfSdkCommAtcSetNetMode(s32 mode)
	Function
	

Set network mode
	

Params
	in
	0 = "AUTO";1        = "only 2G";2 = "only 3G"; 3 =
mode
"only 4G";4 = "2G_3G";5 = "2G_3G_4G";
	out
	None
	return
	None
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  100. MfSdkCommAtcSendAtCmd


Prototype
	LIB_EXPORT s32 MfSdkCommAtcSendAtCmd(s8* cmd, s32 timeover, s8* retstr, s32 len, s32 count)
	Function
	

Send AT command
	



Params
	



in
	cmd        at cmd
	timeover        timeover(ms)
	len        AT cmd len
	count        retry count
	out
	retstr        Returned data
	return
	0        Success
	Other        Failure
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  101. MfSdkCommLanGetIpAndMask  


Prototype
	LIB_EXPORT s32 MfSdkCommLanGetIpAndMask(s8* ip, s8* Mask);
	Function
	

Get Ethernet IP and mask
	

Params
	out
	ip        ip info
	Mask        mask info
	in
	None
	return
	0        Success
	Other        Failure
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     102. MfSdkCommLanGetGateway




Prototype        LIB_EXPORT s32 MfSdkCommLanGetGateway(s8* gateway)  
  

Function
	

Gateway Gateway info
	Params
	in
	None
	out
	Gateway        Gateway info
	return
	0        Success
	Other        Failure
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     103. MfSdkCommLanGetDns  


Prototype
	LIB_EXPORT s32 MfSdkCommLanGetDns(s8 dnsArr[][64], s32 dnsArrCount);
	Function
	

Get Ethernet DNS
	Params
	in
	dnsArrCount        dns array count
	out
	dnsArr        dns info
	return
	>0        Success,count of DNS
	Other        Failure
	remark
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        104. MfSdkCommLanGetMac


Prototype
	

LIB_EXPORT s32 MfSdkCommLanGetMac(s8* mac);
	Function
	

Get Ethernet mac
	Params
	in
	None
	out
	mac        mac info
	return
	0        Success
	Other        Failure
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        105. MfSdkCommConfigReset


Prototype
	

LIB_EXPORT void MfSdkCommConfigReset(void);
	Function
	

Reply to network connection status
	Params
	in
	None
	out
	None
	return
	None
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        106. MfSdkCommWifiStopConfig  


Prototype
	

LIB_EXPORT void MfSdkCommWifiStopConfig(void);
	Function
	

WIFI stop config network
	Params
	in
	None
	out
	None
	return
	None
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           107. MfSdkCommWifiRestart


Prototype
	

LIB_EXPORT void MfSdkCommWifiRestart(void)
	Function
	

Restart the WiFi module only for ET389
	Params
	in
	None
	out
	None
	return
	None
	remark
	

	

  

demo  


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           108. MfSdkCommSetPingAddr


Prototype
	

LIB_EXPORT s32 MfSdkCommSetPingAddr(u8* addr);
	Function
	

Set ping address
	Params
	in
	addr        address.example:"www.baidu.com"
	out
	None
	return
	0        Success
	Other        Failure
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           109. MFSdkCommSocketGetModelType  


Prototype
	LIB_EXPORT int MFSdkCommSocketGetModelType(int socket_index);
	Function
	

Get current model type
	Params
	in
	socket_index        socket index
	out
	None
	return
	0        WIRELESS
	1        WIFI
	remark
	

	demo
	

	

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              11. EMV module
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              1. Module description
This module mainly includes EMV setting.
  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              2. Module structure declaration
typedef struct  
{
u8 cTranType;// 00 sale 09 cashback
u8 szAmt [12+1];
u8 szOtherAmt[12+1];
u8 cReadCardMode;// refer to MfSdkCardMode . Can be combined , 0x07 is all  
u8 cPinInput;        // u8 cPinMinLen;  
u8 cPinMaxLen; u8 cKeyPid;//
SEC_DUKPT_FIELD,SEC_MKSK_FIELD,SEC_FIXED_FIELD


u8 cDukptPinIndex; u8 cDukptDataIndex;
u8 cDesMode;        //DES_MODE_ECB,DES_MODE_CBC u8 cMKSKPinIndex;
u8 cPinFormat; //refer to SEC_PIN_FORMAX in libapi_security.h u8 cBypassPin;
}sdk_read_card_in;


typedef struct
{
u8 cCardType; u8 szPan[22];
u8 szPinBlock[16+1]; u8 szPinKSN[10+1];
u8 szDataKSN[10+1];
u8 szTrack2[SDK_TRACK_MAX_LENTH]; u8 cTrack2Len;
u8 szTrack3[SDK_TRACK_MAX_LENTH]; u8 cTrack3Len;
u8 cEmvClsMode;
u8 szServiceCode[3+1]; u8 cClsCvmMethod; u16 nErrCode;
}sdk_read_card_out;


ypedef struct {
u8 szRid[5];        //tag 9f06
u8 cCapkIndex;        //tag 9f22
  

u8 szCapkExpire[4];        //tag df05  
u8 cCapkHashFlag;        //tag df06
u8 cCapkFlag;        //tag df07
u8 szCapkMod[248];        //tag df02
u8 cCapkModLen;                //szCAPKMod len u8 szCapkExponent[3];        //tag df04  
u8 cCapkExpLen;        //szCAPKExponent len u8 szCapkCheckSum3[20];                //tag df03
u8 cCheckSumLen;        //szCAPKCheckSum3 len
}MfSdkEmvCapkInfo_T;


typedef st_read_card_in        MfSdkEmvReadCardIn_T; typedef st_read_card_out MfSdkEmvReadCardOut_T; typedef card_magtek_track_info MfSdkEmvTrackInfo_T; typedef AID_STRU MfSdkEmvAidSt_T;  


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              3. Constant declarations
  



#define MODE_API_PBOC
	0x01
	///< pboc
	#define MODE_API_VCPS
	0x02
	///< vcps
	#define MODE_API_MSD
	0x04
	///< msd
	#define MODE_API_AMEX
	0x40
	///< AMEX
	#define MODE_API_M_CHIP
	0x21
	///< MasterCard
	CHIP mode
#define MODE_API_M_STRIPE        0x22        ///< MasterCard MagStripe mode
#define MODE_API_R_LEGACY        0x23        ///< RUPAY LEGACY mode
#define MODE_API_R_NON_LEGACY 0x24        ///< RUPAY NON LEGACY mode
#define MODE_API_EMV_MODE        0x25        ///< EMV_MODE
(for AMEX)
	#define MODE_API_MS_MODE (for AMEX)
#define MODE_API_MOBILE_MODE mobile_MODE        (for amex)
	0x26


0x27
	///< MS_MODE


///<
	// application TLV TAG


#define APP_TAG_DF8A01_AIDOTHERTLV
"\xDF\x8A\x01"        // aid other tlv
	

  

#define APP_TAG_DF8A02_FORCEONLINE  
"\xDF\x81\x02"        //0:no forced online; 1:forced online(TVR) 2:foced online (request ARQC in case of TC)
#define DEF_TAG_AID_MCHIP_OTHER_PARAM "\xDF\x84\x06"        //AID other Contact
#define DEF_TAG_AID_RF_OTHER_PARAM "\xDF\x84\x07"        //AID other contactless  
#define DEF_TAG_TAP_MODE        "\xDF\x84\x08"
//tap mode (1-long tap        2-second tap)
#define DEF_TAG_CONTACTLESS_REFUN_CONFIG
"\xDF\x84\x0A"        // Contactless Refund Config #define APP_TAG_DF810C_KERNELID "\xDF\x81\x0C"                // Kernel ID  
#define SDK_TRACK_MAX_LENTH        144
enum
{
SDK_QPBOC_VER=0, SDK_VISA_VER, SDK_MASTER_VER, SDK_AMEX_VER, SDK_DPAS_VER, SDK_RUPAY_VER,
}SDK_KERNEL_VER;
enum
{
SDK_KERNELID_MASTER = 0x02, SDK_KERNEID_VISA, SDK_KERNELID_AMEX, SDK_KERNELID_JCB, SDK_KERNELID_DISCOVER, SDK_KERNELID_UNIONPAY, SDK_KERNELID_SIBS, SDK_KERNELID_PURE,


}SDK_KERNEL_ID;


enum
{
MSG_SELECT_APP, MSG_ONLINE_PIN, MSG_OFFLINE_PIN, MSG_OFFLINE_PIN_RETRY_COUNT,
  

MFSDK_EMV_MSG_DISPLAY_CARD_NO, // display card no. MFSDK_EMV_MSG_SET_PUREAMT_BEFOREGPO,  
}CALLBACK_MSG;


enum
{
MFSDK_EMV_CARD_RET_QUIT, ///< quit MFSDK_EMV_CARD_RET_INPUT,///< input MFSDK_EMV_CARD_MAGTEK,                ///< magstripe card MFSDK_EMV_CARD_ICC,                ///< ICC MFSDK_EMV_CARD_RFID,        ///< RF    
}MfSdkEmvReadCardMode_E;


enum
{
MFSDK_EMV_CARD_PROC_RET_TC = 0,        ///< TC (offine approve)
MFSDK_EMV_CARD_PROC_RET_ARQC = 1,        ///< ARQC(online
require)
MFSDK_EMV_CARD_PROC_RET_AAC = -11, ///< AAC(offline
declined)
MFSDK_EMV_CARD_PROC_RET_TERM = - 2,        ///< Terminate MFSDK_EMV_CARD_PROC_RET_CANCEL = -3, // User cancel MFSDK_EMV_CARD_PROC_RET_TIMEOUT = -4,        //Timeout
MFSDK_EMV_CARD_PROC_RET_FORCEIC = -5,        //Transaction
force IC
MFSDK_EMV_CARD_PROC_RET_OTHER = -6,        //Contactless
turn to other interface
MFSDK_EMV_CARD_PROC_RET_FALLBACK = -7, // Fallback MFSDK_EMV_CARD_PROC_RET_SEEPHONE = -8,        // See
Phone and Retry
MFSDK_EMV_CARD_PROC_RET_APPBLOCK = -9, //app block MFSDK_EMV_CARD_PROC_RET_CARDBLOCK = -10, //Card block MFSDK_EMV_CARD_PROC_RET_NOAPP = -12,        //card
without any application available MFSDK_EMV_CARD_PROC_RET_ERR_POWERUP = -13, //card not
responding or chip not present MFSDK_EMV_CARD_PROC_RET_INVDATA = -14,        //card
behaves correctly but has invalid or inconsistent data.
MFSDK_EMV_CARD_PROC_RET_APPNAUT = -15,        //card
returned error 6985
MFSDK_EMV_CARD_PROC_RET_CAPK_NOFOUND = -16, //card
CAPK not found
  

MFSDK_EMV_CARD_PROC_RET_APDU_NORETURN = -17,  
} MfSdkEmvCardProcRet_E; enum {
MFSDK_READ_CARD_MODE_MAG = 0x01,        ///< magstripe MFSDK_READ_CARD_MODE_IC = 0x02,        ///< ic MFSDK_READ_CARD_MODE_RF = 0x04        ///< rf  
}MfSdkCardMode;


typedef int(*MfSdkEmvSelecAppDisplay)(MfSdkEmvAidSt_T *stICCAID,int nAidNum,int *select_choic);


typedef int (*MfSdkEmvInputOffPin)(char *psCardNo,char *psAmt,char cMsgType,char *psPin);  


typedef int (*MfSdkEmvInputOnlinePin)(char *psCardNo,char *psAmt,char
*psPin);


typedef void (*MfSdkReadPage)(void);


typedef int (*MfSdkRuPay2ndPage)(void);


typedef int (*MfSdkDpas2ndPage)(void);
typedef int (*MfSdkPreprocessSetOtherDataCb)(u8*pOutData ,s32 iOutData);


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              4. MfSdkEmvKernelInit


Prototype
	LIB_EXPORT void MfSdkEmvKernelInit(void)
	Function
	Emv kernel init
	Param s
	in
	Nothing
	out
	Nothing
	return
	< 0        Failed
	0        Success
	remark
	

	



demo
	MfSdkEmvKernelInit()
	

  





                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              5. MfSdkEmvTerminalConfigInit  


Prototype
	LIB_EXPORT s32 MfSdkEmvTerminalConfigInit(u8*
ConfigBuff,s32 BuffLen)
	Function
	Set emv terminal configuration
	

Param s
	

in
	ConfigBuff:        Terminal parameters(all in tlv format)


BuffLen        Length of configBuff
	out
	Nothing
	return
	< 0        Failed
	0        Success
	remark
	

	



demo
	

	

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 6. MfSdkEmvCardLoop  


Prototype
	LIB_EXPORT s32 MfSdkEmvCardLoop(s32 cardMode,s32
timeout)
	Function
	Loop detection card
	

Param s
	

in
	CardMode


timeout
	0x01:mag, 0x02:ICC,0x04:RFIC,0x07:All


Unit is seconds
	out
	Nothing
	

return
	> 0
	Ref.        MfSdkCardMode
	0
	No card
	-3
	It meams timeout.
	-4
	Multiple cards
	remark
	

	demo
	s32 ret = MfSdkEmvCardLoop(0x01 | 0x02 | 0x04,60);
	

  

if(MFSDK_READ_CARD_MODE_MAG == ret){  
//TODO magstripe
}
else if(MFSDK_READ_CARD_MODE_IC == ret){
//TODO contact
}
else if(MFSDK_READ_CARD_MODE_RF == ret){
//TODO contactless
}




                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    7. MfSdkEmvCardProc  


Prototype
	LIB_EXPORT s32 MfSdkEmvCardProc(s32
ret,sdk_read_card_in st_in,u8* inBuff,s32 inLen,sdk_read_card_out * st_out)
	Function
	Card reading process
	





Param s
	





in
	ret        cardType: return value of "MfSdkEmvCardLoop"


st_in inbuff
inLen
	out
	st_out
	return
	

	remark
	

	



demo
	

	

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       8. MfSdkEmvGetCard


Prototype
	LIB_EXPORT s32 MfSdkEmvGetCard(s32 ret,u8* inBuff,u8*outBuff);
	

  

Function
	

Only for BC
	

Params
	in
	ret
	inBuff
	out
	outBuff
	return
	None
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       9. MfSdkEmvGoOnChip  


Prototype
	LIB_EXPORT s32 MfSdkEmvGoOnChip(s32 ret,u8* inBuff,u8*outBuff);
	Function
	

Only for BC
	

Params
	in
	ret
	inBuff
	out
	outBuff
	return
	None
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          10. MfSdkEmvSetAid


Prototype
	LIB_EXPORT s32 MfSdkEmvSetAid(u8* AidBuff,s32 BuffLen)
	Function
	Add one aid
	

Param s
	

in
	AidBuff        TLV hex format


BuffLen
	out
	st_out
	return
	< 0        Failed
	0        Success
	remark
	

	demo
	

	

  









                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          11. MfSdkEmvDeleteOneAid  


Prototype
	LIB_EXPORT s32 MfSdkEmvDeleteOneAid(u8* Aid,u8
aidLength)
	Function
	delete one aid
	

Param s
	

in
	Aid        Aid buff


aidLength
	out
	None
	return
	< 0        Failed
	0        Success
	remark
	

	

demo
	

	

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             12. MfSdkEmvClearAllAid  


Prototype
	LIB_EXPORT void MfSdkEmvClearAllAid(void);
	Function
	delete all aid
	Param s
	in
	None
	out
	None
	return
	< 0        Failed
	0        Success
	remark
	

	

demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                13. MfSdkEmvGetAidNum


Prototype
	LIB_EXPORT s32 MfSdkEmvGetAidNum(void);
	Function
	The total number of aids
	Param s
	in
	None
	out
	None
	return
	>0        aid total
	Other        Fail
	remark
	

	

demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                14. MfSdkEmvSetCapk  


Prototype
	LIB_EXPORT s32 MfSdkEmvSetCapk(u8 * CapkBuff,s32
BuffLen);
	Function
	add one capk
	Param s
	in
	CapkBuff        CapkBuff        TLV format
	out
	None
	return
	0        success
	Other        Fail
	remark
	

	

demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   15. MfSdkEmvDeleteAllCapk


Prototype
	LIB_EXPORT s32 MfSdkEmvDeleteAllCapk(void);
	Function
	delete all capk
	Param s
	in
	None
	out
	None
	

  

return
	0        success
	Other        Fail
	remark
	

	

demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   16. MfSdkEmvGetCapkNum


Prototype
	LIB_EXPORT s32 MfSdkEmvGetCapkNum(void);
	Function
	The total number of capks
	Param s
	in
	None
	out
	None
	return
	>=0        capk total
	Other        Fail
	remark
	

	

demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   17. MfSdkEmvGetCapkByIndex  


Prototype
	LIB_EXPORT s32
MfSdkEmvGetCapkByIndex(MfSdkEmvCapkInfo_T* stCapk, s32 nRecNum);
	Function
	get capk info by index
	Param s
	in
	nRecNum        index
	out
	stCapk        capk info
	return
	=0        success
	Other        Fail
	remark
	

	

demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      18. MfSdkEmvGetDataByTag


Prototype
	LIB_EXPORT s32 MfSdkEmvGetDataByTag(u8* Tag,u8*
Src,s32 ScrLen,u8* OutBuff,s32* OutLen);
	Function
	Get tag data from TLV string(hex format)
	



Param s
	

in
	Tag        Tag
	Src        Src
	ScrLen        Scr Len
	out
	OutBuff        Out Buff
	OutLen        Out Buff Len
	return
	=0        success
	Other        Fail
	remark
	

	

demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      19. MfSdkEmvGetKernelData  


Prototype
	LIB_EXPORT s32 MfSdkEmvGetKernelData(u8* Tag,s32*
OutValueLen,u8* OutValue)
	Function
	Get emv tag from kernel
	

Param s
	in
	Tag
	

out
	OutValueLen


OutValue
	return
	< 0        Failed
	0        Success
	remark
	

	

demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         20. MfSdkEmvGetDataByTag


Prototype
	LIB_EXPORT s32 MfSdkEmvGetDataByTag(u8* Tag,u8*
Src,s32 ScrLen,u8* OutBuff,s32* OutLen)
	Function
	Get tag data from TLV string(hex format)
	





Param s
	



in
	Tag
Src ScrLen
	

out
	OutBuff


OutLen
	return
	< 0        Failed
	0        Success
	remark
	

	

demo
	

	

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         21. MfSdkEmvPackTLVData  


Prototype
	LIB_EXPORT s32 MfSdkEmvPackTLVData(u8* Tag,u8*
TagValue,s32 ValueLen,u8* OutBuff,s32* OutLen)
	Function
	Packed TLV string to an array
	





Param s
	



in
	Tag
TagValue ValueLen
	

out
	OutBuff


OutLen
	return
	< 0        Failed
	0        Success
	remark
	

	demo
	

	

  







                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            22. MfSdkEmvSetKernelData  


Prototype
	LIB_EXPORT s32 MfSdkEmvSetKernelData(u8* Tag,u8*
SetData,s32 DataLen,s32 bOverRide)
	Function
	Get tag data from TLV string(hex format)
	





Param s
	





in
	Tag SetData DataLen
bOverRide        YES or No
	out
	

	return
	< 0        Failed
	0        Success
	remark
	

	

demo
	

	

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               23. MfSdkEmvSetDRL  


Prototype
	LIB_EXPORT s32 MfSdkEmvSetDRL(TERMDRL stDRL)
	Function
	Set visa and amex DRL config
	Param s
	in
	stDRL
	out
	None
	return
	< 0        Failed
	0        Success
	remark
	

	

demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  24. MfSdkEmvClearDRLFile


Prototype
	LIB_EXPORT s32 MfSdkEmvClearDRLFile()
	Function
	clear all DRL
	Param s
	in
	None
	out
	None
	return
	< 0        Failed
	0        Success
	remark
	

	demo
	

	

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  25. MfSdkEmvMatchErrCode  


Prototype
	LIB_EXPORT s32 MfSdkEmvMatchErrCode(u32 iErrcode)
	Function
	Match error code
	Param s
	in
	iErrcode
	out
	None
	return
	< 0        Failed
	0        Success
	remark
	

	

demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     26. MfSdkEmvOnlineRespPack


Prototype
	LIB_EXPORT s32 MfSdkEmvOnlineRespPack(s32
nOnlineRes,s8* sField39,u8* sField55,u8* EmvTag,u8* PackValue,s32* packLen)
	Function
	Process of emv online resp proc and pack tlv data
	







Param s
	





in
	nOnlineRes        0--online success(Any return in the server is success)        -1--online fail
sField39
sField55 EmvTag
	

out
	PackValue


packLen
	return
	< 0        Failed
	0        Success
	remark
	

	

demo
	

	

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     27. MfSdkEmvCardFree  


Prototype
	LIB_EXPORT s32 MfSdkEmvCardFree(s32 Type)
	Function
	Process of emv online resp proc and pack tlv data
	Param s
	in
	Type        2:free icc card data; 3:free rfic card data
	out
	None
	return
	< 0        Failed
	0        Success
	remark
	

	

demo
	

	

  



                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        28. MfSdkEmvAddCardBlackList


Prototype
	LIB_EXPORT s32 MfSdkEmvAddCardBlackList(BlackCard
stBlackCard,s32 cCoverFlag)
	Function
	Add one card black list
	

Param s
	

in
	stBlackCard


cCoverFlag
	out
	None
	return
	< 0        Failed
	0        Success
	remark
	

	

demo
	

	

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        29. MfSdkEmvDelCardBlackList  


Prototype
	LIB_EXPORT s32 MfSdkEmvDelCardBlackList(BlackCard
stBlackCard)
	Function
	detlete one card black list
	Param s
	in
	stBlackCard
	out
	None
	return
	< 0        Failed
	0        Success
	remark
	

	

demo
	

	

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           30. MfSdkEmvGetVersion




Prototype LIB_EXPORT s32 MfSdkEmvGetVersion(s8 *Version)  
  

Function
	Get emv version
	Param s
	in
	Version        Version string
	out
	None
	return
	< 0        Failed
	0        Success
	remark
	

	

demo
	

	

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           31. MfSdkEmvGetEntryVersion  


Prototype
	LIB_EXPORT s32 MfSdkEmvGetEntryVersion(s8* Version)
	Function
	Get emv entry version
	Param s
	in
	Version        Version string
	out
	None
	return
	< 0        Failed
	0        Success
	remark
	

	

demo
	

	

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              32. MfSdkEmvGetContactlessVersion


Prototype
	LIB_EXPORT s32 MfSdkEmvGetContactlessVersion(s32
KernelType,s8* Version)
	Function
	Get emv contactless version
	

Param s
	

in
	Version        Version string


KernelType:        refer to SDK_KERNEL_VER
	out
	None
	return
	< 0        Failed
	0        Success
	

  

remark
	

	

demo
	

	

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              33. MfSdkEmvSetCallBackFunction


Prototype
	LIB_EXPORT void MfSdkEmvSetCallBackFunction(s32 (*callback)(s32 MsgType,u8* Indata,s32 InLen,u8*
OutData,s32* Outlen))
	Function
	Set emv callback function
	







Param s
	





in
	callback        callback func


MsgType        refer to CALLBACK_MSG
Indata: InLen
	

out
	OutData


Outlen
	return
	< 0        Failed
	0        Success
	remark
	

	

demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              34. MfSdkEmvReadCardPage  


Prototype
	lv_obj_t*MfSdkEmvReadCardPage(lv_obj_t
*parent,void*pfunc,MfSdkEmvReadCardIn_T *pCardIn, MfSdkEmvReadCardOut_T *pCardOut);
	Function
	

create read card
	

page
	

Params
	in
	parent
	lvgl parent obj
	pCardIn
	Card In parameter
	out
	pfunc
	callback
	

  



	

	pCardOut        Card out parameter
	return
	lv_obj_t*        lvgl page obj
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 35. MfSdkEmvSetSelectAppCallback


Prototype
	void
MfSdkEmvSetSelectAppCallback(MfSdkEmvSelecAppDisplay pFunc);
	Function
	

Mutil App select
	Params
	in
	pFunc        callback
	out
	None
	return
	None
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 36. MfSdkEmvOfflinePinCallback  


Prototype
	

void MfSdkEmvOfflinePinCallback(MfSdkEmvInputOffPin pFunc);
	Function
	

offline pin callback
	Params
	in
	pFunc        callback
	out
	None
	return
	None
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    37. MfSdkEmvOnlinePinCallback




Prototype        void MfSdkEmvOnlinePinCallback(MfSdkEmvInputOnlinePin    
  

Function
	

online pin callback
	Params
	in
	pFunc        callback
	out
	None
	return
	None
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    38. MfSdkEmvSetReadPageCallback  


Prototype
	

void MfSdkEmvSetReadPageCallback(MfSdkReadPage pFunc);
	Function
	

display read card processing
	Params
	in
	pFunc        callback
	out
	None
	return
	None
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       39. MfSdkEmvSetRuPay2ndTapCallback


Prototype
	void MfSdkEmvSetRuPay2ndTapCallback(MfSdkRuPay2ndPage pFunc);
	Function
	

second tap UI
	Params
	in
	pFunc        callback
	out
	None
	return
	None
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       40. MfSdkEmvSetDpas2ndTapCallback


Prototype
	void MfSdkEmvSetDpas2ndTapCallback(MfSdkDpas2ndPage pFunc);
	Function
	

second tap UI
	Params
	in
	pFunc        callback
	out
	None
	return
	None
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       41. MfSdkEmvGetPageWin  


Prototype
	

lv_obj_t* MfSdkEmvGetPageWin(void);
	Function
	

Get EMV lvgl page handler
	Params
	in
	None
	out
	None
	return
	lv_obj_t*        EMV lvgl page handler
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          42. MfSdkEmvSetPreprocessOtherDataCallback


Prototype
	void
MfSdkEmvSetPreprocessOtherDataCallback(MfSdkPreprocessSe tOtherDataCb pFuncCallback);
	Function
	

set contactless other data callback
	Params
	in
	pFunc        callback
	out
	None
	return
	None
	remark
	

	

  

demo  


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          43. MfSdkEmvGetPageWinTip


Prototype
	

lv_obj_t* MfSdkEmvGetPageWinTip(void);
	Function
	

set contactless other data callback
	Params
	in
	pFunc        callback
	out
	None
	return
	None
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          44. MfSdkEmvGetProcInfo  


Prototype
	

s32 MfSdkEmvGetProcInfo(s8* outBuf, s32 bufLen);
	Function
	

Get read card information
	Params
	in
	bufLen        buff len.
	out
	outBuf        buff(>4096) ,ASCII format
	return
	None
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             45. MfSdkEmvCallbackEventSetAmtBeforeGpo


Prototype
	

void MfSdkEmvCallbackEventSetAmtBeforeGpo(void);
	Function
	

set amount before gpo
	Params
	in
	None
	out
	None
	return
	None
	

  

remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             46. MfSdkEmvCallbackEventGetAmtBeforeGpo


Prototype
	

s32 MfSdkEmvCallbackEventGetAmtBeforeGpo(void);
	Function
	

get amount before gpo
	Params
	in
	None
	out
	None
	return
	0x00
	0x01
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             47. MfSdkEmvCallbackEventClear  


Prototype
	

void MfSdkEmvCallbackEventClear(void);
	Function
	

clear emv callback event
	Params
	in
	None
	out
	None
	return
	None
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                48. MfSdkEmvCallbackEventClear


Prototype
	

char* MfSdkEmvGetEmvL2Version(void);
	Function
	

Get EMV(contact) kernel L2 cert version
	

  

Params
	in
	None
	out
	None
	return
	!=NULL        EMV(contact) kernel L2 cert version
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                49. MfSdkEmvGetEmvL2KernelName


Prototype
	

char* MfSdkEmvGetEmvL2Version(void);
	Function
	

Get EMV(contact) kernel L2 cert kernel name
	Params
	in
	None
	out
	None
	return
	!=NULL        EMV(contact) kernel L2 cert version
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                50. MfSdkEmvGetAidsInit  


Prototype
	

void *MfSdkEmvGetAidsInit(void);
	Function
	

aid params init        ref. MfSdkEmvGetAidsFree
	Params
	in
	None
	out
	None
	return
	!=NULL        aids pointer
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   51. MfSdkEmvGetAid




s32 MfSdkEmvGetAid(void *pTerminalApps, s32 index , u8    
*outAidsTlv,s32 outAidsTlvLength);
  

Function
	

Get Aid tlv
	



Params
	

in
	pTerminalApps        aids pointer
	aid index        index must less than
index
MfSdkEmvGetAidNum()
	outAidsTlvLength outAidsTlv size min value 1024
	out
	None        aid tlv length
	return
	> =0        aids pointer
	other        ref. MfSdkRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   52. MfSdkEmvGetAidsFree  


Prototype
	

void MfSdkEmvGetAidsFree(void *pTerminalApps);
	Function
	

free aids param pointer
	Params
	in
	pTerminalApps        aids pointer
	out
	None
	return
	None
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      53. MfSdkEmvSetTlv2Kernel


Prototype
	

s32 MfSdkEmvSetTlv2Kernel(u8* pBerTlvData , s32 length);
	Function
	

set Kernel emv tlv
	

Params
	in
	pBerTlvData        tlv data
	length        tlv data length
	out
	None
	return
	None
	remark
	

	

  

demo  


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      12. System module
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      54. Module description
This module mainly includes system APIs.


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      55. Module structure declaration  
  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         56. Constant declarations


#define MFSDK_SYS_DEVICE_MF960
	CPU_EC8521
	

	///<mf960
	

	

	#define MFSDK_SYS_DEVICE_H9N
	CPU_EC25
	///<h9n
	

  

#define MFSDK_SYS_DEVICE_H9L        CPU_V133        ///<h9l #define MFSDK_SYS_DEVICE_H9PRO                CPU_X2600_H9Pro  
///<h9pro
#define MFSDK_SYS_DEVICE_960B        CPU_X2600_MF960
///<960b




typedef enum  
{
MFSDK_SYS_RET_FAILED = -3, //failed MFSDK_SYS_RET_BOUNDS = -2, //Array out-of-bounds MFSDK_SYS_RET_PARM_ERROR = -1, //check param MFSDK_SYS_RET_OK = 0,  
}MfSdkSysRet_E;


typedef enum
{
MFSDK_SYS_LCD_TYPE_GET_FILE = -1,                ///<get file MFSDK_SYS_LCD_TYPE_480_800 = 0,        ///<mf960
MFSDK_SYS_LCD_TYPE_320_240,        ///<h9u/h9l/h9n MFSDK_SYS_LCD_TYPE_240_240 = 11, MFSDK_SYS_LCD_TYPE_320_480, MFSDK_SYS_LCD_TYPE_128_32,
}MfSdkSysLcdType_E;


typedef enum
{
MFSDK_SYS_POWER_SHUTDOWN, MFSDK_SYS_POWER_LOW, MFSDK_SYS_POWER_CHARGE, MFSDK_SYS_POWER_OUT, MFSDK_SYS_NET_CONFIG_MODE, MFSDK_SYS_NET_GPRS_MODE, MFSDK_SYS_NET_WIFI_MODE, MFSDK_SYS_WIFI_AIRKISS_CONFIG, MFSDK_SYS_WIFI_AP_CONFIG, MFSDK_SYS_WIFI_CONFIG_SUCCESS, MFSDK_SYS_WIFI_CONFIG_FAIL,
MFSDK_SYS_TMS_UPDATE_START,//Tms Update Start MFSDK_SYS_TMS_UPDATE_UNZIP,//Tms Update Unzip MFSDK_SYS_TMS_UPDATE_SUCC,//Tms Update Succ MFSDK_SYS_TMS_UPDATE_FAIL,//Tms Update Fail MFSDK_SYS_TMS_SIGN_SUCC,//Tms Sign Succ












Pause
________________
MFSDK_SYS_TMS_SIGN_FAIL,//Tms Sign Fail MFSDK_SYS_TMS_DOWN_FINISH_SUCC,//Tms Down Finish Succ MFSDK_SYS_TMS_DOWN_FINISH_FAIL,//Tms Down Finish Fail MFSDK_SYS_TMS_DOWN_FINISH_PAUSE,//Tms Down Finish


MFSDK_SYS_TMS_DOWN_FINISH_CONTINUE,//Tms Finish  
  
Continue  
MFSDK_SYS_TMS_DOWN_FINISH_STOP,//Tms FinishStop MFSDK_SYS_LOW_BATTERY_SHUTDOWN,//Low Battery Shutdown MFSDK_SYS_RTC_TIME_SET,//RTC SET TIME
MFSDK_SYS_POWER_FULL,//Battery full  
}MfSdkSysState_E;




typedef enum
{
MFSDK_SYS_DEV_MODEL_UNKNOWN = -1,
MFSDK_SYS_DEV_MODEL_M60A = 0, MFSDK_SYS_DEV_MODEL_M60B, MFSDK_SYS_DEV_MODEL_M90L, MFSDK_SYS_DEV_MODEL_M60C, MFSDK_SYS_DEV_MODEL_MP60, MFSDK_SYS_DEV_MODEL_70N, MFSDK_SYS_DEV_MODEL_70N2, MFSDK_SYS_DEV_MODEL_M90, MFSDK_SYS_DEV_MODEL_H9, MFSDK_SYS_DEV_MODEL_H9A, MFSDK_SYS_DEV_MODEL_H9L, MFSDK_SYS_DEV_MODEL_H9N, MFSDK_SYS_DEV_MODEL_H9U, MFSDK_SYS_DEV_MODEL_H9PRO, MFSDK_SYS_DEV_MODEL_ET389, MFSDK_SYS_DEV_MODEL_ET389PRO, MFSDK_SYS_DEV_MODEL_MF919, MFSDK_SYS_DEV_MODEL_MF960, MFSDK_SYS_DEV_MODEL_MF960B, MFSDK_SYS_DEV_MODEL_70N3, MFSDK_SYS_DEV_MODEL_SR600MINI, MFSDK_SYS_DEV_MODEL_MP70A30, MFSDK_SYS_DEV_MODEL_MP70N5, MFSDK_SYS_DEV_MODEL_MP70A20, MFSDK_SYS_DEV_MODEL_MP70MIS, MFSDK_SYS_DEV_MODEL_MP70A5,
  

MFSDK_SYS_DEV_MODEL_H9PROA30, MFSDK_SYS_DEV_MODEL_MP70A6, MFSDK_SYS_DEV_MODEL_Z990,  
}MfSdkSysDevType_E;


typedef enum    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         57. MfSdkSysGetDevModel


Prototype
	

LIB_EXPORT s32 MfSdkSysGetDevModel(void)
	Function
	

Obtain the terminal model.
	Params
	in
	None
	out
	None
	return
	Dev Model        Ref. MfSdkSysDevType_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         58. MfSdkSysGetDevModelName


Prototype
	

LIB_EXPORT char* MfSdkSysGetDevModelName(void)
	Function
	

Obtain the terminal name.
	Params
	in
	None
	out
	None
	

  

return
	device model name
	remark
	

	



demo
	ET389Pro:
char *modelName = MfSdkSysGetDevModelName(); APP_TRACE("modelName:%s\r\n",modelName); Result:
modelName:ET389Pro
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         59. MfSdkSysDevIs


Prototype
	

LIB_EXPORT MFSDKBOOL MfSdkSysDevIs(s32 model)
	Function
	

Check whether the terminal is a model.
	Params
	in
	model        Ref. MfSdkSysDevType_E
	out
	None
	return
	MFSDK_TRUE        yes
	MFSDK_FALSE        no
	remark
	

	demo
	APP_TRACE("MFSDK_SYS_DEV_MODEL_ET389 :%s\r\n",MfSdkSysDevIs(MFSDK_SYS_DEV
_MODEL_ET389));
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         60. MfSdkSysGetHardwareVer  


Prototype
	

LIB_EXPORT s32 MfSdkSysGetHardwareVer(void)
	Function
	

Get hardware version.
	Params
	in
	None
	out
	None
	return
	hardware version 300/400/500
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            61. MfSdkSysGetTime


Prototype
	

LIB_EXPORT s32 MfSdkSysGetTime(MfSdkSysTime_T *pTime)
	Function
	

Get terminal date and time.
	Params
	in
	*pTime        MfSdkSysTime_T point.
	out
	None
	

return
	MFSDK_SYS_RE
Success
T_OK
	MFSDK_SYS_RE
fail
T_PARM_ERROR
	remark
	

	



demo
	MfSdkSysTime_T stDateTime; memset(&stDateTime,0,sizeof(MfSdkSysTime_T)); if(MfSdkSysGetTime(&stDateTime) == MFSDK_SYS_RET_OK)
{
//TODO
}
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            62. MfSdkSysAppIsLock  


Prototype
	

LIB_EXPORT s32 MfSdkSysAppIsLock()
	Function
	Determine whether the app is locked. For example, when TMS is running, the application is locked.
	Params
	in
	None
	out
	None
	return
	1        lock
	0        unlock
	remark
	

	

demo
	if(MfSdkSysAppIsLock() == 1)
{
//TODO
}
	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               63. MfSdkSysAuxlcdGetBrightness


Prototype
	

LIB_EXPORT s32 MfSdkSysAuxlcdGetBrightness()
	Function
	

LCD get brightness
	Params
	in
	None
	out
	None
	return
	light        The range is between 10 and 255
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               64. MfSdkSysAuxlcdSetBrightness  


Prototype
	

LIB_EXPORT void MfSdkSysAuxlcdSetBrightness(s32 light)
	Function
	

LCD set brightness
	Params
	in
	light        The range is between 10 and 255
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  65. MfSdkSysSubAuxlcdGetBrightness


Prototype
	

s32 MfSdkSysSubAuxlcdGetBrightness();
	Function
	

Sub LCD get brightness
	Params
	in
	None
	out
	None
	return
	>=10        The range is between 10 and 255
	remark
	

	

  

demo  


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  66. MfSdkSysSubAuxlcdSetBrightness


Prototype
	

void MfSdkSysAuxlcdSetBrightness(s32 light);
	Function
	

Sub LCD set brightness
	Params
	in
	light        light The range is between 10 and 255
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  67. MfSdkSysBatterCharge  


Prototype
	

LIB_EXPORT s32 MfSdkSysBatterCharge(void)
	Function
	

Charging state
	Params
	in
	None
	out
	None
	

return
	MFSDK_SYS_RET_
charging
OK
	Other        not charging
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     68. MfSdkSysGetBatterStatus


Prototype
	LIB_EXPORT s32 MfSdkSysGetBatterStatus(MfSdkBatterAttr_T* batterystatus)
	Function
	

Battery state
	Params
	in
	None
	

  



	out
	batterystatus        battery status
	

return
	1        charging
	0        not charging
	-1        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     69. MfSdkSysBuzzerSound


Prototype
	

LIB_EXPORT void MfSdkSysBuzzerSound(s32 nMillisecond)
	Function
	

Buzzer
	Params
	in
	nMillisecond        time
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     70. MfSdkSysCheckKey  


Prototype
	

LIB_EXPORT s32 MfSdkSysCheckKey(void)
	Function
	

Scan button, non blocking
	Params
	in
	None
	out
	None
	

return
	KEY_VALUE        key pressed
	0        No key
	-1        Fail
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        71. MfSdkSysCheckTick


Prototype
	

LIB_EXPORT s32 MfSdkSysCheckTick(s32 tick, s32 timeover)
	Function
	

Check for timeout
	

Params
	in
	tick        Starting time
	timeover        Timeout period
	out
	None
	return
	1        timeout
	0        within the effective time
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        72. MfSdkSysClrKey  


Prototype
	

LIB_EXPORT void MfSdkSysClrKey(void)
	Function
	

Not implemented
	Params
	in
	None
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           73. MfSdkSysConfig


Prototype
	

LIB_EXPORT void MfSdkSysConfig(void)
	Function
	The manufacturer sets the individual parameter settings and invokes the individual settings function of each manufacturer.
	Params
	in
	None
	out
	None
	

  

return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           74. MfSdkSysCurlInit


Prototype
	LIB_EXPORT s32 MfSdkSysCurlInit(s32 Argc, s8** Argv, s8* AppName)
	Function
	

Initialization of system and initialization of application layer
	

Params
	

in
	Argc        Reusing main function parameter Argc
	Argv        Reusing main function parameter Argv
	AppName        Application name
	out
	None
	

return
	For the first time since the program was
1
updated
	2        Program is not run for the first time
	Other        Fail
	remark
	Not to be processed without access. Inside the function calls the private API of the manufacturer.The API returns to the first operation only when the program is newly installed,and the
update is not the first operation.
	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           75. MfSdkSysDelay  


Prototype
	

LIB_EXPORT void MfSdkSysDelay(u32 uiMs)
	Function
	

Delay blocking
	Params
	in
	uiMs        Delay time unit MS
	out
	None
	return
	Nothing
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              76. MfSdkSysEnergySetTime


Prototype
	

LIB_EXPORT s32 MfSdkSysEnergySetTime(s32 nTime)
	Function
	

Energy-saving time
	Params
	in
	nTime        unit second
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              77. MfSdkSysEnergyTime  


Prototype
	

LIB_EXPORT s32 MfSdkSysEnergyTime()
	Function
	

Get Energy-saving time
	Params
	in
	None
	out
	None
	return
	Energy-saving time unit:second
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 78. MfSdkSysEraseSecureArea


Prototype
	

LIB_EXPORT s32 MfSdkSysEraseSecureArea(u32 addr)
	Function
	

Erase safe area data, 4K at a time.
	Params
	in
	addr        0 / 4*1024
	out
	None
	return
	MFSDK_SYS_RE
Success
T_OK
	

  



	Other        Fail
	remark
	

	demo
	int iRet = Sys_EraseSecureArea(0);
iRet = Sys_EraseSecureArea(4*1024);
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 79. MfSdkSysFileSetPath


Prototype
	

LIB_EXPORT void MfSdkSysFileSetPath(s32 mode)
	Function
	

Set the storage mode
	

Params
	in
	Storage location,
mode
Reference enum FILELOCATION
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 80. MfSdkSysGetBatterLevel  


Prototype
	

LIB_EXPORT s32 MfSdkSysGetBatterLevel(void)
	Function
	

Get power supply
	Params
	in
	None
	out
	None
	return
	0-5        Battery level
	-1        Fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    81. MfSdkSysGetDateTime




Prototype        LIB_EXPORT s32 MfSdkSysGetDateTime(u8* DateTime)  
  

Function
	

Get SysTime
	Params
	in
	None
	out
	DateTime        "YYYYMMDDHHMMSS" 14 bytes
	

return
	MFSDK_SYS_RET_
Success
OK
	Other        Fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    82. MfSdkSysGetIsLcd  


Prototype
	

LIB_EXPORT s32 MfSdkSysGetIsLcd(void)
	Function
	

Check whether 389 has a front display
	Params
	in
	None
	out
	None
	return
	1        have front display
	-1        have no front display
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       83. MfSdkSysGetLcdType


Prototype
	

LIB_EXPORT s32 MfSdkSysGetLcdType()
	Function
	

Get the screen LCD type
	Params
	in
	None
	out
	None
	return
	LCD type        Ref. MfSdkSysLcdType_E
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       84. MfSdkSysGetPsn


Prototype
	

LIB_EXPORT void MfSdkSysGetPsn(s8* psn)
	Function
	

	Params
	in
	None
	out
	psn
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       85. MfSdkSysGetTerminalInfo  


Prototype
	LIB_EXPORT s32
MfSdkSysGetTerminalInfo(MfSdkSysTermInfo_T* terminal)
	Function
	

Get terminal information
	Params
	in
	None
	out
	terminal        Reference TERMINALINFO
	

return
	MFSDK_SYS_RET_
success
OK
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          86. MfSdkSysGetTermSn


Prototype
	

LIB_EXPORT s32 MfSdkSysGetTermSn(s8* Sn)
	Function
	

Get terminal SN
	Params
	in
	None
	out
	sn        Reference TERMINALINFO
	

  



return
	MFSDK_SYS_RET_
success
OK
	Other        fail
	remark
	no safe please use API MfSdkSysGetTerminalSn
	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          87. MfSdkSysGetTerminalSn


Prototype
	LIB_EXPORT const s8* MfSdkSysGetTerminalSn(s8*pData,s32 length)
	Function
	

Get terminal SN
	Params
	in
	length
	out
	pData        Reference TERMINALINFO
	return
	None
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          88. MfSdkSysGetTick  


Prototype
	

LIB_EXPORT u32 MfSdkSysGetTick()
	Function
	

Get the current time
	Params
	in
	None
	out
	None
	return
	tick        Get time tick unit ms
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             89. MfSdkSysGetTickDiff




Prototype        LIB_EXPORT s32 MfSdkSysGetTickDiff(s32 tick1)  
  

Function
	

Calculate time difference
	Params
	in
	tick1        start tick
	out
	None
	return
	tick        Time difference
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             90. MfSdkSysGetTimeStamp  


Prototype
	

LIB_EXPORT time_t MfSdkSysGetTimeStamp()
	Function
	

get time stamp
	Params
	in
	tick1        start tick
	out
	None
	return
	time_t lt        time stamp
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                91. MfSdkSysGuiGroupGetObj


Prototype
	

LIB_EXPORT void* MfSdkSysGuiGroupGetObj()
	Function
	

	Params
	in
	None
	out
	None
	return
	lvgl object
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                92. MfSdkSysHttpDownload


Prototype
	LIB_EXPORT s32 MfSdkSysHttpDownload(s32 sock_index, const s8* url, const s8* fullpathfilename)
	Function
	

http download file
	



Params
	

in
	socket used by the device Ref.
sock_index
MfSdkCommSocketIndex_E
	url        Download link
	fullpathfilename        Save path
	out
	None
	

return
	MFSDK_SYS_RET_
success
OK
	other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                93. MfSdkSysHttpDownloadUseAgent  


Prototype
	LIB_EXPORT void MfSdkSysHttpDownloadUseAgent(s32 useAgent)
	Function
	

Http download message configuration
	

Params
	in
	UseAgent Whether to use User-Agent for http
useAgent
download(0 - 1)
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   94. MfSdkSysInit




Prototype        LIB_EXPORT s32 MfSdkSysInit(s32 Argc, s8** Argv, s8*    
  

Function
	Initialization of system and initialization of application layer Nothing. (For Traditional POS)
	

Params
	

in
	Argc        Reusing main function parameter Argc
	Argv        Reusing main function parameter Argv
	AppName        Application name
	out
	None
	

return
	<0        fail
	for the first time since the program was
1
updated.
	2        Program is not run for the first time.
	remark
	Not to be processed without access.Inside the function calls the private API of the manufacturer.The API returns to the first operation only when the program is newly installed,and the update is not the first
operation.
	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   95. MfSdkSysLcdCalibration  


Prototype
	

LIB_EXPORT void MfSdkSysLcdCalibration()
	Function
	

Screen Calibration
	Params
	in
	None
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      96. MfSdkSysLogoInit


Prototype
	

LIB_EXPORT s32 MfSdkSysLogoInit(s8* logoPath)
	Function
	

logo init
	Params
	in
	logoPath        Path of the logo.bin file
	out
	None
	

  



return
	MFSDK_SYS_RET_
success
OK
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      97. MfSdkSysLogoInitA


Prototype
	

s32 MfSdkSysLogoInitA(s8* logoPath,MFSDKBOOL bDelete);
	Function
	

logo init
	

Params
	in


in
	logoPath        logo file Path
	Whether to delete logo file MFSDK_TRUE-yes,
bDelete
MFSDK_FALSE-no
	out
	None
	

return
	MFSDK_SYS_RET_
success
OK
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      98. MfSdkSysModelType  


Prototype
	

LIB_EXPORT s32 MfSdkSysModelType()
	Function
	

	Params
	in
	None
	out
	None
	return
	0        wireless
	1        MODEM
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         99. MfSdkSysNetSetDatacallType


Prototype
	

LIB_EXPORT void MfSdkSysNetSetDatacallType()
	Function
	

Set other network injection processes
	Params
	in
	None
	out
	None
	return
	Nothing
	remark
	Called before Sys_Start.Resolved the jiociot sim card network injection
failure
	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         100. MfSdkSysPrintAdd  


Prototype
	

LIB_EXPORT void MfSdkSysPrintAdd(const s8* pbuff)
	Function
	

print buff add
	Params
	in
	pbuff        print buff
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            101. MfSdkSysReadFlashData


Prototype
	

LIB_EXPORT void MfSdkSysReadFlashData(s8* pdata, s32 size)
	Function
	

Read flash data
	Params
	in
	size        data size
	out
	pdata        read Data content
	return
	Nothing
	

  

remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            102. MfSdkSysReadSecureArea


Prototype
	LIB_EXPORT s32 MfSdkSysReadSecureArea(u32 addr, u8* pData, s32 iDataLength)
	Function
	

Read secure area data.
	

Params
	in
	addr        Read data start offset 0-8191
	iDataLength
	out
	pData
	return
	>=0        read data length
	< 0        fail
	remark
	

	

demo
	s32 iRet = 0;
u8 mBuffer[1024] = {0};
iRet = Sys_ReadSecureArea(0, mBuffer, sizeof(mBuffer));
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            103. MfSdkSysReboot  


Prototype
	

LIB_EXPORT s32 MfSdkSysReboot(void)
	Function
	

Terminal reboot
	Params
	in
	None
	out
	None
	

return
	MFSDK_SYS_RET_
success
OK
	-1        fail
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               104. MfSdkSysRfidEmulateConfig


Prototype
	LIB_EXPORT s32 MfSdkSysRfidEmulateConfig(u8* cardinfo, s32 infolen, u8(*cardblock)[4], u32 block_cap)
	Function
	

ntag analog card config
	





Params
	



in
	cardinfo        Pointer to memory card information
	infolen        The length of card information
	A two-dimensional array pointer for storing card
cardblock
block data
	block_cap        The number of blocks that the card can support
	out
	None
	

return
	MFSDK_SYS_RET_
success
OK
	other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               105. MfSdkSysRfidEmulateDeinit  


Prototype
	

LIB_EXPORT s32 MfSdkSysRfidEmulateDeinit(void)
	Function
	

ntag deinitialization of analog cards
	Params
	in
	None
	out
	None
	

return
	MFSDK_SYS_RET_
success
OK
	Other        fail
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  106. MfSdkSysRfidEmulateInit


Prototype
	

LIB_EXPORT s32 MfSdkSysRfidEmulateInit(void)
	Function
	

ntag analog card initialization
	Params
	in
	None
	out
	None
	

return
	MFSDK_SYS_RET_
success
OK
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  107. MfSdkSysRfidEmulateProcess  


Prototype
	

LIB_EXPORT void MfSdkSysRfidEmulateProcess(void)
	Function
	

ntag analog card execution processing
	Params
	in
	None
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     108. MfSdkSysRun


Prototype
	

LIB_EXPORT s32 MfSdkSysRun()
	Function
	

system running
	Params
	in
	None
	out
	None
	

  

return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     109. MfSdkSysSetDateTime


Prototype
	

LIB_EXPORT s32 MfSdkSysSetDateTime(u8* DateTime)
	Function
	

Set SysTime
	Params
	in
	DateTime        "YYYYMMDDHHMMSS" 14 bytes
	out
	None
	

return
	-2        Parameter Error
	-1        Fail
	0        Success
	remark
	Internal judgment of time format in API
	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     110. MfSdkSysSetLanguage  


Prototype
	

LIB_EXPORT void MfSdkSysSetLanguage(s32 nLanguageType)
	Function
	

Set device language, must set the right font priority
	

Params
	

in
	0 - Chinese,
nLanguageType        1 - English,
2 - Persian
	out
	None
	return
	Nothing
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        111. MfSdkSysSetLogData


Prototype
	

LIB_EXPORT void MfSdkSysSetLogData(s8* buff, s32 len)
	Function
	

Log set
	

Params
	in
	buff
	len
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        112. MfSdkSysSetScrBackLight  


Prototype
	

LIB_EXPORT s32 MfSdkSysSetScrBackLight(byte mode)
	Function
	

Set screen backlight mode
	



Params
	

in
	Backlight mode:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           1. - turn off backlight,
mode
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           1. - system automatically controls,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           2. - backlight is always bright.
	out
	None
	

return
	MFSDK_SYS_RET_
success
OK
	Other        fail
	remark
	Mode=1 indicates that the backlight is automatically controlled by the
system, with a default of 1.
	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           113. MfSdkSysSleep




Prototype        LIB_EXPORT s32 MfSdkSysSleep(u32 Time)  
  

Function
	

This API is a delay feature.
	Params
	in
	Time        Entering dormancy time, unit milliseconds
	out
	None
	

return
	MFSDK_SYS_RET_
success
OK
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           114. MfSdkSysStart  


Prototype
	LIB_EXPORT void MfSdkSysStart(const s8* app_ver, MfSdkSysAppStartCallback apprun)
	Function
	

Check for timeout
	

Params
	in
	app_ver        Application version
	apprun        Application task
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              115. MfSdkSysTaskAppSet


Prototype
	

LIB_EXPORT void MfSdkSysTaskAppSet(void* pfunc)
	Function
	

Open Task
	Params
	in
	pfunc        Processing function of task
	out
	None
	return
	Nothing
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              116. MfSdkSysTaskCreate


Prototype
	LIB_EXPORT s32 MfSdkSysTaskCreate(void (*pfun)(void* param), s32 prio, void* param, s32 task_size)
	Function
	

Create system task
	



Params
	

in
	pfun        Processing function of task
prio        Task priority
param        Task param
task_size        Stack size
	out
	None
	

return
	MFSDK_SYS_RET_
success
OK
	other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              117. MfSdkSysTimerCheck  


Prototype
	

LIB_EXPORT s32 MfSdkSysTimerCheck(s32 iHandle)
	Function
	

Check whether the timing time is up to
	Params
	in
	iHandle        Timer
	out
	None
	

return
	success,Remaining time, unit milliseconds (0
>=0
indicates timed time)
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 118. MfSdkSysTimerClose




Prototype        LIB_EXPORT s32 MfSdkSysTimerClose(s32 iHandle)  
  

Function
	

Off Timer
	Params
	in
	iHandle        Timer
	out
	None
	

return
	MFSDK_SYS_RET_
success
OK
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 119. MfSdkSysTimerCreate  


Prototype
	LIB_EXPORT u32 MfSdkSysTimerCreate(void* pfunc, void* pParam, u32 nPeriod, u32 nMode, u32* pnErrorCode)
	Function
	

Create a timer
	





Params
	



in
	pfunc        callback func
	pParam        params
	nPeriod        period
	nMode        mode
	pnErrorCode        error code
	out
	None
	return
	>0        success, timer handle
	0        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    120. MfSdkSysTimerEnable


Prototype
	

LIB_EXPORT u32 MfSdkSysTimerEnable(u32 nTimerNo)
	Function
	

Enable timer
	Params
	in
	nTimerNo        timer handle
	out
	None
	return
	MFSDK_SYS_RET_ success
	

  



	OK
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    121. MfSdkSysTimerDelete


Prototype
	

u32 MfSdkSysTimerDelete(u32 nTimerNo)
	Function
	

Delete timer
	Params
	in
	nTimerNo        timer handle
	out
	None
	

return
	MFSDK_SYS_RET_
success
OK
	Other        fail
	remark
	

	demo
	

	





                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    122. MfSdkSysTimerOpen  


Prototype
	

LIB_EXPORT u32 MfSdkSysTimerOpen(u32 TimerMs)
	Function
	

Open timer and set timer time
	Params
	in
	TimerMs        Timer time
	out
	None
	return
	>=0        success,return timer handle
	Other        fail
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       123. MfSdkSysTtsSystemSetFunc


Prototype
	LIB_EXPORT void MfSdkSysTtsSystemSetFunc(MfSdkSysPlayCallback playproc)
	Function
	

system tts callback eg. batter low, wifi mode etc.
	Params
	in
	playproc
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       124. MfSdkSysUnzipFileFunc  


Prototype
	LIB_EXPORT s32 MfSdkSysUnzipFileFunc(s8* szFileName, s8* folder, MFSDKBOOL del)
	Function
	

Unzip packet
	





Params
	





in
	szFileName        Path of the compressed package
	folder        Unzip to the specified folder
	MFSDK_TRUE:Delete the zip package after the
decompression is complete;
del
MFSDK_FALSE:The zip package is not deleted
after the decompression is successful
	out
	None
	

return
	MFSDK_SYS_RET_
success
OK
	other        fail
	remark
	

	demo
	MfSdkSysUnzipFileFunc("exdata\\images.zip","exdata",MFSDK_TRUE);
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          125. MfSdkSysVersion




Prototype        LIB_EXPORT s32 MfSdkSysVersion()  
  

Function
	

get system version and trace out to log tool
	Params
	in
	None
	out
	None
	return
	system version
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          126. MfSdkSysWriteFlashData  


Prototype
	

LIB_EXPORT void MfSdkSysWriteFlashData(s8* pdata, s32 size)
	Function
	

	

Params
	in
	pdata        write data stream
	size        write data stream length
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             127. MfSdkSysWriteSecureArea


Prototype
	LIB_EXPORT s32 MfSdkSysWriteSecureArea(u32 addr, u8* pData, s32 iDataLength)
	Function
	

	

Params
	

in
	addr        0--8191
	pData        write data stream
	iDataLength        write data stream length
	out
	None
	

return
	MFSDK_SYS_RET_
success
OK
	Other        fail
	remark
	

	

  

demo        iRet = Sys_WriteSecureArea(0, (u8*)"12345678", 8);  


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             128. MfSdkSysZipUpdate


Prototype
	

LIB_EXPORT void MfSdkSysZipUpdate()
	Function
	

TMS update(Unpack zip file and upgrade, then reboot)
	Params
	in
	None
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             129. MfSdkSysDriverLibInit  


Prototype
	

LIB_EXPORT void MfSdkSysDriverLibInit()
	Function
	

Initialization driver
	Params
	in
	None
	out
	None
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                130. MfSdkSysTaskAppInit


Prototype
	

LIB_EXPORT s32 MfSdkSysTaskAppInit(void)
	Function
	

if SoundBox support NFC should init
	Params
	in
	None
	out
	None
	return
	MFSDK_SYS_RET_ success
	

  



	OK
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                131. MfSdkSysPubDriverInit


Prototype
	

LIB_EXPORT s32 MfSdkSysPubDriverInit(void)
	Function
	

Init Driver
	Params
	in
	None
	out
	None
	

return
	MFSDK_SYS_RET_
success
OK
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                132. MfSdkSysFontInit  


Prototype
	

LIB_EXPORT s32 MfSdkSysFontInit(void)
	Function
	

Init font library
	Params
	in
	None
	out
	None
	

return
	MFSDK_SYS_RET_
success
OK
	Other        fail
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   133. MfSdkSysConsoleSwitch


Prototype
	

void MfSdkSysConsoleSwitch(MfSdkSysConsole_E switchE);
	Function
	

set device port
	Params
	in
	switchE        refer to MfSdkSysConsole_E
	out
	None
	return
	None
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   134. MfSdkSysThreadMutexInit  


Prototype
	

s32 MfSdkSysThreadMutexInit(MfSdkSysThreadMutex *mutex);
	Function
	

init mutex
	Params
	in
	None
	out
	mutex        MfSdkSysThreadMutex handle
	return
	ref. MfSdkSysRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      135. MfSdkSysThreadMutexLock


Prototype
	s32 MfSdkSysThreadMutexLock(MfSdkSysThreadMutex
*mutex ,void* param);
	Function
	

mutex lock
	

Params
	in
	mutex        MfSdkSysThreadMutex handle
	param        NULL
	out
	None
	return
	ref. MfSdkSysRet_E
	

  

remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      136. MfSdkSysThreadMutexUnlock


Prototype
	s32 MfSdkSysThreadMutexUnlock(MfSdkSysThreadMutex
*mutex);
	Function
	

mutex unlock
	Params
	in
	mutex        MfSdkSysThreadMutex handle
	out
	None
	return
	ref. MfSdkSysRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      137. MfSdkSysThreadMutexDestroy  


Prototype
	s32 MfSdkSysThreadMutexDestroy(MfSdkSysThreadMutex
*mutex);
	Function
	

Destroy mutex
	Params
	in
	mutex        MfSdkSysThreadMutex handle
	out
	None
	return
	ref. MfSdkSysRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         138. MfSdkSysGetSegmentLcdDisplayMaxLength


Prototype
	

s32 MfSdkSysGetSegmentLcdDisplayMaxLength(void);
	Function
	

Get segment lcd
	

max
	

length of display        6/7/9
	Params
	in
	mutex
	MfSdkSysThreadMutex handle
	

  



	out
	None
	return
	>0        Get segment lcd max length of display        6/7/9
	

	other        failed
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         139. MfSdkSysIsExternalFlash


Prototype
	

s32 MfSdkSysGetSegmentLcdDisplayMaxLength(void);
	Function
	

Check whether there is an external flash.
	Params
	in
	None
	out
	None
	return
	MFSDK_FALSE        not external Flash
	MFSDK_TRUE        external flash
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         140. MfSdkSysSetForceSleepTime  


Prototype
	

s32 MfSdkSysSetForceSleepTime(s32 timeS);
	Function
	Set the time for the device to enter the forced sleep mode after the screen is broken
	Params
	in
	timeS        time. unit seconds
	out
	None
	return
	ref. MfSdkSysRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            141. MfSdkSysSetSleepToPoweroff




Prototype        s32 MfSdkSysSetSleepToPoweroff(s32 timeS);  
  

Function
	

Set the shutdown time after the device enters sleep mode
	Params
	in
	timeS        time. unit seconds
	out
	None
	return
	ref. MfSdkSysRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            142. MfSdkSysGetHeapInformation  


Prototype
	void MfSdkSysGetHeapInformation(MfSdkSysHeap_T
*pHeapInfor);
	Function
	

get heap info
	Params
	in
	None
	out
	pHeapInfor        heap info
	return
	None
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               143. MfSdkSysSetRestartEnabledOnce


Prototype
	

s32 MfSdkSysSetRestartEnabledOnce();
	Function
	

not restart the app after it crashes, use crash=reenter
	Params
	in
	None
	out
	None
	return
	ref. MfSdkSysRet_E
	remark
	

	demo
	

	

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               13.   File System module
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  144. Module description
This module mainly includes File system APIs.


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  145. Module structure declaration
typedef struct  
{
s32 d_ino;        ///< inode number, file system implementation can use it for any purpose
u8 d_type;        ///< 8-file,other- dir type of file char d_name[256];                ///< file name  
}MfSdkDirent_T;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  146. Constant declarations
  

  

#define MFSDK_FS_WRONLY        (FILE_WRONLY) ///< Write only, there is no return error  
#define MFSDK_FS_RDWR (FILE_RDWR) ///< Read and write, there is no return error
#define MFSDK_FS_APPEND        (FILE_APPEND) ///< Append, create if it does not exist, pointer to the end of the file when it exists  
#define MFSDK_FS_CREAT (FILE_CREAT)        ///< Create, delete rebuild when it already exists


typedef enum  
{
MFSDK_FS_FLAG_WRITE, // read and write MFSDK_FS_FLAG_CREAT, // if file does not exist create
it ,if file exist will be truncated to length 0.
MFSDK_FS_FLAG_READ,// only read
}MfSdkFsFlag_E; typedef enum
{
MFSDK_FS_MODE_READ, // only read MFSDK_FS_MODE_WRITE, // read and write
}MfSdkFsMode_E;


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  147. MfSdkFsSetPath


Prototype
	

LIB_EXPORT s32 MfSdkFsSetPath(const s8 *pPath)
	Function
	

set file path
	Params
	in
	pPath        file path
	out
	None
	return
	MFSDK_FS_RET_O
success
K
	remark
	

	demo
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  148. MfSdkFsCheckPath


Prototype
	

LIB_EXPORT s32 MfSdkFsCheckPath(const s8 *FileName)
	Function
	

check if file exist
	Params
	in
	FileName        file name
	out
	None
	

return
	MFSDK_FS_RET_OK The file exist
	MFSDK_FS_RET_NO
The file does not exist
EXIST
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  149. MfSdkFsClean  


Prototype
	

LIB_EXPORT s32 MfSdkFsClean()
	Function
	

delete all files
	Params
	in
	None
	out
	None
	return
	MFSDK_FS_RET_O
success
K
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     150. MfSdkFsClose


Prototype
	

LIB_EXPORT s32 MfSdkFsClose(FILE_HANDLE handle)
	Function
	

check if file exist
	Params
	in
	handle        file handler
	

  



	out
	None
	

return
	MFSDK_FS_RET_O
success
K
	Other        fail,Ref.MfSdkFsRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     151. MfSdkFsDelete


Prototype
	

LIB_EXPORT s32 MfSdkFsDelete(FILE_HANDLE handle, u32 size)
	Function
	

File truncation
	

Params
	in
	handle        file handler
	size        truncate size
	out
	None
	return
	MFSDK_FS_RET_OK Success
	Other        Fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     152. MfSdkFsGetFreeSpace  


Prototype
	

LIB_EXPORT long MfSdkFsGetFreeSpace(const s8 *drive)
	Function
	

File system remaining space
	Params
	in
	drive        default ""
	out
	None
	return
	>0        success, the remaining space unit:KB
	-1        fail
	remark
	

	demo
	MfSdkFsGetFreeSpace("");
	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        153. MfSdkFsGetTotalSpace


Prototype
	

LIB_EXPORT long MfSdkFsGetTotalSpace(const s8 *drive)
	Function
	

File system total space
	Params
	in
	drive        default ""
	out
	None
	return
	>0        success, the remaining space unit:KB
	-1        fail
	remark
	

	demo
	MfSdkFsGetTotalSpace("");
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        154. MfSdkFsGetModuleVer  


Prototype
	

LIB_EXPORT s32 MfSdkFsGetModuleVer(char *pszVer)
	Function
	

Get File module version
	Params
	in
	None
	out
	pszVer
	

return
	MFSDK_FS_RET_O
success
K
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           155. MfSdkFsLseek


Prototype
	LIB_EXPORT long MfSdkFsLseek(FILE_HANDLE handle, long offset, s32 origin)
	Function
	

Locating file pointer
	Params
	in
	handle        file handler
	

  



	

	offset
	origin        start position
	out
	None
	return
	>=0        success, offset position
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           156. MfSdkFsMkdir  


Prototype
	

LIB_EXPORT s32 MfSdkFsMkdir(s8* dirName)
	Function
	Creating directories does not support recursive creation.
	Params
	in
	dirName
	out
	None
	

return
	MFSDK_FS_RET_O
success
K
	Other        fail
	remark
	

	

demo
	if(MfSdkFsMkdir(“edxata\\testdir”) == MFSDK_FS_RET_OK)
{
//create a folder of testdir
}
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              157. MfSdkFsOpen


Prototype
	LIB_EXPORT s32 MfSdkFsOpen(const s8* name, s32 flag, s32 mode)
	Function
	

file open
	



Params
	

in
	name        File Name End with NULL
	flag        Open the file flag Ref.MfSdkFsFlag_E
	Open the file mode and refer to the
mode
MfSdkFsMode_E definition.
	out
	None
	return
	>=0        success, file handler
	

  



	Other        fail
	remark
	

	











































demo
	#include <stdio.h> #include <string.h>
#include "libapi_xpos/inc/mfsdk_log.h" #include "libapi_xpos/inc/mfsdk_fs.h"
#define FS_TRACE(...)        MfSdkLogLevel("app", MFSDK_LOG_LEVEL_TRACE,  VA_ARGS );
#define FS_TRACE_BUFF(a, b) MfSdkLogHexBuff("app", MFSDK_LOG_LEVEL_TRACE, a, b);
void TestFsCreateWriteRead(void)  
{
s32 ret = MFSDK_RET_FAILED;
ret = MfSdkFsCheckPath((const s8 *)TEST_FS_FILE); FS_TRACE("MfSdkFsCheckPath:%d\r\n", ret);
if(ret == MFSDK_FS_RET_NOEXIST)
{        // create new file
ret = MfSdkFsOpen((const s8 *)TEST_FS_FILE, MFSDK_FS_FLAG_CREAT, MFSDK_FS_MODE_WRITE);
FS_TRACE("MfSdkFsOpen:%d\r\n", ret); if(ret >= 0)
{
MfSdkFsWrite(ret, "Hello World!", strlen("Hello World!")); MfSdkFsClose(ret);
}
}
else
{
ret = MfSdkFsOpen((const s8 *)TEST_FS_FILE, MFSDK_FS_FLAG_WRITE, MFSDK_FS_MODE_WRITE);
	

	if(ret >= 0)
{
char buffer[1024] = {0}; s32 length = 0;
	

	length = MfSdkFsLseek(ret, 0, MFSDK_FS_SEEK_SET); FS_TRACE("MfSdkFsLseek:%d\r\n", length);
length = MfSdkFsRead(ret, buffer, sizeof(buffer)); FS_TRACE("MfSdkFsRead:%d\r\n", length);
	

	if(length) { FS_TRACE("MfSdkFsRead buffer:%s\r\n", buffer); } length = MfSdkFsLseek(ret, 5, MFSDK_FS_SEEK_SET);
	

  

FS_TRACE("MfSdkFsLseek:%d\r\n", length); memset(buffer, 0, sizeof(buffer));  
length = MfSdkFsRead(ret, buffer, sizeof(buffer)); FS_TRACE("MfSdkFsRead:%d\r\n", length);


if(length) { FS_TRACE("MfSdkFsRead buffer:%s\r\n", buffer); } length = MfSdkFsLseek(ret, 0, FILE_SEEK_CUR); FS_TRACE("FILE_SEEK_CUR MfSdkFsLseek:%d\r\n", length); memset(buffer, 0, sizeof(buffer));
length = MfSdkFsRead(ret, buffer, sizeof(buffer)); FS_TRACE("MfSdkFsRead:%d\r\n", length);


if(length) { FS_TRACE("MfSdkFsRead buffer:%s\r\n", buffer); } length = MfSdkFsLseek(ret, 0, FILE_SEEK_END); FS_TRACE("FILE_SEEK_END MfSdkFsLseek:%d\r\n", length); memset(buffer, 0, sizeof(buffer));
length = MfSdkFsRead(ret, buffer, sizeof(buffer)); FS_TRACE("MfSdkFsRead:%d\r\n", length);


if(length) { FS_TRACE("MfSdkFsRead FILE_SEEK_CUR buffer:%s\r\n", buffer); }
MfSdkFsClose(ret);
}
}
}


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              158. MfSdkFsPathClean


Prototype
	

LIB_EXPORT s32 MfSdkFsPathClean(s8* path)
	Function
	

	Params
	in
	path
	out
	None
	

return
	MFSDK_FS_RET_O
success
K
	Other        fail
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              159. MfSdkFsRead


Prototype
	LIB_EXPORT s32 MfSdkFsRead(FILE_HANDLE handle, char
*buffer, s32 size)
	Function
	

file read
	

Params
	in
	handle        file handler
	size        read size
	out
	buffer        read buffer
	return
	>0        success, the number of bytes actually read
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              160. MfSdkFsReadLine  


Prototype
	LIB_EXPORT s32 MfSdkFsReadLine(FILE_HANDLE pFile, s8
*pLineBuff,u32 LineBuffSize)
	Function
	

Read a line of text and support.
	

Params
	in
	pFile        file handler
	size        Line Buff Size
	out
	pLineBuff        Text data read
	

return
	MFSDK_FS_RET_O
success
K
	Other        fail
	remark
	For text files, read one row of data from the current location and
jump to the next line.
	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 161. MfSdkFsReadProfileInt




LIB_EXPORT s32 MfSdkFsReadProfileInt(const s8* section, const s8* key, s32 default_value, const s8* file)    
  

Function
	

Read int value in initialization file.
	



Params
	

in
	section        name of the section containing the key name
	key        name of the key pairs to value
	default_value        default value of result
	file        path of the initialization file
	out
	None
	return
	profile int value,if read fail, return default value
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 162. MfSdkFsReadProfileString  


Prototype
	LIB_EXPORT s32 MfSdkFsReadProfileString(const s8* section, const s8* key, s8* value, s32 size, const s8* default_value, const
s8* file)
	Function
	

Read string in initialization file.
	





Params
	



in
	section        name of the section containing the key name
	key        name of the key pairs to value
	size        size of result's buffer
	default_value        default value of result
	file        path of the initialization file
	out
	pointer to the buffer that receives the retrieved
value
string
	return
	1        read success
	0        read fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    163. MfSdkFsUnlink


Prototype
	

LIB_EXPORT s32 MfSdkFsUnlink(const s8 * filename)
	Function
	

Delete file
	

  

Params
	in
	filename        delete file name
	out
	None
	

return
	MFSDK_FS_RET_O
success
K
	Other        fail,Ref. MfSdkFsRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    164. MfSdkFsWrite  


Prototype
	LIB_EXPORT s32 MfSdkFsWrite(FILE_HANDLE handle, char
*buffer, s32 size)
	Function
	

File writing
	

Params
	

in
	handle
	File handle to be written
	buffer
	Data to be written
	size
	data sizeto be written
	out
	None
	

return
	Success.The        number        of        bytes        actually
>0
written.
	Other
	fail,Ref. MfSdkFsRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       165. MfSdkFsWriteSync


Prototype
	s32 MfSdkFsWriteSync(FILE_HANDLE handle, char *buffer, s32 size, MFSDKBOOL bSync);
	Function
	

This includes writing through or flushing a disk cache if present
	

Params
	

in
	handle        File handle to be written
	buffer        Data to be written
	size        data sizeto be written
	out
	None
	return
	Success.The        number        of        bytes        actually
>0
written.
	

  



	Other        fail,Ref. MfSdkFsRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       166. MfSdkFsWriteBlockByName


Prototype
	LIB_EXPORT s32 MfSdkFsWriteBlockByName(s8 * file_name, s32 write_start, s8 * write_buff, s32 write_size)
	Function
	

write one block data
	



Params
	

in
	file_name        File handle to be written
	write_start        Data to be written
	write_buff        data sizeto be written
	write_size        write data count
	out
	None
	

return
	Success.The        number        of        bytes        actually
>0
written.
	Other        fail,Ref. MfSdkFsRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       167. MfSdkFsWriteProfileInt  


Prototype
	LIB_EXPORT s32 MfSdkFsWriteProfileInt(const s8* section, const s8* key, s32 value, const s8* file)
	Function
	

write a profile int to a ini file
	





Params
	





in
	name of the section,can't be NULL and empty
section
string
	name of the key pairs to value, can't be NULL
key
and empty string
	value        profile int value
	file        file path of ini file
	out
	None
	return
	1        Success
	0        fail
	

  

remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          168. MfSdkFsWriteProfileString


Prototype
	LIB_EXPORT s32 MfSdkFsWriteProfileString(const s8* section, const s8* key, const s8* value, const s8* file)
	Function
	

write a profile string to a ini file
	





Params
	





in
	name of the section,can't be NULL and empty
section
string
	name of the key pairs to value, can't be NULL
key
and empty string
	value        profile string value
	file        file path of ini file
	out
	None
	return
	1        Success
	0        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          169. MfSdkFsRenamePath  


Prototype
	LIB_EXPORT s32 MfSdkFsRenamePath(const char *oldName, const char *newName)
	Function
	

renames a file, moving it between directories if required
	

Params
	in
	oldName
	newName
	out
	None
	



return
	MFSDK_FS_RET_O
Success
K
	MFSDK_FS_RET_P
Input params NULL
ARM_ERROR
	Other        Failed
	remark
	

	

  

demo        MfSdkFsRenamePath("testdir3\\test.txt", "testdir4\\test.txt");  


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             170. MfSdkFsClearFile


Prototype
	

s32 MfSdkFsClearFile(cchar *FileName);
	Function
	

truncate to 0
	Params
	in
	FileName        File Name
	out
	None
	



return
	MFSDK_FS_RET_O
Success
K
	MFSDK_FS_RET_P
Input params NULL
ARM_ERROR
	Other        Failed
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             171. MfSdkFsDelDirFiles  


Prototype
	

s32 MfSdkFsDelDirFiles(const char* path);
	Function
	

Delete the files in the directory
	Params
	in
	path        path
	out
	None
	return
	Ref. MfSdkFsRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                172. MfSdkFsRenameA


Prototype
	s32 MfSdkFsRenameA(const char *oldpath, const char
*newpath);
	

  

Function
	

File or directory rename.
	Params
	in
	oldpath        old path
	out
	newpath        new path
	return
	Ref. MfSdkFsRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                173. MfSdkFsGetFileLength  


Prototype
	

LIB_EXPORT s32 MfSdkFsGetFileLength(const char *fileName)
	Function
	

Get file length.
	Params
	in
	fileName        File name
	out
	None
	return
	< 0        Failed
	>=0        File length
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   174. MfSdkFsRmdir


Prototype
	

LIB_EXPORT s32 MfSdkFsRmDir(const char *path)
	Function
	

Remove dir
	Params
	in
	path        Dir path
	out
	None
	

return
	MFSDK_FS_RET_O
success
K
	Other        fail
	remark
	

	demo
	if(MfSdkFsRmDir(“exdata\\testdir”) == MFSDK_FS_RET_OK)
{
	

  

// testdir will be removed  
}


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   175. MfSdkFsOpenDir


Prototype
	

LIB_EXPORT void *MfSdkFsOpenDir(const char *path)
	Function
	

Open dir
	Params
	in
	path        Dir path
	out
	None
	return
	Dir pointer        success
	NULL        fail
	remark
	

	















demo
	void *pdp = MfSdkFsOpenDir(dirname); if(pdp != NULL)
{


MfSdkDirent_T *ent = NULL;


while((ent = MfSdkFsReadDir(pdp)) != NULL)


{


FS_TRACE("ql_readdir ent->d_type=%d ,ent->d_name: %s ,ent->d_ino:%d\r\n", ent->d_type, ent->d_name, ent->d_ino);
}


MfSdkFsCloseDir(pdp);


}


else


{


FS_TRACE("folder %s does not exist\r\n",dirname);


}
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   176. MfSdkFsReadDir  


Prototype
	

LIB_EXPORT MfSdkDirent_T* MfSdkFsReadDir(void *dp)
	Function
	

Read dir
	Params
	in
	dp        Dir pointer
	

  



	out
	None
	return
	pointer        success
	NULL        fail
	remark
	

	















demo
	void *pdp = MfSdkFsOpenDir(dirname); if(pdp != NULL)
{


MfSdkDirent_T *ent = NULL;


while((ent = MfSdkFsReadDir(pdp)) != NULL)


{


FS_TRACE("ql_readdir ent->d_type=%d ,ent->d_name: %s ,ent->d_ino:%d\r\n", ent->d_type, ent->d_name, ent->d_ino);
}


MfSdkFsCloseDir(pdp);


}


else


{


FS_TRACE("folder %s does not exist\r\n",dirname);


}
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      177. MfSdkFsCloseDir  


Prototype
	

LIB_EXPORT s32 MfSdkFsCloseDir(void *dp)
	Function
	

Close dir
	Params
	in
	path        Dir path
	out
	None
	return
	Dir pointer        success
	NULL        fail
	remark
	

	







demo
	void *pdp = MfSdkFsOpenDir(dirname); if(pdp != NULL)
{


MfSdkDirent_T *ent = NULL;


while((ent = MfSdkFsReadDir(pdp)) != NULL)


{
FS_TRACE("ql_readdir ent->d_type=%d ,ent->d_name: %s ,ent->d_ino:%d\r\n", ent->d_type, ent->d_name, ent->d_ino);
	

  



}  


MfSdkFsCloseDir(pdp);


}


else


{


FS_TRACE("folder %s does not exist\r\n",dirname);


}








14FIFO module  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         1. Module description
FIFO stands for "First In, First Out," and it refers to a method of organizing and manipulating data structures, particularly in computing and queue management. In a FIFO system, the first item that is added is the first one to be removed. It operates on the principle that the first element added to a collection is the first one to be removed.


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         2. Module structure declaration
  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         3. Constant declarations
  

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         4. MfSdkFifoCreate


Prototype
	LIB_EXPORT MFSDKBOOL MfSdkFifoCreate(MfSdkFifoData_T
* pstFifo ,        s32 nSize )
	Function
	

Create fifo
	

Params
	in
	pstFifo        MfSdkFifoData_T
	nSize        FIFO size
	out
	Nothing
	return
	MFSDK_TRUE        Success
	MFSDK_FALSE Failed
	remark
	

	









demo
	MfSdkFifoData_T playFifo; memset(&playFifo,0,sizeof(MfSdkFifoData_T)); MFSDKBOOL b = MfSdkFifiCreate(&playFifo,4096); if(b)
{
//TODO success
}
else
{
//TODO failed
}
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         5. MfSdkFifoGet  


Prototype
	LIB_EXPORT s32 MfSdkFifoGet(MfSdkFifoData_T* pstFifo,u8 * pData        , s32 nLen)
	Function
	

Get FIFO data.
	

Params
	in
	pstFifo
	MfSdkFifoData_T
	nLen
	pData buffer max size
	out
	pData
	Get FIFO data
	return
	> 0
	Get FIFO data length
	other
	Failed
	remark
	

	demo
	

	

  



                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            6. MfSdkFifoInit


Prototype
	LIB_EXPORT MFSDKBOOL MfSdkFifoInit(MfSdkFifoData_T* pstFifo)
	Function
	

Init FIFO
	Params
	in
	pstFifo        MfSdkFifoData_T
	out
	Nothing
	return
	MFSDK_TRUE        Success
	MFSDK_FALSE        Failed
	remark
	

	











demo
	MfSdkFifoData_T playFifo; memset(&playFifo,0,sizeof(MfSdkFifoData_T)); MFSDKBOOL b = MfSdkFifiCreate(&playFifo,4096); if(b)
{
//TODO success MfSdkFifoInit(&playFifo);
}
else
{
//TODO failed
}
	



                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            7. MfSdkFifoIsEmpty  


Prototype
	LIB_EXPORT MFSDKBOOL MfSdkFifoIsEmpty(MfSdkFifoData_T* pstFifo)
	Function
	

Check whether the queue is empty.
	Params
	in
	pstFifo        MfSdkFifoData_T
	out
	Nothing
	return
	MFSDK_TRUE        Empty
	MFSDK_FALSE        Not empty
	

  

remark
	

	



demo
	MfSdkFifoData_T playFifo; if(MfSdkFifoIsEmpty(&pstFifo))
{
//TODO Empty
}
	



                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               8. MfSdkFifoIsFull


Prototype
	LIB_EXPORT MFSDKBOOL MfSdkFifoIsFull(MfSdkFifoData_T* pstFifo)
	Function
	

Check whether the queue is full.
	Params
	in
	pstFifo        MfSdkFifoData_T
	out
	Nothing
	return
	MFSDK_TRUE        Full
	MFSDK_FALSE        Not full
	remark
	

	



demo
	MfSdkFifoData_T playFifo; if(MfSdkFifoIsFull(&pstFifo))
{
//TODO Full
}
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               9. MfSdkFifoPut  


Prototype
	LIB_EXPORT s32 MfSdkFifoPut(MfSdkFifoData_T* pstFifo, u8 * pData , s32 nLen)
	Function
	

Insert data to FIFO.
	

Params
	

in
	pstFifo        MfSdkFifoData_T
	pData        Insert data buffer
	nLen        Insert data buffer length
	out
	Nothing
	return
	> 0        Actual data length
	< 0        Failed
	

  

remark
	

	







demo
	MfSdkFifoData_T playFifo; char data[128] = {0}; Strcpy(data,"volmax.mp3");
s32 ilen = MfSdkFifoPut(&playFifo,data ,strlen(data)); If(ilen != strlen(data))
{
//TODO failed
}
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  10. MfSdkFifoResize  


Prototype
	LIB_EXPORT MFSDKBOOL MfSdkFifoResize(MfSdkFifoData_T
* pstFifo ,        s32 nSize )
	Function
	

Change the FIFO size.
	

Params
	in
	pstFifo        MfSdkFifoData_T
	nSize        FIFO size
	out
	Nothing
	return
	MFSDK_TRUE        Success
	MFSDK_FALSE Failed
	remark
	

	









demo
	MfSdkFifoData_T playFifo; memset(&playFifo,0,sizeof(MfSdkFifoData_T)); MFSDKBOOL b = MfSdkFifoResize(&playFifo,4096); if(b)
{
//TODO success
}
else
{
//TODO failed
}
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     11. MfSdkGetFifoNum




Prototype        LIB_EXPORT s32 MfSdkGetFifoNum(MfSdkFifoData_T *    
  

Function
	

Get the number of elements in the FIFO.
	Params
	in
	pstFifo        MfSdkFifoData_T
	out
	Nothing
	

return
	> 0        The number of elements in the FIFO
	MFSDK_FIFO_PARM_E
Param invalid
RROR
	remark
	

	demo
	MfSdkFifoData_T playFifo;
s32 fifo_len = MfSdkGetFifoNum(&playFifo);
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     12. MfSdkGetGetFifoSize  


Prototype
	LIB_EXPORT s32 MfSdkGetGetFifoSize(MfSdkFifoData_T * pstFifo)
	Function
	

Get fifo size.
	Params
	in
	pstFifo        MfSdkFifoData_T
	out
	Nothing
	

return
	> 0        FIFO size
	MFSDK_FIFO_PARM_E
Param invalid
RROR
	remark
	

	demo
	MfSdkFifoData_T playFifo;
s32 fifoSize = MfSdkGetGetFifoSize(&playFifo);
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        15. Audio module
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        1. Module description
This module mainly includes Audio APIs.


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        2. Module structure declaration
typedef enum  
{
MFSDK_AUD_PLAY_UNIT_MIN = 0, MFSDK_AUD_PLAY_UNIT_TEN = MFSDK_AUD_PLAY_UNIT_MIN, MFSDK_AUD_PLAY_UNIT_HUNDRED,
  

MFSDK_AUD_PLAY_UNIT_THOUSAND, MFSDK_AUD_PLAY_UNIT_TEN_THOUSAND, MFSDK_AUD_PLAY_UNIT_YUAN, MFSDK_AUD_PLAY_UNIT_MAX  
}MfSdkAudPlayUnit_T;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        3. Constant declarations
typedef enum  
{  
MFSDK_AUD_PAY_MIN = 0, MFSDK_AUD_PAY_PROCESSING = MFSDK_AUD_PAY_MIN, MFSDK_AUD_PAY_FAIL,  
MFSDK_AUD_PAY_SUCCESS, MFSDK_AUD_PAY_SCAN_SUCCESS, MFSDK_AUD_PAY_VOID_SUCCESS, MFSDK_AUD_PAY_MAX,
}MfSdkAudPayResult_E;


typedef enum
{
MFSDK_AUD_PLAY_NUM_MIN = 0, MFSDK_AUD_PLAY_NUM_ZERO = MFSDK_AUD_PLAY_NUM_MIN, MFSDK_AUD_PLAY_NUM_ONE,
MFSDK_AUD_PLAY_NUM_TWO, MFSDK_AUD_PLAY_NUM_THREE, MFSDK_AUD_PLAY_NUM_FOUR, MFSDK_AUD_PLAY_NUM_FIVE, MFSDK_AUD_PLAY_NUM_SIX, MFSDK_AUD_PLAY_NUM_SEVEN, MFSDK_AUD_PLAY_NUM_EIGHT, MFSDK_AUD_PLAY_NUM_NINE, MFSDK_AUD_PLAY_NUM_DOT, MFSDK_AUD_PLAY_NUM_MAX
}MfSdkAudPlayNum_E;


typedef enum
{
MFSDK_AUD_PAY_TYPE_MIN = 0, MFSDK_AUD_PAY_TYPE_WECHAT =
MFSDK_AUD_PAY_TYPE_MIN, MFSDK_AUD_PAY_TYPE_ALIPAY, MFSDK_AUD_PAY_TYPE_UNIONPAY, MFSDK_AUD_PAY_TYPE_CARD,
  

MFSDK_AUD_PAY_TYPE_SCAN = 7, MFSDK_AUD_PAY_TYPE_MAX  
}MfSdkAudPlayPayType_E;


typedef enum
{
MFSDK_AUD_RET_FAILED = -3,        //failed MFSDK_AUD_RET_BOUNDS = -2,                //Array out-of-bounds MFSDK_AUD_RET_PARM_ERROR = -1,        //check param MFSDK_AUD_RET_OK = 0,  
}MfSdkAudRet_E;  


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        4. MfSdkAudPlayVoice


Prototype
	

LIB_EXPORT void MfSdkAudPlayVoice(s8 *msg)
	Function
	

Play Audio file.
	Params
	in
	msg
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        5. MfSdkAudPlayAmt


Prototype
	

LIB_EXPORT s32 MfSdkAudPlayAmt(s32 amount)
	Function
	

Play Amt audio.
	Params
	in
	amount
	out
	Nothing
	return
	Ref. MfSdkAudRet_E
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        6. MfSdkAudPlayBatteryLevel


Prototype
	

LIB_EXPORT s32 MfSdkAudPlayBatteryLevel(void)
	Function
	

Play battery level.
	Params
	in
	Nothing
	out
	Nothing
	return
	Ref. MfSdkAudRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        7. MfSdkAudPlayFile  


Prototype
	LIB_EXPORT s32 MfSdkAudPlayFile(const s8 * folder, const s8
* sndfile)
	Function
	

Play audio file.
	Params
	in
	Nothing
	out
	Nothing
	return
	Ref. MfSdkAudRet_E
	remark
	pub_tts_play and        pub_tts_playOpt
	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           8. MfSdkAudPlay


Prototype
	

LIB_EXPORT s32 MfSdkAudPlay(const s8 * sndfile)
	Function
	

Play audio file.
	Params
	in
	sndfile
	out
	Nothing
	return
	Ref. MfSdkAudRet_E
	remark
	

	

  

demo  


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           9. MfSdkAudPlayNum


Prototype
	LIB_EXPORT s32 MfSdkAudPlayNum(MfSdkAudPlayNum_E index)
	Function
	

	Params
	in
	index
	out
	Nothing
	return
	Ref. MfSdkAudRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           10. MfSdkAudPlayNumber  


Prototype
	

LIB_EXPORT s32 MfSdkAudPlayNumber(s32 num)
	Function
	

	Params
	in
	num
	out
	Nothing
	return
	Ref. MfSdkAudRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              11. MfSdkAudPlayPayResult


Prototype
	LIB_EXPORT s32
MfSdkAudPlayPayResult(MfSdkAudPayResult_E index)
	Function
	

	Params
	in
	index
	out
	Nothing
	

  

return
	Ref. MfSdkAudRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              12. MfSdkAudPlayPayType


Prototype
	LIB_EXPORT s32
MfSdkAudPlayPayType(MfSdkAudPlayPayType_E payType)
	Function
	

	Params
	in
	index
	out
	Nothing
	return
	Ref. MfSdkAudRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              13. MfSdkAudPlayUnit  


Prototype
	LIB_EXPORT s32 MfSdkAudPlayUnit(MfSdkAudPlayUnit_T index)
	Function
	

	Params
	in
	index        Ref. MfSdkAudPlayUnit_T
	out
	Nothing
	return
	Ref. MfSdkAudRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 14. MfSdkAudTtsState


Prototype
	

LIB_EXPORT MFSDKBOOL MfSdkAudTtsState(void)
	Function
	

	

  

Params
	in
	Nothing
	out
	Nothing
	return
	MFSDK_TRUE        success
	MFSDK_FALSE        fail
	remark
	

	demo
	if(MfSdkAudTtsState())
{
//busy
}
else{
//TODO
}
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 15. MfSdkAudBatchBegin  


Prototype
	

LIB_EXPORT void MfSdkAudBatchBegin(void)
	Function
	

	Params
	in
	Nothing
	out
	Nothing
	return
	Nothing
	remark
	Deprecated
	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    16. MfSdkAudBathcEnd


Prototype
	

LIB_EXPORT void MfSdkAudBathcEnd(void)
	Function
	

	Params
	in
	Nothing
	out
	Nothing
	return
	Nothing
	remark
	Deprecated
	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    17. MfSdkAudClear


Prototype
	

LIB_EXPORT void MfSdkAudClear(void)
	Function
	

	Params
	in
	Nothing
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    18. MfSdkAudTtsPlay  


Prototype
	

LIB_EXPORT s32 MfSdkAudTtsPlay(s8 *msg)
	Function
	

TTS
	Params
	in
	msg        Text Message
	out
	Nothing
	return
	Ref. MfSdkAudRet_E
	remark
	

	demo
	MfSdkAudTtsPlay(“exdata\\welc.mp3”);
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       19. MfSdkAudSetVolume


Prototype
	

LIB_EXPORT void MfSdkAudSetVolume(s32 val)
	Function
	

set audio volume
	Params
	in
	val
	out
	Nothing
	return
	Nothing
	remark
	

	

  

demo  


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       20. MfSdkAudSetVolumeRunning


Prototype
	

LIB_EXPORT void MfSdkAudSetVolumeRunning(s32 val)
	Function
	

Set the volume when playing voice
	Params
	in
	val
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       21. MfSdkAudGetVolume  


Prototype
	

LIB_EXPORT s32 MfSdkAudGetVolume()
	Function
	

Get the volume size
	Params
	in
	Nothing
	out
	Nothing
	return
	Volume
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          22. MfSdkAudSetSpeed


Prototype
	

LIB_EXPORT void MfSdkAudSetSpeed(s32 val)
	Function
	

Set audio play speed
	Params
	in
	val
	out
	Nothing
	

  

return
	Nothing
	remark
	unimplemented
	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          16. KeyBoard module
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          23. Module description
This module mainly includes APIs related to KeyBoard.  


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          24. Module structure declaration
None.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          25. Constant declarations
typedef enum
{
MFSDK_KB_RET_TIMEOUT = -4, //time over MFSDK_KB_RET_FAILED = -3, //failed MFSDK_KB_RET_BOUNDS = -2, //Array out-of-bounds MFSDK_KB_RET_PARM_ERROR = -1, //check param MFSDK_KB_RET_OK = 0,  
}MfSdkKbRet_E;


typedef enum
{
MFSDK_VK_INVALID = -1,


MFSDK_VK_0 = 0x30, MFSDK_VK_1 = 0x31, MFSDK_VK_2 = 0x32, MFSDK_VK_3 = 0x33, MFSDK_VK_4 = 0x34, MFSDK_VK_5 = 0x35, MFSDK_VK_6 = 0x36, MFSDK_VK_7 = 0x37, MFSDK_VK_8 = 0x38, MFSDK_VK_9 = 0x39,


MFSDK_VK_CTL = 100, MFSDK_VK_UP , MFSDK_VK_DOWN, MFSDK_VK_LEFT,
  

MFSDK_VK_RIGHT,  


MFSDK_VK_F1, MFSDK_VK_F2, MFSDK_VK_BACKSPACE, MFSDK_VK_ESC, MFSDK_VK_ENTER,  
MFSDK_VK_XING, // start MFSDK_VK_JING, //Hash
}MfSdkKbKeyCode_E;  


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          26. MfSdkKbKeySetParam


Prototype
	LIB_EXPORT void MfSdkKbKeySetParam(int key, int short_press_time, int long_press_time, int short_press_delay)
	Function
	

	



Params
	

in
	key
	short_press_time
	long_press_time
	short_press_delay
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          27. MfSdkKbGetKeySound


Prototype
	

LIB_EXPORT s32 MfSdkKbGetKeySound()
	Function
	

	Params
	in
	Nothing
	out
	Nothing
	return
	0        close
	1        open
	remark
	

	

  

demo  


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          28. MfSdkKbSetKeySound


Prototype
	

LIB_EXPORT void MfSdkKbSetKeySound(s32 nOpen)
	Function
	

	Params
	in
	nOpen        1 open; 0 close
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          29. MfSdkKbWaitKey  


Prototype
	

LIB_EXPORT s32 MfSdkKbWaitKey(s32 TimeOut)
	Function
	Waiting button, waits for the button within the set time, while the Nothing button waits for the timeout.
	

Params
	in
	Waiting timeout time (seconds), 0 means
TimeOut
blocking
	out
	Nothing
	return
	>=0        key value
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             17. Lcd module
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             30. Module description
This module mainly includes APIs related to LCD.


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             31. Module structure declaration
        None.        
  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             32. Constant declarations
typedef enum  
{
MFSDK_LCD_OFF = 0, //turn off backlight MFSDK_LCD_AUTO = 1,// system automatically controls MFSDK_LCD_ON = 2, //backlight is always bright
}MfSdkLcdStatus_E;    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             33. MfSdkLcdBackLight


Prototype
	

LIB_EXPORT s32 MfSdkLcdBackLight(s32 status)
	Function
	

	Params
	in
	status        Ref. MfSdkLcdStatus_E
	

  



	

	MFSDK_LCD_OFF-OFF,MFSDK_LCD_O
N-ON
	out
	Nothing
	return
	Ref. MfSdkLcdRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             34. MfSdkLcdSegmentBackLight


Prototype
	

LIB_EXPORT s32 MfSdkLcdSegmentBackLight(s32 status)
	Function
	

Segment code LCD
	

Params
	

in
	Ref. MfSdkLcdStatus_E
status        MFSDK_LCD_OFF-OFF,MFSDK_LCD_O N-ON
	out
	Nothing
	return
	Ref. MfSdkLcdRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             35. MfSdkLcdGetSubProbe  


Prototype
	

LIB_EXPORT s32 MfSdkLcdGetSubProbe()
	Function
	

	Params
	in
	Nothing
	out
	Nothing
	return
	Ref. MfSdkLcdRet_E
	remark
	unimplemented
	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                36. MfSdkLcdSetIndex


Prototype
	

LIB_EXPORT void MfSdkLcdSetIndex(s32 index)
	Function
	

	Params
	in
	index
	out
	Nothing
	return
	Nothing
	remark
	unimplemented
	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                37. MfSdkLcdGetPowerDownTime  


Prototype
	

LIB_EXPORT s32 MfSdkLcdGetPowerDownTime()
	Function
	

Get the shutdown time
	Params
	in
	Nothing
	out
	Nothing
	return
	Shutdown time
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   38. MfSdkLcdSetPowerDownTime


Prototype
	

LIB_EXPORT void MfSdkLcdSetPowerDownTime(s32 ntime)
	Function
	

Set the shutdown time
	Params
	in
	ntime        Shutdown time unit: second
	out
	Nothing
	return
	Nothing
	remark
	

	

  

demo  


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   39. MfSdkLcdGetBackLightTime


Prototype
	

LIB_EXPORT s32 MfSdkLcdGetBackLightTime()
	Function
	

Get BackLight time
	Params
	in
	Nothing
	out
	Nothing
	return
	Backlight time
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   40. MfSdkLcdSetBackLightTime  


Prototype
	

LIB_EXPORT void MfSdkLcdSetBackLightTime(s32 ntime)
	Function
	

Set backlight time
	Params
	in
	ntime        Backlight time
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      41. MfSdkLcdGetFrontBackLightTime


Prototype
	

s32 MfSdkLcdGetFrontBackLightTime();
	Function
	

Get Front Screen Backlight time (for MP70A6)
	Params
	in
	None
	out
	None
	

  

return
	Backlight time
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      42. MfSdkLcdSetFrontBackLightTime


Prototype
	

void MfSdkLcdSetFrontBackLightTime(s32 ntime);
	Function
	

Set Front Screen Backlight time (for MP70A6)
	

Params
	in
	Backlight time,max value 99999999
ntime
unit:second
	out
	None
	return
	None
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      43. MfSdkLcdGetRearBackLightTime  


Prototype
	

s32 MfSdkLcdGetRearBackLightTime();
	Function
	

Get Rear Screen Backlight time (for MP70A6)
	Params
	in
	None
	out
	None
	return
	Backlight time
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         44. MfSdkLcdSetRearBackLightTime




Prototype        void MfSdkLcdSetRearBackLightTime(s32 ntime);  
  

Function
	

Set Rear Screen Backlight time (for MP70A6)
	

Params
	in
	Backlight time,max value 99999999
ntime
unit:second
	out
	None
	return
	None
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         45. MfSdkLcdBrightnessLevelSettings  


Prototype
	s32 MfSdkLcdBrightnessLevelSettings(MfSdkLcdBrighnesstLevel_E
level);
	Function
	

Screen Brightness Level Settings
	Params
	in
	level        MfSdkLcdBrighnesstLevel_E level        0~5
	out
	None
	return
	Refer to MfSdkLcdRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            46. MfSdkLcdAutoFlush


Prototype
	

s32 MfSdkLcdAutoFlush(MFSDKBOOL bValue);
	Function
	

Whether to auto Refresh the LCD
	

Params
	in
	true-enble flush lcd,false-disable flush
bValue
lcd
	out
	None
	return
	Refer to MfSdkLcdRet_E
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            47. MfSdkLcdSetNormalDirection


Prototype
	

s32 MfSdkLcdSetNormalDirection();
	Function
	

Return to normal display
	Params
	in
	None
	out
	None
	return
	Refer to MfSdkLcdRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            48. MfSdkLcdArrowDisplay  


Prototype
	void MfSdkLcdArrowDisplay(MfSdkLcdArrow_E index, MFSDKBOOL enable);
	Function
	

Status Bar Display Up/Down Arrow.only support SR600mini
	

Params
	in
	index        0:up,1:down
	enable        1:on,0:off
	out
	None
	return
	None
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               49. MfSdkLcdBacklightIsBright


Prototype
	

MFSDKBOOL MfSdkLcdBacklightIsBright();
	Function
	

Check the screen backlight status
	Params
	in
	None
	out
	None
	return
	1        on
	

  



	0        off
	remark
	

	demo
	

	



                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               18. Log module
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               50. Module description  
This module mainly includes APIs about log output.


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  51. Module structure declaration
None.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  52. Constant declarations
//close log output
#define MFSDK_LOG_CLOSE_OUT (0)
//The logs will be output from the USB port #define MFSDK_LOG_USB_OUT (1)
//The logs will be output from the wifi port #define MFSDK_LOG_WIFI_OUT (2)  


typedef enum
{
MFSDK_LOG_LEVEL_TRACE = 0, //trace MFSDK_LOG_LEVEL_DEBUG, //debug MFSDK_LOG_LEVEL_INFO, //info MFSDK_LOG_LEVEL_WARN, //warning MFSDK_LOG_LEVEL_ERROR,//error MFSDK_LOG_LEVEL_FATAL, MFSDK_LOG_LEVEL_FILE,
}MfSdkLogLevel_E;


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  53. MfSdkLogSoundSet


Prototype
	

LIB_EXPORT s32 MfSdkLogSoundSet(s32 val)
	Function
	

Set the log output mode
	

  



Params
	in
	MFSDK_LOG_USB_OUT/MFSDK_LOG
val
_WIFI_OUT
	out
	Nothing
	return
	0
	success
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  54. MfSdkLog


Prototype
	LIB_EXPORT void MfSdkLog(const char *pTag,const char
*fmt,...)
	Function
	

module is "MFSDKLOG"
	

Params
	

in
	pTag
	fmt
	...
	out
	Nothing
	return
	Nothing
	remark
	default level:MFSDK_LOG_LEVEL_TRACE
	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  55. MfSdkLogTip  


Prototype
	LIB_EXPORT void MfSdkLogTip(const char* module,
MfSdkLogLevel_E level, const void* Buffer, s32 nSize, char* tip, s32 breakline)
	Function
	

	





Params
	





in
	module
	level
	Buffer
	nSize
	tip
	breakline
	out
	Nothing
	return
	Nothing
	

  

remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     56. MfSdkLogHexBuff


Prototype
	LIB_EXPORT void MfSdkLogHexBuff(const char* module, MfSdkLogLevel_E level,s8*Buffer, s32 nSize)
	Function
	

	



Params
	

in
	module
	level
	Buffer
	nSize
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     57. MfSdkLogLevel  


Prototype
	LIB_EXPORT void MfSdkLogLevel(const char* module, MfSdkLogLevel_E level, const char* fmt, ...)
	Function
	

	



Params
	

in
	module
	level
	fmt
	...
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        58. MfSdkLogOutputSwitch


Prototype
	

void MfSdkLogOutputSwitch(MFSDKBOOL enable);
	Function
	

default enable
	



Params
	

in
	MFSDK_TRUE: enable output of logs ,
val                MFSDK_FALSE: disenable output of logs
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        19. Power module  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           59. Module description
This module mainly includes APIs about power, battery and backlight time set.


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           60. Module structure declaration
None.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           61. Constant declarations
typedef enum
{
MFSDK_POWER_RET_UNSUPPORT = -4, // dont support MFSDK_POWER_RET_FAILED = -3, //failed MFSDK_POWER_RET_BOUNDS = -2, //Array out-of-bounds MFSDK_POWER_RET_PARM_ERROR = -1, //check param MFSDK_POWER_RET_OK = 0, //success  
}MfSdkPowerRet_E;


typedef enum{ MFSDK_POWER_POWER_MANAGER_REBOOT, MFSDK_POWER_POWER_MANAGER_SHUTDOWN, MFSDK_POWER_MANAGER_ENTER_PAGE = 4,
  

}MfSdkPowerManagerType_E;  


typedef enum { MFSDK_POWER_SUPPLY_CAPACITY_LEVEL_UNKNOWN = 0, MFSDK_POWER_SUPPLY_CAPACITY_LEVEL_CRITICAL, MFSDK_POWER_SUPPLY_CAPACITY_LEVEL_LOW, MFSDK_POWER_SUPPLY_CAPACITY_LEVEL_NORMAL, MFSDK_POWER_SUPPLY_CAPACITY_LEVEL_HIGH, MFSDK_POWER_SUPPLY_CAPACITY_LEVEL_FULL,  
}MfSdkPowerCapacityLevel_E;


typedef enum  
{
MFSDK_POWER_LOW_BATTERY_REMID = 0, MFSDK_POWER_LOW_BATTERY_SHUTDOWN,
}
MfSdkPowerPageParm_E;


typedef enum
{
MFSDK_POWER_ACONLINE_SLEEP_DN = 0, // Unable to sleep when connected to external power
MFSDK_POWER_ACONLINE_SLEEP_EN = 1, //        Enable to sleep when connected to external power
}MfSdkPowerSleep_E;
typedef s32 (*MfSdkPowerResumeProcCb)(s32 ret);
typedef s32 (*MfSdkPowerManagerCb)(MfSdkPowerManagerType_E type);
typedef void(*MfSdkPowerPageCbFunc)(int);


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           62. MfSdkPowerResumeProc


Prototype
	LIB_EXPORT s32
MfSdkPowerResumeProc(MfSdkPowerResumeProcCb pFuncCb)
	Function
	

set resume callback
	Params
	in
	pFuncCb
	out
	Nothing
	return
	Ref. MfSdkPowerRet_E
	remark
	

	

  

demo  


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           63. MfSdkPowerManagerSetFunc


Prototype
	void MfSdkPowerManagerSetFunc(MfSdkPowerManagerCb cb);
	Function
	

set power manager callback
	Params
	in
	cb        power manager callback
	out
	Nothing
	return
	None
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           64. MfSdkPowerLockApp  


Prototype
	

LIB_EXPORT s32 MfSdkPowerLockApp(char *sfun)
	Function
	

	Params
	in
	sfun
	out
	Nothing
	return
	Ref. MfSdkPowerRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              65. MfSdkPowerUnlockApp


Prototype
	

LIB_EXPORT void MfSdkPowerUnlockApp(void)
	Function
	

	Params
	in
	Nothing
	out
	Nothing
	

  

return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              66. MfSdkPowerTaskInit


Prototype
	

LIB_EXPORT s32 MfSdkPowerTaskInit(s32 taskid)
	Function
	

	Params
	in
	taskid
	out
	Nothing
	return
	Ref. MfSdkPowerRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              67. MfSdkPowerTaskSuspend  


Prototype
	LIB_EXPORT s32 MfSdkPowerTaskSuspend(s32 taskid , s32 ms)
	Function
	

Sleep is possible within xx ms
	

Params
	in
	taskid        Task ID
	ms        ms (unit:ms)
	out
	Nothing
	return
	Ref. MfSdkPowerRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 68. MfSdkPowerReset




Prototype        LIB_EXPORT s32 MfSdkPowerReset(void)  
  

Function
	

Restart device.
	Params
	in
	

	out
	

	return
	Ref. MfSdkPowerRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 69. MfSdkPowerPageCb  


Prototype
	LIB_EXPORT s32
MfSdkPowerPageCb(MfSdkPowerPageCbFunc fun)
	Function
	

The device start-up callback.
	Params
	in
	fun
	out
	Nothing
	return
	Ref. MfSdkPowerRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    70. MfSdkPowerPageInit


Prototype
	LIB_EXPORT s32 MfSdkPowerPageInit(void* state, lv_align_t align, lv_coord_t x_ofs, lv_coord_t y_ofs)
	Function
	

	



Params
	

in
	state
	align
	x_ofs
	y_ofs
	out
	Nothing
	return
	Ref. MfSdkPowerRet_E
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    71. MfSdkPowerSetTime


Prototype
	

LIB_EXPORT void MfSdkPowerSetTime(s32 time_num)
	Function
	

Set the sleep mode time
	Params
	in
	time_num        Sleep mode time(unit: second)
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    72. MfSdkPowerOff  


Prototype
	

LIB_EXPORT void MfSdkPowerOff(void)
	Function
	

Power off
	Params
	in
	Nothing
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       73. MfSdkPowerKeySetLight


Prototype
	

LIB_EXPORT void MfSdkPowerKeySetLight()
	Function
	

	Params
	in
	Nothing
	out
	Nothing
	return
	Nothing
	remark
	

	

  

demo  


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       74. MfSdkPowerGetBatteryPercentage


Prototype
	

LIB_EXPORT s32 MfSdkPowerGetBatteryPercentage()
	Function
	

Get the battery percentage.
	Params
	in
	Nothing
	out
	Nothing
	

return
	0-100        Battery Percentage
	MFSDK_POWER_RET_F
fail
AILED
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       75. MfSdkPowerSetBacklightTime  


Prototype
	

LIB_EXPORT s32 MfSdkPowerSetBacklightTime(s32 seconds)
	Function
	

set turn off backlight time
	Params
	in
	seconds
	out
	Nothing
	

return
	MFSDK_POWER_RET_
success
OK
	Other        fail,Ref.MfSdkPowerRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          76. MfSdkPowerSupertimeReset


Prototype
	

LIB_EXPORT s32 MfSdkPowerSupertimeReset(void)
	

  

Function
	

reset backlight time
	Params
	in
	Nothing
	out
	Nothing
	

return
	MFSDK_POWER_RET_
success
OK
	Other        fail,Ref.MfSdkPowerRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          77. MfSdkPowerSwitchResetTick  


Prototype
	

s32 MfSdkPowerSwitchResetTick(void);
	Function
	

Reset the sleep timer
	Params
	in
	Nothing
	out
	Nothing
	

	Ref.MfSdkPowerRet_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             78. MfSdkPowerSleepSwitch


Prototype
	

void MfSdkPowerSleepSwitch(MfSdkPowerSleep_E switchE);
	Function
	

set sleep
	



Params
	

in
	MFSDK_POWER_ACONLINE_SLEEP_
EN:enable,
switchE
MFSDK_POWER_ACONLINE_SLEEP_D
N:disable
	out
	Nothing
	

	Nothing
	remark
	

	

  

demo  


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             20. QR module
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             79. Module description
This module mainly includes APIs about QR & Scanner operations.


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             80. Module structure declaration  
  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                81. Constant declarations
  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                82. MfSdkQrDecode


Prototype
	

LIB_EXPORT s32 MfSdkQrDecode(s8* code, s32 size)
	Function
	

Get scan data
	Params
	in
	size        scan size
	out
	code        scan data
	

return
	MFSDK_QR_RET_FAILED        not found camera
	MFSDK_QR_RET_DECODE_F
decode failed
AILED
	> 0        decode data length
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                83. MfSdkQrScannerClose


Prototype
	

LIB_EXPORT s32 MfSdkQrScannerClose(void)
	Function
	

Close scanner
	Params
	in
	Nothing
	out
	Nothing
	return
	MFSDK_QR_RET_OK        success
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                84. MfSdkQrScannerGetImg  


Prototype
	

LIB_EXPORT s8* MfSdkQrScannerGetImg(void)
	Function
	

Get scan image
	Params
	in
	Nothing
	out
	Nothing
	return
	scan image
	remark
	(MF960: 480*640)
	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   85. MfSdkQrScannerOpen


Prototype
	

LIB_EXPORT s32 MfSdkQrScannerOpen(void)
	Function
	

Open scanner
	Params
	in
	Nothing
	out
	Nothing
	return
	MFSDK_QR_RET_OK        success
	

  



	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   86. MfSdkQrSetScanBoxPosition


Prototype
	

void MfSdkQrSetScanBoxPosition(s32 x, s32 y);
	Function
	

Set scaner preview position
	

Params
	in
	x        x offset
	y        y offset
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   87. MfSdkQrScannerStart  


Prototype
	

LIB_EXPORT s32 MfSdkQrScannerStart(void)
	Function
	

Start scanner
	Params
	in
	Nothing
	out
	Nothing
	return
	MFSDK_QR_RET_OK        success
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      88. MfSdkQrScannerStop




Prototype        LIB_EXPORT s32 MfSdkQrScannerStop(void)  
  

Function
	

Stop scanner
	Params
	in
	Nothing
	out
	Nothing
	return
	MFSDK_QR_RET_OK        success
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      89. MfSdkQrScannerSetPreview  


Prototype
	

LIB_EXPORT void MfSdkQrScannerSetPreview(int value)
	Function
	

Set scaner preview
	Params
	in
	value        1:open 0:close
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	



                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         21. TMS module
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         90. Module description
This module mainly includes APIs about TMS operations.


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         91. Module structure declaration
        None.        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         92. Constant declarations
typedef enum  
{
MFSDK_TMS_RET_FAILED = -3, //failed MFSDK_TMS_RET_BOUNDS = -2, //Array out-of-bounds MFSDK_TMS_RET_PARM_ERROR = -1, //check param
  

MFSDK_TMS_RET_OK = 0, //success  
}MfSdkTmsRet_E;


typedef enum
{
MFSDK_TMS_UPGRADE_DATA = 0, //0 upgrade data only MFSDK_TMS_UPGRADE_APP, //1 upgrade application  
}MfSdkTmsUpdateType_E;


typedef enum
{  
MFSDK_TMS_APP_NOT_BUSY = 0, MFSDK_TMS_APP_STATE_BUSY,
}MfSdkTmsAppState_E;


typedef enum
{
MFSDK_TMS_OTA_LOCAL_FLASH = 0,        //download OTA package
in Flash
MFSDK_TMS_OTA_LOCAL_RAM,        //download OTA package
in RAM
}MfSdkTmsOtaLocal_E;


typedef enum
{
MFSDK_TMS_ACTION_DOWNLOADING = 0,        //tms downloading MFSDK_TMS_ACTION_UPDATEING, //Prepare to upgrade the
downloaded program
MFSDK_TMS_ACTION_CALLBACK,        //App add tms download progress callback
}MfSdkTmsAction_E;


enum {
MFSDK_TMS_WAIT_TASK = 0,                // wait task MFSDK_TMS_WAIT_NETWORK_LINK,                // wait network link MFSDK_TMS_NETWORK_ANOMALY,                // network anomaly MFSDK_TMS_CONNETING,                // conneting MFSDK_TMS_CONNET_FAILED,                // connect failed MFSDK_TMS_REQUEST,        // request MFSDK_TMS_RECEIVING,                // receiving
MFSDK_TMS_RECEIVED,        // received MFSDK_TMS_LOGON_FAILURE,        // logon faliure MFSDK_TMS_ILLEGAL_EQUIPMENT, // illegal equipment
  

MFSDK_TMS_FAILURE_SEND,        // failure send  
MFSDK_TMS_FAILURE_RECV,        //failure recv
MFSDK_TMS_DOWNLOAD,        // dowmload
MFSDK_TMS_DOWNLOADING,                        // downloading MFSDK_TMS_DOWNLOAD_LIMIT,        // download limit MFSDK_TMS_ERROR_FORMAT,                        // error format MFSDK_TMS_MD5_ERROR_TRY,                        // md5 error try MFSDK_TMS_DOWNLOAD_COMPLETED, // download completed MFSDK_TMS_DOWNLOAD_CANCEL,                        // download cancel MFSDK_TMS_VALIDATION_FAILURE,                //                validation failure MFSDK_TMS_VERIFICATION_SIGNATURE,                //verification signature MFSDK_TMS_NONEED_TO_UPDATE,                        // no need to update MFSDK_TMS_NEW_VERSION,                        // new version    
MFSDK_TMS_UPDATING,        // updating
MFSDK_TMS_WIFI_UPGRADE,        // wifi upgrade MFSDK_TMS_UPDATE_SUCCESS,        // update success MFSDK_TMS_UPDATE_FAILED,        // update failed MFSDK_TMS_REBOOTING,        // rebooting
}MfSdkTmsResult_E;
/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         * @brief
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         * @param[in] int current value
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         * @param[in] int total value
*/
typedef void (*MfSdkTmsProgressCb)(int, int);
/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         * @brief
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         * @param[in] int result type
*/
typedef void (*MfSdkTmsResultCb)(int);
/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         * @brief
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         * @param[in] int result type
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         * @return 1 : continue
*/
typedef s32 (*MfSdkTmsActionCb)(MfSdkTmsAction_E type);


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         93. MfSdkTmsSetProgressCallback


Prototype
	LIB_EXPORT void MfSdkTmsSetProgressCallback(MfSdkTmsProgressCb
pFunCallback)
	

  

Function
	

Set TMS progress callback function
	Params
	in
	Nothing
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         94. MfSdkTmsSetResultCallback  


Prototype
	void MfSdkTmsSetResultCallback(MfSdkTmsResultCb pFunCallback);
	Function
	

tms result callback
	Params
	in
	pFunCallback        Callback
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            95. MfSdkTmsHeartBeat


Prototype
	

LIB_EXPORT s32 MfSdkTmsHeartBeat()
	Function
	

TMS heartBeat
	Params
	in
	Nothing
	out
	Nothing
	return
	MFSDK_TMS_RET_OK        success
	Other        fail
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            96. MfSdkTmsUpdate


Prototype
	

LIB_EXPORT void MfSdkTmsUpdate(void)
	Function
	

TMS Update
	Params
	in
	Nothing
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            97. MfSdkTmsUpdateFile  


Prototype
	LIB_EXPORT s32 MfSdkTmsUpdateFile(const s8* file, MfSdkTmsUpdateType_E flag)
	Function
	

	

Params
	in
	file
	flag
	out
	Nothing
	return
	

	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               98. MfSdkTmsAppBusy


Prototype
	LIB_EXPORT void MfSdkTmsAppBusy(MfSdkTmsAppState_E nBusyState)
	Function
	

Set TMS state
	Params
	in
	nBusyState
	out
	Nothing
	return
	Nothing
	

  

remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               99. MfSdkTmsCheckTimeDisable


Prototype
	

LIB_EXPORT void MfSdkTmsCheckTimeDisable()
	Function
	

Disable check time from tms server.Only for traditional POS.
	Params
	in
	nBusyState
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               100. MfSdkTmsGetMsg  


Prototype
	

LIB_EXPORT s8 *MfSdkTmsGetMsg()
	Function
	

Gets the current tms message
	Params
	in
	Nothing
	out
	Nothing
	return
	tms msg string
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  101. MfSdkTmsGetResult


Prototype
	

LIB_EXPORT s8 *MfSdkTmsGetResult()
	Function
	

Get tms result information
	Params
	in
	Nothing
	

  



	out
	Nothing
	return
	tms result string
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  102. MfSdkTmsSetSig


Prototype
	

LIB_EXPORT void MfSdkTmsSetSig(s32 flag);
	Function
	Whether the tms upgrade verifies the signature.(For traditional POS,Soundbox not applicable)
	Params
	in
	s32 flag        0-enable ,1-disable
	out
	Nothing
	return
	none
	remark
	

	demo
	MfSdkTmsSetSig(0)/MfSdkTmsSetSig(1);
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  103. MfSdkTmsUpdateOta  


Prototype
	

s32 MfSdkTmsUpdateOta(char *filename,char *flag);
	Function
	

update OTA
	

Params
	

in
	download file path and name eg.
filename
"exdata\\down.tmp"
	flag        fix string "ota.bin"
	out
	Nothing
	return
	MFSDK_TMS_RET_OK        success
	other        fail
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     104. MfSdkTmsSetConnectRetryCnt


Prototype
	

void MfSdkTmsSetConnectRetryCnt(u32 count);
	Function
	

Set TMS connect retry count
	Params
	in
	none
	out
	none
	return
	none
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     105. MfSdkTmsSetErrorRetryCnt  


Prototype
	

void MfSdkTmsSetErrorRetryCnt(u32 count);
	Function
	

Set TMS error retry count
	Params
	in
	none
	out
	none
	return
	none
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        106. MfSdkTmsEnable


Prototype
	

void MfSdkTmsEnable(MFSDKBOOL b);
	Function
	

Whether to enable the TMS service. Default support for TMS.
	

Params
	in
	MFSDK_TRUE-enable ,
b
MFSDK_FALSE-disable
	out
	none
	return
	none
	

  

remark
	

	demo
	//if disable TMS


MfSdkTmsEnable(MFSDK_FALSE);
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        107. MfSdkTmsSetActionCallback


Prototype
	s32 MfSdkTmsSetActionCallback(MfSdkTmsActionCb pFunCallback);
	Function
	

Set TMS action progress callback function
	Params
	in
	pFunCallback        Callback
	out
	none
	return
	For details, see
MfSdkTmsResult_E
	remark
	

	demo
	

	



                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        108. MfSdkTmsEnableSyncTime  


Prototype
	

void MfSdkTmsEnableSyncTime(MFSDKBOOL b);
	Function
	Whether to synchronize TMS time (enabled by default).Only for Soundbox.
	

Params
	

in
	MFSDK_TRUE - enable
b
MFSDK_FALSE - disable
	out
	none
	return
	

	remark
	

	demo
	

	

  





                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           22. LVGL module
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           109. Module description
This module mainly includes APIs about LVGL functions.


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           110. Module structure declaration  
None.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              111. Constant declarations
typedef enum
{
MFSDK_LVGL_OPER_SUCC = 0,
MFSDK_LVGL_OPER_FAIL = -1,
MFSDK_LVGL_OPER_CANCEL = -2,
MFSDK_LVGL_OPER_TIMEOUT = -3,  
MFSDK_LVGL_OPER_BACKSPACE = -4,
} MfSdkLvglOper_E;


typedef enum
{
MFSDK_LVGL_LARGE_FONT = 2,
MFSDK_LVGL_NORMAL_FONT = 1,
MFSDK_LVGL_SMALL_FONT = 0,
} MfSdkLvglFont_E;


typedef enum
{
MFSDK_LVGL_ALIGN_RIGHT = 2,
MFSDK_LVGL_ALIGN_CENTER = 1,
MFSDK_LVGL_ALIGN_LEFT = 0,
} MfSdkLvglAlign_E;


typedef enum
{
MFSDK_LVGL_INPUT_MODE_NUM = 0,
MFSDK_LVGL_INPUT_MODE_TEXT = 1,
MFSDK_LVGL_INPUT_MODE_IP = 2,


MFSDK_LVGL_INPUT_MODE_PWD = 3,  
MFSDK_LVGL_INPUT_MODE_AMOUNT = 4,
} MfSdkLvglInput_E;


typedef enum
{
MFSDK_LVGL_INPUTTEXT_IMAGE = 0,  


}MfSdkLvglImageType_E;


typedef enum {  
MFSDK_LVGL_SB_320_240_BLACK = 0, //320*240 MFSDK_LVGL_SB_320_240_WHITE = 1, //320*240 MFSDK_LVGL_SB_480_800_BLACK = 4, //480*800 MFSDK_LVGL_SB_480_800_WHITE = 5, //480*800
}MfSdkLvglStatusBar_E;


typedef enum
{
  







































OVER,
















OVER,
________________
MFSDK_LVGL_NETMENU_EXIT_TIMEOUT = -1,
MFSDK_LVGL_NETMENU_EXIT_CANCEL = 0, MFSDK_LVGL_NETMENU_NETINFO_EXIT, MFSDK_LVGL_NETMENU_NETSET1_EXIT_TIMEOVER, MFSDK_LVGL_NETMENU_NETSET1_EXIT, MFSDK_LVGL_NETMENU_NET4G_ALREADY_EXIT, MFSDK_LVGL_NETMENU_NET4G_FAILED_NO_SIM, MFSDK_LVGL_NETMENU_NET4G_FAILED_EXIT_TIMEOVER, MFSDK_LVGL_NETMENU_NET4G_SUCCEED_EXIT, MFSDK_LVGL_NETMENU_NETWIFI_FAILED_EXIT_TIMEOVER, MFSDK_LVGL_NETMENU_NETWIFI_SUCCEED_EXIT, MFSDK_LVGL_NETMENU_NETADDWIFI_EXIT_TIMEOVER, MFSDK_LVGL_NETMENU_NETADDWIFI_EXIT, MFSDK_LVGL_NETMENU_NETWIFISAVE_EXIT_TIMEOVER, MFSDK_LVGL_NETMENU_NETWIFISAVE_EXIT, MFSDK_LVGL_NETMENU_NETWIFI_SWITCH_FAILED_EXIT_TIME


MFSDK_LVGL_NETMENU_NETWIFI_SWITCH_FAILED_EXIT, MFSDK_LVGL_NETMENU_NETWIFISCANING_EXIT_TIMEOVER, MFSDK_LVGL_NETMENU_NETWIFISCANING_EXIT, MFSDK_LVGL_NETMENU_NETWIFILIST_EXIT_TIMEOVER, MFSDK_LVGL_NETMENU_NETWIFILIST_EXIT, MFSDK_LVGL_NETMENU_NETWIFIINPUTPASSWORD_EXIT_TIME
  

MFSDK_LVGL_NETMENU_NETWIFIINPUTPASSWORD_EXIT, MFSDK_LVGL_NETMENU_NETWIFICONNECT_SUCCEED_EXIT, MFSDK_LVGL_NETMENU_NETWIFICONNECT_FAILED_EXIT,  
}MfSdkLvglNetMenuExitValue_E;


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              112. MfSdkLvglInit


Prototype
	

LIB_EXPORT s32 MfSdkLvglInit(void)
	Function
	

lvgl module initialization
	Params
	in
	Nothing
	out
	Nothing
	return
	0        success
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              113. MfSdkLvglGetPageBody  


Prototype
	

LIB_EXPORT lv_obj_t* MfSdkLvglGetPageBody()
	Function
	

Get the modal lvgl page parent object
	Params
	in
	Nothing
	out
	Nothing
	return
	0        fail
	Other        success,lvgl page parent object
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 114. MfSdkLvglExit


Prototype  
	

LIB_EXPORT s32 MfSdkLvglExit(void)
	

  

Function
	

lvgl module exit
	Params
	in
	Nothing
	out
	Nothing
	return
	0        success
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 115. MfSdkLvglCls  


Prototype
	

LIB_EXPORT void MfSdkLvglCls(void)
	Function
	

clear screen
	Params
	in
	Nothing
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    116. MfSdkLvglClsEnableStatusBar


Prototype
	

LIB_EXPORT void MfSdkLvglClsEnableStatusBar(s32 status)
	Function
	

enable status bar
	Params
	in
	status        0 - off, 1 - on
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    117. MfSdkLvglEnableDefaultStatusBarIcons


Prototype
	LIB_EXPORT void MfSdkLvglEnableDefaultStatusBarIcons(s32 status)
	Function
	

enable default status bar icons
	Params
	in
	status        0 - off, 1 - on
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    118. MfSdkLvglClearLine  


Prototype
	

LIB_EXPORT void MfSdkLvglClearLine(s32 lineNo)
	Function
	

clear specified line
	Params
	in
	lineNo        line number(starting from 0)
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       119. MfSdkLvglGetStatusBarHeight


Prototype
	

LIB_EXPORT s32 MfSdkLvglGetStatusBarHeight()
	Function
	

get status bar height
	Params
	in
	Nothing
	out
	Nothing
	return
	height
	remark
	

	

  

demo  


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       120. MfSdkLvglCreateButtons


Prototype
	LIB_EXPORT s32
MfSdkLvglCreateButtons(MfSdkLvglButtons_T items[], s32 size)
	Function
	

create buttons
	

Params
	

in
	create buttons parameter.If items->id < 0 is
items
not clickable
	size        items size
	out
	Nothing
	return
	height
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       121. MfSdkLvglClearAll  


Prototype
	

LIB_EXPORT void MfSdkLvglClearAll(void)
	Function
	

clear screen without line 0
	Params
	in
	Nothing
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          122. MfSdkLvglWaitKey


Prototype
	

LIB_EXPORT s32 MfSdkLvglWaitKey(s32 timeout)
	Function
	

waiting for key pressed
	

  

Params
	in
	timeout        timeout(second)
	out
	Nothing
	return
	>=0        success, key value or button id
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          123. MfSdkLvglWaitKeyMs


Prototype
	

LIB_EXPORT s32 MfSdkLvglWaitKeyMs(s32 timeoutMs)
	Function
	

waiting for key pressed
	Params
	in
	timeout        timeout(ms)
	out
	Nothing
	return
	>=0        success, key value or button id
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          124. MfSdkLvglClrKeyFlag  


Prototype
	

LIB_EXPORT void MfSdkLvglClrKeyFlag()
	Function
	

Clean the key flag bit before getting the key loop
	Params
	in
	Nothing
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             125. MfSdkLvglCheckKey


Prototype
	

LIB_EXPORT MFSDKBOOL MfSdkLvglCheckKey(void)
	Function
	

check if key pressed
	Params
	in
	Nothing
	out
	Nothing
	return
	1        key pressed
	0        no key pressed
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             126. MfSdkLvglGetKey  


Prototype
	

LIB_EXPORT s32 MfSdkLvglGetKey(void)
	Function
	

get key value
	Params
	in
	Nothing
	out
	Nothing
	return
	>=0        Ref. MfSdkKbKeyCode_E
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                127. MfSdkLvglDispTextCoord


Prototype
	LIB_EXPORT s32 MfSdkLvglDispTextCoord(s32 x, s32 y, s32 font, s8* text)
	Function
	

disp text by coordinate
	Params
	in
	x        horizontal coordinate
	y        vertical coordinate
	

  



	

	font        0 - small,1 - normal,2 - big
	text        text
	out
	Nothing
	return
	0        success
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                128. MfSdkLvglDispTextLine  


Prototype
	LIB_EXPORT s32 MfSdkLvglDispTextLine(s32 lineNo, s32 font, const s8* text, s32 align, u8 reverse)
	Function
	

disp text by line number
	





Params
	



in
	lineNo        line number(starting from 0)
	font        font(0 - small,1 - normal,2 - big)
	text        text
	align        align type(0 - left, 1 - center, 2 - right)
	reverse        reverse mode(1 - yes, 0 - no)
	out
	Nothing
	return
	0        success
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   129. MfSdkLvglDispMenuText


Prototype
	LIB_EXPORT s32 MfSdkLvglDispMenuText(s32 font, s8* title, MfSdkLvglMenuText_T menus[], s32 size, s32 select, s32 timeout)
	Function
	

disp text menus
	



Params
	



in
	font        font(0 - small,1 - normal,2 - big)
	title        title
	menus        menu list
	size        list size
	select        default menu id
	

  



	

	timeout        timeout(second)
	out
	Nothing
	return
	>=0        success, menu id
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   130. MfSdkLvglDispMenuIcon


Prototype
	LIB_EXPORT s32 MfSdkLvglDispMenuIcon(s32 font, s8* title, MfSdkLvglMenuIcon_T menus[], s32 size, s32 timeout)
	Function
	

disp image menus
	





Params
	



in
	font        0 - small,1 - normal,2 - big
	title        title
	menus        menu list
	size        list size
	timeout        timeout(second)
	out
	Nothing
	return
	>=0        success, menu id
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   131. MfSdkLvglDispButton  


Prototype
	LIB_EXPORT s32 MfSdkLvglDispButton(s32 lineNo, s32 font, MfSdkButtonIcon_T buttons[], s32 size, s32 timeout)
	Function
	

disp buttons
	





Params
	



in
	lineNo        line number(starting from 0)
	font        font(0 - small,1 - normal,2 - big)
	buttons        button list
	size        list size
	timeout        timeout(second)
	out
	Nothing
	

  

return
	>=0        success, button id
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      132. MfSdkLvglMessageBox


Prototype
	LIB_EXPORT s32 MfSdkLvglMessageBox(s32 width, s32 height, s8* msg, s8* btnLeft, s8* btnRight, s32 timeout)
	Function
	

disp text menus
	





Params
	





in
	width        width
	height        height
	msg        message
	btnLeft        left button text
	btnRight        right button text
	timeout        timeout(second)
	out
	Nothing
	return
	>=0        success, button id (0 - left, 1 - right)
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      133. MfSdkLvglDispList  


Prototype
	LIB_EXPORT s32 MfSdkLvglDispList(s32 font, s8* title, s8* items[], s32 size, s32 timeout)
	Function
	

disp text list
	





Params
	



in
	font        font(0 - small,1 - normal,2 - big)
	title        title
	items        text list
	size        list size
	timeout        timeout(second)
	out
	Nothing
	return
	0        success
	

  



	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         134. MfSdkLvglDispRollpage


Prototype
	LIB_EXPORT s32 MfSdkLvglDispRollpage(s32 font, s8* title, s8* buf, s32 timeout)
	Function
	

disp text rollpage
	



Params
	



in
	font        font(0 - small,1 - normal,2 - big)
	title        title
	buf        text buffer
	timeout        timeout(second)
	out
	Nothing
	return
	0        success
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         135. MfSdkLvglInputText  


Prototype
	LIB_EXPORT s32 MfSdkLvglInputText(s32 font, s8* title, s8* msg, s8* text, s32 mode, s32 min, s32 max, s32 timeout)
	Function
	

input text, show input text on a line
	









Params
	







in
	font        font(0 - small,1 - normal,2 - big)
	title        title
	msg        message
	0 - number, 1 - text,
mode
2 - IP, 3 - password, 4 - amount
	min        mininum length
	max        maxinum length
	timeout        timeout(second)
	out
	text        input text
	return
	0        success
	

  



	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            136. MfSdkLvglInputTextEx


Prototype
	LIB_EXPORT s32 MfSdkLvglInputTextEx(s32 font, s8* title, s8* msg, s8* text, s32 mode, s32 min, s32 max, s32 timeout)
	Function
	

input text, show input text in a input box
	









Params
	







in
	font        font(0 - small,1 - normal,2 - big)
	title        title
	msg        message
	0 - number, 1 - text,
mode
2 - IP, 3 - password, 4 - amount
	min        mininum length
	max        maxinum length
	timeout        timeout(second)
	out
	text        input text
	return
	0        success
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            137. MfSdkLvglDispBar  


Prototype
	LIB_EXPORT s32 MfSdkLvglDispBar(s32 width, s32 height, s32 min, s32 max, void** bar)
	Function
	

disp progress bar
	



Params
	



in
	width        width
	height        height
	min        mininum value
	max        maxinum value
	out
	bar        progress bar handle
	return
	0        success
	

  



	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               138. MfSdkLvglUpdateBar


Prototype
	

LIB_EXPORT s32 MfSdkLvglUpdateBar(void* bar, s32 value)
	Function
	

update progress bar
	

Params
	in
	bar        progress bar handle
	value        current value
	out
	Nothing
	return
	0        success
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               139. MfSdkLvglDispLed  


Prototype
	LIB_EXPORT s32 MfSdkLvglDispLed(s32 x, s32 y, s32 width, s32 height)
	Function
	

disp progress bar
	



Params
	



in
	x        horizontal coordinate
	y        vertical coordinate
	width        width
	height        height
	out
	Nothing
	return
	0        success
	Other        fail
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  140. MfSdkLvglUpdateLed


Prototype
	

LIB_EXPORT s32 MfSdkLvglUpdateLed(s32 index, s32 state)
	Function
	

update led state
	

Params
	

in
	led index (0 - red, 1 - blue,
index
2 - green, 3 - yellow)
	state        ( 0 - off, 1 - on)
	out
	Nothing
	return
	0        success
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  141. MfSdkLvglShowQrcode  


Prototype
	LIB_EXPORT s32 MfSdkLvglShowQrcode(s32 font, s8* title, s8* qrcode, s32 width, s32 align)
	Function
	

show qrcode
	





Params
	



in
	font        font(0 - small,1 - normal,2 - big)
	title        title
	qrcode        qrcode text
	width        width
	align        align type(0 - left, 1 - center, 2 - right)
	out
	Nothing
	return
	0        success
	Other        fail
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     142. MfSdkLvglShowQrcodeEx


Prototype
	LIB_EXPORT s32 MfSdkLvglShowQrcodeEx(s8* qrcode, s32 qrcodeLen, s32 width, s32 align, s32 y)
	Function
	

show qrcode
	





Params
	



in
	qrcode        qrcode data
	qrcodeLen        qrcode data length
	width        width
	align        align type(0 - left, 1 - center, 2 - right)
	y        Y offset
	out
	Nothing
	return
	0        success
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     143. MfSdkLvglShowImage  


Prototype
	LIB_EXPORT s32 MfSdkLvglShowImage(s32 x, s32 y, s8* fileName, s8* text, s32 id)
	Function
	

show image button
	





Params
	





in
	x        horizontal coordinate
	y        vertical coordinate
	fileName        image file name
	text        button text
	button id( >=0 image with click event, <0
id
no click events)
	out
	Nothing
	return
	0        success
	Other        fail
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        144. MfSdkLvglShowImageEx


Prototype
	LIB_EXPORT s32 MfSdkLvglShowImage(s32 x, s32 y, s32 align, s8* fileName, s8* text, s32 id)
	Function
	

show image button
	







Params
	





in
	x        horizontal coordinate
	y        vertical coordinate
	align        align type(0 - left, 1 - center, 2 - right)
	fileName        image file name
	text        button text
	button id( >=0 image with click event, <0
id
no click events)
	out
	Nothing
	return
	0        success
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        145. MfSdkLvglShowImagebuff  


Prototype
	LIB_EXPORT s32 MfSdkLvglShowImagebuff(s32 x, s32 y, s32 w, s32 h, s8* buf, s8* text, s32 id)
	Function
	

show image buff
	









Params
	







in
	x        horizontal coordinate
	y        vertical coordinate
	w        width
	h        height
	buf        image buffer
	text        button text
	button id( >=0 image with click event, <0
id
no click events)
	out
	Nothing
	return
	0        success
	Other        fail
	

  

remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           146. MfSdkLvglShowScreenCanves


Prototype
	

LIB_EXPORT s32 MfSdkLvglShowScreenCanves(s8* buf)
	Function
	

show except for the status bar the screen buff
	Params
	in
	buf        Screen buff(rgba 32-bit)
	out
	Nothing
	return
	0        success
	Other        fail
	remark
	MF960 with status bar,screen size is 480 * (800-30),buff size is 480
* (800-30) * 4;MF960 without status bar,screen size is 480 * 800,buff size is 480 * 800 * 4
	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           147. MfSdkLvglDrawLine  


Prototype
	LIB_EXPORT s32 MfSdkLvglDrawLine(s32 x, s32 y, s32 w, s32
h)
	Function
	

draw a line
	



Params
	



in
	x        horizontal coordinate
	y        vertical coordinate
	w        width
	h        height
	out
	Nothing
	return
	0        success
	Other        fail
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              148. MfSdkLvglDrawBox


Prototype
	LIB_EXPORT s32 MfSdkLvglDrawBox(s32 x, s32 y, s32 w, s32
h)
	Function
	

draw a box
	



Params
	



in
	x        horizontal coordinate
	y        vertical coordinate
	w        width
	h        height
	out
	Nothing
	return
	0        success
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              149. MfSdkLvglEsign  


Prototype
	LIB_EXPORT s32 MfSdkLvglEsign(s32 font, s8* title, s8* factor, u8 ** imgData, s32* dataSize, s32 timeout)
	Function
	

electronic signature
	





Params
	



in
	font        font(0 - small,1 - normal,2 - big)
	title        title
	factor        factor
	timeout        timeout(second)
	out
	imgData        image data
	dataSize        image data size
	return
	0        success
	Other        fail
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 150. MfSdkLvglScan


Prototype
	LIB_EXPORT s32 MfSdkLvglScan(s32 font, s8* title, s8* data, s32 datasize, s32 timeout)
	Function
	

Scan the QR code, barcode
	



Params
	



in
	font        font(0 - small,1 - normal,2 - big)
	title        title
	dataSize        code data size
	timeout        timeout(second)
	out
	data        code data
	return
	0        success
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 151. MfSdkLvglDispDialog  


Prototype
	LIB_EXPORT s32 MfSdkLvglDispDialog(s32 font, s8* title, s8* msg, s32 timeout, u8 isCountDown, void** handle)
	Function
	

display dialog
	





Params
	



in
	font        font(0 - small,1 - normal,2 - big)
	title        title
	msg        message
	timeout        timeout(second)
	isCountDown        countdown mode (1 - Yes, 0 - No)
	out
	handle        dialog handle
	return
	0        success
	Other        fail
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    152. MfSdkLvglUpdateDialog


Prototype
	LIB_EXPORT s32 MfSdkLvglUpdateDialog(void* handle, s8* title, s8* msg, s32 timeout, u8 isCountDown)
	Function
	

update dialog
	





Params
	



in
	handle        dialog handle
	title        title
	msg        message
	timeout        timeout(second)
	isCountDown        countdown mode (1 - Yes, 0 - No)
	out
	Nothing
	return
	0        success
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    153. MfSdkLvglCloseDialog  


Prototype
	

LIB_EXPORT s32 MfSdkLvglCloseDialog(void* handle)
	Function
	

close dialog
	Params
	in
	handle        dialog handle
	out
	Nothing
	return
	0        success
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       154. MfSdkLvglDispRollpageEx




LIB_EXPORT s32 MfSdkLvglDispRollpageEx(s32 font, s8* title, s8* buf, s32 timeout)    


Function
	

display text rollpage
	



Params
	



in
	font        font(0 - small,1 - normal,2 - big)
	title        title
	buf        text buffer
	timeout        timeout(second)
	out
	Nothing
	return
	0        success
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       155. MfSdkLvglDispMultipleChoice  


Prototype
	LIB_EXPORT s32 MfSdkLvglDispMultipleChoice(s32 font,const
s8* title, MfSdkLvglMenuText_T* choiseArry, s32 choiseSize, s32 select, s32 timeout)
	Function
	

display multiple choice
	





Params
	





in
	font        font(0 - small,1 - normal,2 - big)
	title        title
	choiseArry        list
	choiseSize        list size
	select        default list id
	timeout        timeout(second)
	out
	Nothing
	return
	>=0        success, list id
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          156. MfSdkLvglDispSetSlider  


  

Prototype
________________
LIB_EXPORT s32 MfSdkLvglDispSetSlider(s8* title, s32 width, s32 height, s32 minLevel, s32 maxLevel, s32 startValue, s32 timeout)
  

Function
	

set slider
	







Params
	





in
	title        title
	width        slider width
	height        slider height
	minLevel        minimum slider value
	maxLevel        maximum slider value
	startValue        startValue slider initial value
	timeout        timeout(second)
	out
	Nothing
	return
	0        success
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             157. MfSdkLvglDispSetResult  


Prototype
	LIB_EXPORT s32 MfSdkLvglDispSetResult(s32 result, s8* msg, s32 timeout)
	Function
	

display set result
	



Params
	

in
	result        result
	msg        message
	timeout        timeout(second)
	out
	Nothing
	return
	0        success
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                158. MfSdkLvglInputPin




LIB_EXPORT s32 MfSdkLvglInputPin(s8* title, s8* msg, s8* amount, s8* cardID, s8* pin, s32 timeout)    
  

Function
	

update dialog
	





Params
	



in
	title        title
	msg        message
	amount        amount
	cardID        cardID
	timeout        timeout(second)
	out
	pin        input pin
	return
	0        success
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                159. MfSdkLvglDispAnimation  


Prototype
	LIB_EXPORT s32 MfSdkLvglDispAnimation(s32 imgSize, s8** imgName, s8* msg, s32 interval, void** handle)
	Function
	

display animation
	



Params
	



in
	imgSize        images size
	imgName        images name
	msg        message
	interval        image display interval
	out
	handle        animation handle
	return
	0        success
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   160. MfSdkLvglCloseAnimation


Prototype
	

LIB_EXPORT s32 MfSdkLvglCloseAnimation(void* handle)
	Function
	

close animation
	

  

Params
	in
	handle        animation handle
	out
	Nothing
	return
	0        success
	Other        fail
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   161. MfSdkLvglCreateStatusBarTask


Prototype
	LIB_EXPORT void MfSdkLvglCreateStatusBarTask(MfSdkStatusBarCb task_cb)
	Function
	set callback function for status bar task(The loop call callback once a second)
	

Params
	in
	callback function for status bar
task_cb
task(loop)
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   162. MfSdkLvglSetStatusBarIcon  


Prototype
	LIB_EXPORT s32 MfSdkLvglSetStatusBarIcon(s32 x, s8* iconname, s32 group)
	Function
	

display status bar icon
	



Params
	

in
	x
	horizontal coordinate
	iconname
	icon name
	group
	icon group(max 5 groups, 0,1,2,3,4)
	out
	Nothing
	return
	0
	success
	Other
	fail
	remark
	This API can only be in MfSdkLvglCreateStatusBarTask callback
function calls
	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      163. MfSdkLvglQuickSetStatusBarIcon


Prototype
	LIB_EXPORT s32 MfSdkLvglQuickSetStatusBarIcon(s32 x, s8* iconname, s32 group)
	Function
	

Quick display status bar icon
	



Params
	

in
	x
	horizontal coordinate
	iconname
	icon name
	group
	icon group(max 5 groups, 0,1,2,3,4)
	out
	Nothing
	return
	0
	success
	Other
	fail
	remark
	This API is not in MfSdkLvglCreateStatusBarTask callback
function calls
	demo
	

	



                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      164. MfSdkLvglSetStatusBar  


Prototype
	LIB_EXPORT void MfSdkLvglSetStatusBar(s32 height, lv_color_t bgColor)
	Function
	

set status bar config
	

Params
	in
	height        status bar height
	bgColor        status bar background color
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         165. MfSdkLvglGetUiBuff




Prototype        LIB_EXPORT void MfSdkLvglGetUiBuff(void (*getUI)(u8 *buf,    
  

Function
	

Get the LVGL refresh screen buff
	

Params
	in
	The callback function for refreshing the
getUI
screen
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         166. MfSdkLvglLoadPng  


Prototype
	

LIB_EXPORT s8 MfSdkLvglLoadPng(const s8 *filename)
	Function
	

Load png image
	Params
	in
	filename        png image path
	out
	Nothing
	return
	Ref.MfSdkLvglOper_E
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            167. MfSdkLvglFreePng


Prototype
	

LIB_EXPORT s8 MfSdkLvglFreePng(const s8 *filename)
	Function
	

Load png image
	Params
	in
	filename        png image path
	out
	Nothing
	return
	Ref.MfSdkLvglOper_E
	remark
	

	demo
	

	

  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            168. MfSdkLvglGuiInit


Prototype
	

LIB_EXPORT void MfSdkLvglGuiInit(void)
	Function
	

init LVGL group
	Params
	in
	Nothing
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            169. MfSdkLvglGroupSet  


Prototype
	

LIB_EXPORT void MfSdkLvglGroupSet(lv_obj_t* obj)
	Function
	

obj add to group and set focus obj
	Params
	in
	obj
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               23. Memory module
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               170. Module description
This module mainly includes APIs on memory operations.


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               171. Module structure declaration
        None.        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               172. Constant declarations
        None.        
  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               173. MfSdkMemFree


Prototype
	

LIB_EXPORT void MfSdkMemFree(void *ptr)
	Function
	

ref. standard free
	Params
	in
	ptr
	out
	Nothing
	return
	Nothing
	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               174. MfSdkMemMalloc  


Prototype
	

LIB_EXPORT void *MfSdkMemMalloc(s32 size)
	Function
	

Ref. standard malloc
	Params
	in
	size
	out
	Nothing
	return
	

	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  175. MfSdkMemRealloc


Prototype
	

LIB_EXPORT void *MfSdkMemRealloc(void *ptr, s32 size)
	Function
	

Ref. standard realloc
	

Params
	in
	ptr
	size
	out
	Nothing
	return
	

	

  

remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  176. MfSdkMemCalloc


Prototype
	

LIB_EXPORT void *MfSdkMemCalloc(s32 nitems, s32 size)
	Function
	

	

Params
	in
	nitems
	size
	out
	Nothing
	return
	

	remark
	

	demo
	

	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  24. Base module  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     177. Module description
Base device.


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     178. Module structure declaration
None.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     179. Constant declarations
None.


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     180. MfSdkBaseCheck


Prototype
	

s32 MfSdkBaseCheck()
	Function
	

Whether the device uses a base
	Params
	in
	Nothing
	out
	Nothing
	

  
  

return
	0        Not        base
	1        have base
	remark
	

	demo
	s32 ret = 0;
ret = MfSdkBaseCheck(); if(ret==1)
{
//have base
}